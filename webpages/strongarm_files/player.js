!function(t){function e(e){for(var n,i,o=e[0],a=e[1],s=0,u=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(c&&c(e);u.length;)u.shift()()}var n={},r={11:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(t){return i.p+""+({}[t]||t)+".js"}(t);var c=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.wpJsonpExCoAdPlayer=window.wpJsonpExCoAdPlayer||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var c=a;i(i.s=116)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c}));var r,i=n(84),o=n(66),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=a(a({},i.a),{INTERNAL:o.a,EXTERNAL:{CONTENT:{START:"external.content.start"},AD:{INIT:"external.ad.init"}}}),c=function(t){return r||(r=t),r}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));var r,i=function(){function t(){this._loggers=[]}return t.prototype.addLogger=function(t){var e;Array.isArray(t)?(e=this._loggers).push.apply(e,t):this._loggers.push(t)},t.prototype.removeLogger=function(t){var e=this._loggers.indexOf(t);e>-1&&this._loggers.splice(e,1)},t.prototype.log=function(t,e){this._loggers.forEach((function(n){return n.log(t,e)}))},t.prototype.error=function(t,e,n){this._loggers.forEach((function(r){return r.error(t,e,n)}))},t.prototype.remote=function(t,e){this._loggers.forEach((function(n){return null==n?void 0:n.remote(t,e)}))},t.prototype.info=function(t,e){this._loggers.forEach((function(n){return n.info(t,e)}))},t.prototype.warn=function(t,e){this._loggers.forEach((function(n){return n.warn(t,e)}))},t.prototype.debug=function(t,e){this._loggers.forEach((function(n){return n.debug(t,e)}))},t.prototype.trace=function(t,e){this._loggers.forEach((function(n){return n.trace(t,e)}))},t.prototype.hasLoggers=function(){return this._loggers.length>0},t}();!function(t){t[t.NONE=-1]="NONE",t[t.ERROR=0]="ERROR",t[t.REMOTE=1]="REMOTE",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.LOG=4]="LOG",t[t.DEBUG=5]="DEBUG",t[t.TRACE=6]="TRACE",t[t.ALL=7]="ALL"}(r||(r={}));var o=n(11),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(){function t(t){var e=void 0===t?{}:t,n=e.level,i=e.playerSelector;this.PREFIX="[exco:ap]",this._level=r.NONE,this.PREFIX="[exco:ap".concat(i?":".concat(i):"","]"),this._level=null!=n?n:r.NONE}return t.prototype.error=function(t,e,n){this._level>=r.ERROR&&this._print("error",t||(null==e?void 0:e.message),a({error:e},n))},t.prototype.remote=function(t,e){this._level>=r.REMOTE&&this._print("log",t,e)},t.prototype.warn=function(t,e){this._level>=r.WARN&&this._print("warn",t,e)},t.prototype.log=function(t,e){this._level>=r.LOG&&this._print("log",t,e)},t.prototype.info=function(t,e){this._level>=r.INFO&&this._print("info",t,e)},t.prototype.debug=function(t,e){this._level>=r.DEBUG&&this._print("debug",t,e)},t.prototype.trace=function(t,e){this._level>=r.TRACE&&this._print("trace",t,e)},t.prototype._print=function(t,e,n){window.console[t]("%c".concat(this.PREFIX,"%c ").concat(e),"color: #aaaaaa","color: auto",o.a.empty(n)?"":n)},t}(),c=new i;function u(t){var e;window.location.search.includes("expd=1")&&c.addLogger(new s({level:r.ALL,playerSelector:(null===(e=t.rawConfig)||void 0===e?void 0:e.selector)||t.excoPlayerId})),t.logger&&c.addLogger(t.logger)}e.a=c},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var r=null;function i(t,e){return null!==r&&!0!==(null==e?void 0:e.override)||(r=t),r}function o(){return r}},function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return m})),n.d(e,"g",(function(){return y}));var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function i(t,e,n){return null!=t?t:null!=e?e:n}function o(t,e,n){return void 0!==t?t:void 0!==e?e:n}function a(t,e){if(Array.isArray(t))return t.length>0;if(t&&"object"==typeof t){var n=!1;return d((function(){return n=!0}),t),n}if("string"==typeof t){if(!isNaN(t))return!!+t;if(e)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;default:return null}}return!!t}var s=function(t){return null!=t},c=function(t){return void 0!==t},u=function(t){return a(t)};function d(t,e){if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function l(t,e,n,r){if(null==n||null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),o=0,a=Array.isArray(r)?r:[r];o<a.length;o++){d((function(n,r){(!0===e||e(n,r,i))&&(!0===t||t.indexOf(r)>=0)&&(i[r]=n)}),a[o])}return i}function p(t,e,n){return l(!0,t,e,n)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return l(!0,!0,t,e)}function f(t,e){return null==t||""===t?o(e,c(t)?null:void 0):i(a(t,!0),e,null)}function v(t,e){return null==t||""===t?o(e,c(t)?null:void 0):isNaN(t)?o(e,null):+t}function m(t,e){return null==t?o(e,t):""+t}function A(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i={},o=0,a=n;o<a.length;o++)for(var s=a[o],c=0,u=s;c<u.length;c++){var d=u[c],l="function"==typeof e?e(d):d[e];null!=l&&(i[l]=p(t,i[l]||{},d))}return Object.keys(i).map((function(t){return i[t]}))}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return A.apply(void 0,r([!0,t],e,!1))}},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.None=0]="None",t[t.ScheduledFetch=1]="ScheduledFetch",t[t.Prefetching=2]="Prefetching",t[t.Fetching=3]="Fetching",t[t.Fetched=4]="Fetched",t[t.Loading=5]="Loading",t[t.Initing=6]="Initing",t[t.Pending=7]="Pending",t[t.Ready=8]="Ready",t[t.Started=9]="Started",t[t.Playing=10]="Playing",t[t.Completed=11]="Completed",t[t.Finished=12]="Finished",t[t.Error=13]="Error"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"A",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"y",(function(){return v})),n.d(e,"n",(function(){return m})),n.d(e,"p",(function(){return A})),n.d(e,"w",(function(){return y})),n.d(e,"B",(function(){return b})),n.d(e,"z",(function(){return g})),n.d(e,"D",(function(){return E})),n.d(e,"s",(function(){return T})),n.d(e,"q",(function(){return I})),n.d(e,"m",(function(){return O})),n.d(e,"g",(function(){return S})),n.d(e,"i",(function(){return C})),n.d(e,"o",(function(){return P})),n.d(e,"e",(function(){return w})),n.d(e,"l",(function(){return L})),n.d(e,"k",(function(){return N})),n.d(e,"C",(function(){return k})),n.d(e,"x",(function(){return j})),n.d(e,"j",(function(){return x})),n.d(e,"f",(function(){return U})),n.d(e,"t",(function(){return M})),n.d(e,"r",(function(){return V})),n.d(e,"E",(function(){return F})),n.d(e,"F",(function(){return B})),n.d(e,"u",(function(){return q})),n.d(e,"d",(function(){return G})),n.d(e,"v",(function(){return H}));var r,i=n(18),o=n(61),a=(n(65),n(9)),s=n(21),c=n(2);!function(t){t.VAST="vast",t.PREBID="prebid",t.RTB="rtb",t.GAM="gam",t.TAM="tam"}(r||(r={}));var u="c",d=["191747228","501446106"],l=5,p={query:["AV_PUBLISHERID","AV_CHANNELID"],domain:[],mediaFiles:["player.aniview.com"]};function h(t){return Object.entries(p).some((function(e){var n=e[0],r=e[1];if("query"===n&&t.vastURL){var i=Object(a.o)(t.vastURL,r);return Object.values(i).some((function(t){return t}))}if("domain"===n&&t.vastURL){var o=Object(a.n)(t.vastURL,{noLeadingWww:!0});return r.includes(o)}if("mediaFiles"===n&&t.ad&&t.ad.creatives)return t.ad.creatives.some((function(t){if(t.mediaFiles)return t.mediaFiles.some((function(t){var e=Object(a.n)(t.fileURL||"",{noLeadingWww:!0});return r.includes(e)}))}))}))}function f(t){return t.originalType||t.type}var v=function(t){return!0===(null==t?void 0:t.isPubDemand)};function m(t){var e;return A(t)&&function(t){var e;return"google"===(null===(e=t.bidder)||void 0===e?void 0:e.toLowerCase())}(t)&&!v(t)&&!function(t){var e;return null===(e=t.demandId)||void 0===e?void 0:e.includes("456669857")}(t)&&(null===(e=t.vastURL)||void 0===e?void 0:e.includes("94166617"))}function A(t){return(null==t?void 0:t.type)===r.GAM}function y(t){return t.type===r.PREBID}function b(t){return t.type===r.TAM}function g(t){return t.originalType===r.RTB}function E(t){return t.type===r.VAST}function _(t){return A(t)&&v(t)}function T(t){return _(t)&&function(t){return t.keyValueEnabled}(t)}function I(t,e){return function(t){var e,n;return!!(null===(n=null===(e=t.priceTables)||void 0===e?void 0:e.exco)||void 0===n?void 0:n.length)}(t)&&m(e)||function(t){var e,n;return!!(null===(n=null===(e=t.priceTables)||void 0===e?void 0:e.publisher)||void 0===n?void 0:n.length)}(t)&&_(e)}function O(t){return d.includes(t.demandId)}var S=function(t){void 0===t&&(t={demandId:""});var e=t.demandId,n=(void 0===e?"":e).split("-");return{supplyId:n[0]||null,demandId:n[1]||null,supplyIdX:n[2]||null,demandIdX:n[3]||null,supplyIdDX:n[4]||null,demandIdDX:n[5]||null}},C=function(t){return t.filter((function(t){return t.id!==u}))},P=function(t){return Object(i.d)(t.cacheEntryTime,new Date)>20};function w(t){var e=R(t);return e=D(e)}var R=function(t){return t.filter((function(t){if(!t.capping)return!0;var e=t.capping,n=e.current,r=e.imp;return!r||((null==n?void 0:n.imp)||0)<r}))},D=function(t){return t.filter((function(t){if(!t.maxImpCapping&&!t.maxRequestCapping)return!0;if(!Object(o.d)(t.vastId))return!0;var e=t.maxImpCapping||1/0,n=t.maxRequestCapping||1/0;return Object(o.b)(t.vastId)<e&&Object(o.c)(t.vastId)<n}))},L=function(t){var e=t.capping,n=t.maxImpCapping,r=t.vastId;if(!e&&!n)return!1;var i=t.capping||{},a=i.current,s=i.imp;return!!(s&&((null==a?void 0:a.imp)||0)>=s)||!!Object(o.d)(r)&&!!(n&&Object(o.b)(r)>=n)},N=function(t){var e;return"ampliffy"===(null===(e=t.bidder)||void 0===e?void 0:e.toLowerCase().trim())},k=function(t){var e;return"usatoday"===(null===(e=t.bidder)||void 0===e?void 0:e.toLowerCase().replace(" ",""))},j=function(t,e){return t.priority>=e&&t.priority>=1e3},x=function(t){return Math.max.apply(Math,t.map((function(t){return t.priority})))},U=function(t,e){return null==t?void 0:t.find((function(t){return t.vastId.toString()===e}))};function M(t,e){return null!=t.useIMA?t.useIMA:function(t){return void 0===t&&(t=""),null!=t.match(/\/\/[^/]*g\.doubleclick\.net/)}(e)}function V(t){return t.googleOutstream}function F(t){t.adType="googleOutstream"}function B(t){return!0===t.excludeMA}function q(t){return y(t)||b(t)}function G(t){return t.filter((function(t){return!function(t){return Object(s.d)(c.b)||!A(t)&&!b(t)}(t)}))}function H(t){return!!t.some((function(t){return t.pbserver}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r={MONETIZATION:"Monetization",CONTENT:"Content"},i={AD_REQUEST:"Ad Request",AD_RESPONSE:"Ad Response",GPV:"GPV",AUCTION:"Auction",GEO_EDGE:"GeoEdge",MACROS:"Macros",SLOT_END:"Slot End",PREBID:"Prebid",IVT:"IVT",STORAGE:"Storage",CREATIVE:"Creative",BID_BIRD:"Bidbird",HLS:"HLS"}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return s}));var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i=[],o=null;function a(t,e){return(null===i||(null==e?void 0:e.override))&&(i=null!==o?r([o],t,!0):t),i}function s(t){return o=t,t}},function(t,e,n){"use strict";n.d(e,"h",(function(){return I})),n.d(e,"i",(function(){return O})),n.d(e,"c",(function(){return S})),n.d(e,"f",(function(){return C})),n.d(e,"d",(function(){return w})),n.d(e,"g",(function(){return R})),n.d(e,"e",(function(){return D})),n.d(e,"j",(function(){return L})),n.d(e,"l",(function(){return N})),n.d(e,"a",(function(){return k})),n.d(e,"k",(function(){return U})),n.d(e,"b",(function(){return M}));var r=n(3),i=n(16),o=n(28),a=n(27),s=n(95),c=n(37),u=n(7),d=n(5);var l=n(12),p=n(38),h=n(53),f=n(58),v=n(0),m=n(15),A=n(4),y=n(80),b=n(40),g=n(86),E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},_=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},T=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function I(t,e,n){void 0===n&&(n={userInteraction:!1}),e.isPaused||(M(t,e,"adpause"),v.b.emit(v.a.AD.PAUSE,E({interaction:n.userInteraction,reason:n.reason},Object(m.c)(e)))),e.isPaused=!0,e.playedAt=null,e.viewabilityTimer.pause(),e.flowTimeout.pause(),e.keepAliveTimer.pause()}function O(t,e,n){void 0===n&&(n={userInteraction:!1}),e.isPaused&&(M(t,e,"adplay"),v.b.emit(v.a.AD.PLAY,E({interaction:n.userInteraction,reason:n.reason},Object(m.c)(e)))),e.isPaused=!1,e.playedAt=Date.now(),e.viewabilityTimer.resume(),e.allowLongImpressions||e.flowTimeout.resume(),e.keepAliveTimer.rewind()}function S(t,e){I(t,e),e.vastTracker&&e.vastTracker.setPaused(!0);try{e.pauseAd()}catch(t){}}function C(t,e){try{e.resumeAd(),e.vastTracker&&e.vastTracker.setPaused(!1)}catch(t){}}function P(t,e,n,r){var i=u.a;return"api"===r?{allowed:!0,playerData:i}:n||r instanceof p.a&&r!==i||"content"==r&&i?{allowed:!1,playerData:i}:{allowed:!0,playerData:i}}function w(t,e,n){var r=P(0,0,t.paused,e),o=r.playerData;r.allowed&&(t.autoplay=!1,t.paused=!0,o&&(I(t,o,n),e!=o&&S(t,o)),"api"==e&&v.b.emit(v.a.PLAYER.ACTION.PAUSE),setTimeout((function(){M(t,null,"player.paused"),M(t,null,"content.paused")}),0),t.beingVpaid&&Object(i.a)(t,"jsAdPaused",{}))}function R(t,e,n){var r;if(void 0===n&&(n={userInteraction:!1}),!function(t){var e,n;return t.monetize&&(null===(n=null===(e=t.schedule)||void 0===e?void 0:e.playerStart)||void 0===n?void 0:n.enabled)&&t.autoplay&&!t.firstSlotStart}(t)){if(!1===t.paused&&u.a&&u.a.isPaused)return O(t,u.a,n),void C(0,u.a);var o=P(0,0,!n.vastId&&!0===t.started&&!t.paused&&t.autoplay,e),a=o.playerData;o.allowed&&(t.paused=!1,t.autoplay=!(n.vastId||t.playingVastId),a&&(O(t,a,n),e!=a&&C(0,a)),("api"===e||n.userInteraction)&&v.b.emit(v.a.PLAYER.ACTION.PLAY),M(t,null,"player.resumed"),t.beingVpaid&&Object(i.a)(t,"jsAdPlaying",{}),t.waitForResumePromise=null,null===(r=t.waitForResumeResolve)||void 0===r||r.call(t))}}function D(t,e,n,r){if((t.width!=n||t.height!=r)&&t.rootDivElem&&!t.isNetwork){var i=!1;if(void 0===n&&void 0===r){var o=Object(h.b)(t);if(!o)return;n=o.width,r=o.height}else i=!0,n=Number(n),r=Number(r);if(!(n<=0||r<=0)){t.width=n,t.height=r,v.b.emit(v.a.PLAYER.RESIZE,{width:n,height:r,viewMode:e}),i&&(t.widthOverwrite=n,t.heightOverwrite=r,t.rootDivElem.style.width=n+"px",t.rootDivElem.style.height=r+"px");for(var a=0,s=u.b;a<s.length;a++){var c=s[a];try{c.resizeAd&&c.resizeAd(n,r,e)}catch(t){}}if(u.a)try{u.a.resizeAd&&u.a.resizeAd(n,r,e)}catch(t){}}}}function L(t,e,n,r,o){void 0===e&&(e=t.volume),void 0===o&&(o=!1);var a=null!=n?n:0==e;if(o&&function(t){t.content instanceof c.a&&t.content.unlockSlot();for(var e=0,n=u.b;e<n.length;e++){var r=n[e];Object(d.p)(u.a)&&Object(d.p)(r)||r.unlockAdSlot()}}(t),function(t,e,n){u.a&&(u.a.setAdVolume(t,e,n==u.a),e?v.b.emit(v.a.AD.MUTED,u.a):v.b.emit(v.a.AD.UNMUTED,u.a))}(e,a,r),t.content instanceof c.a&&t.content.setVolume(e,a),!(t.volume==e&&t.muted==a||t.muted&&a)){e>0&&(t.dynamicSound=!0),a&&null==n||(t.volume=e),t.muted=a;for(var s=0,l=u.b;s<l.length;s++){var p=l[s];try{p.syncVolume(),p.vastTracker&&p.vastTracker.setMuted(a)}catch(t){}}t.beingVpaid&&Object(i.a)(t,"jsAdVolumeChange",{volume:e,muted:a}),M(t,null,"player.volumeChanged",{volume:t.volume,muted:t.muted})}}function N(){u.a&&u.a.skipAd()}function k(t){if(u.a&&u.a.state>A.a.Ready&&u.a.state<A.a.Completed){var e=u.a.showAdUI();return E(E({content:!1,paused:t.paused||u.a.isPaused},u.a.getProgress()),{adUI:e,volume:t.volume,muted:null!=u.a.muted?u.a.muted:t.muted,isLiveStream:!1,contentProgress:t.content instanceof c.a?t.content.getProgress():null})}return t.content instanceof c.a?E(E({content:!0,paused:t.paused},t.content.getProgress()),{contentProgress:t.content.getProgress(),adUI:!1,volume:t.volume,muted:t.content.video.muted}):null}var j=function(){function t(t){this.players=t}return t.prototype.pause=function(t){void 0===t&&(t={userInteraction:!0}),w(this.players,"api",t)},t.prototype.play=function(t){void 0===t&&(t={userInteraction:!0}),R(this.players,"api",t),this.sound(null,t.userInteraction)},t.prototype.updateParams=function(t){this.players.customParams=Object(y.a)(this.players.customParams,t.customParams)},t.prototype.overrideInitParams=function(t){if(!1===this.players.gpvConfLoaded)for(var e in t)t.hasOwnProperty(e)&&this.players.initOverrides.push({name:e,value:t[e]});else void 0!==t.allowSound&&this.players.allowSound!=t.allowSound&&L(this.players,t.allowSound?1:0,!t.allowSound)},t.prototype.setContentVariant=function(t){!0===this.players.gpvConfLoaded&&Object(o.d)(this.players,t)},t.prototype.setVideoFormat=function(t){Object(o.g)(this.players,t)},t.prototype.seekContent=function(t){!0===this.players.gpvConfLoaded&&Object(o.b)(this.players,t)},t.prototype.seekToLive=function(){this.players.content&&this.players.content.seekToLive()},t.prototype.setPlaybackSpeed=function(t){this.players.content&&this.players.content.setPlaybackSpeed(t)},t.prototype.setQualityLevel=function(t){this.players.content&&this.players.content.setQualityLevel(t)},t.prototype.getContents=function(){return this.players.content.list},t.prototype.getCurrentContent=function(){return this.players.content.currentItem},t.prototype.getQualityLevels=function(){return this.players.content?this.players.content.getQualityLevels():[]},t.prototype.addContentItems=function(t,e){var n=e||this.players.content.list.length;n>this.players.content.list.length&&(n=this.players.content.list.length),this.players.content.insertAt(n,t)},t.prototype.updateContentItem=function(t,e){return this.players.content.updateItem(t,e)},t.prototype.setCurrentContent=function(t){var e,n;e=this.players,n=t,e.content&&Object(o.e)(e,n)},t.prototype.next=function(){this.players.content&&this.players.content.next()},t.prototype.prev=function(){this.players.content&&this.players.content.prev()},t.prototype.getContentList=function(){return this.players.content.list},t.prototype.setContent=function(t){!1===this.players.gpvConfLoaded?this.players.initOverrides.push({name:"content",value:t}):Object(o.c)(this.players,t)},t.prototype.setExtContent=function(t){var e,n;!1===this.players.gpvConfLoaded?this.players.initOverrides.push({name:"contentExternal",value:t}):(e=this.players,n=t,e.content&&Object(o.f)(e,n))},t.prototype.setPausable=function(t){this.players.initOverrides.push({name:"pausable",value:t})},t.prototype.setNativeSdkConfig=function(t){this.players.isNativeSdk=!0,this.players.nativeSdkConfig=t},t.prototype.sound=function(t,e){if(void 0===e&&(e=!0),!1===this.players.gpvConfLoaded)this.players.initOverrides.push({name:"sound",value:t});else{var n=Object(s.a)(t);null!=n?(void 0===n.volume&&!1===n.muted&&(n.volume=this.players.volume||1),L(this.players,n.volume,n.muted,null,e)):L(this.players,this.players.volume,this.players.muted,null,e)}},t.prototype.resize=function(t,e){D(this.players,"normal",t,e)},t.prototype.skip=function(){N()},t.prototype.skipAdSlot=function(){return _(this,void 0,void 0,(function(){return T(this,(function(t){return[2,v.b.emitAsync(v.a.INTERNAL.AD.SKIP_SLOT)]}))}))},t.prototype.close=function(t,e){!function(t,e,n){if(!t.closed){t.serverEvents.supplyEvent({name:"SupplyClosed",reason:n}),M(t,null,"closed",{preserveDiv:e,reason:n}),t.closed=!0,Object(l.c)(t),null!=t.viewStartPlayerInterval&&(clearInterval(t.viewStartPlayerInterval),t.viewStartPlayerInterval=null),null!=t.viewCheckPlayerInterval&&(clearInterval(t.viewCheckPlayerInterval),t.viewCheckPlayerInterval=null),t.content instanceof c.a&&t.content.destroyHls(),Object(f.a)(),t.apiInterface.removeAllListeners(),t.removeAllListeners(),v.b.removeAllListeners();var r=e?t.divElem:t.rootDivElem;r&&r.parentNode&&r.parentNode.removeChild(r),Object(g.a)()}}(this.players,t,e)},t.prototype.restart=function(t){this.players.closed=!1,this.players.rootDivElem=Object(h.a)(this.players),t&&(this.players.autoplay=![b.a.CLICK_TO_PLAY].includes(t.playbackMode),this.players.playbackMode=t.playbackMode||b.a.AUTO_PLAY,this.players.monetize=t.shouldMonetize,this.players.muted=t.mute,this.players.volume=t.mute?0:1,this.players.customParams=Object(y.a)(this.players.customParams,t.customParams),this.players.customMacros=Object(y.a)(this.players.customMacros,t.customMacros),Object(o.k)(this.players,null,t.contentsConfig)),this.players.rootDivElem&&this.players.rootDivElem.parentNode&&Object(h.c)(this.players)},t.prototype.pauseAds=function(){var t;(t=this.players).autoplay=!1,u.a&&Object(l.c)(t,u.a)},t.prototype.show=function(){Object(a.e)(this.players.rootDivElem,"hidden")},t.prototype.hide=function(){Object(a.a)(this.players.rootDivElem,"hidden")},t.prototype.sendDemandEvent=function(t,e){!function(t,e,n){var r=t.findPlayerData((function(t){return t.vastId==e}));r&&t.serverEvents.isExternalEvent(n.name)&&t.serverEvents.demandEvent(r,n)}(this.players,t,e)},t.prototype.sendSupplyEvent=function(t){this.players.serverEvents.isExternalEvent(t.name)&&this.players.serverEvents.supplyEvent(t)},t.prototype.sendTriggeredEvents=function(){var t,e,n=null===(e=null===(t=this.players)||void 0===t?void 0:t.apiInterface)||void 0===e?void 0:e.triggeredWithoutListeners;if(n){for(var r=0,i=n;r<i.length;r++){var o=i[r];this.players.apiInterface.trigger(o.name,o.data)}this.players.apiInterface.triggeredWithoutListeners=null}},t.prototype.getProgress=function(){return k(this.players)},t.prototype.hasPubDemand=function(){return this.players.hasPublisherDemand},t.prototype.isIvtSession=function(){return this.players.isIvt},t}();function x(t){return t.filter((function(t){return"c"!==t.id})).map((function(t){return{id:t.id,type:t.type}}))}function U(t,e,n){t.apiInterface=e.registerPlayer(t.rootDivElem.id,[""+t.playerId]);var r=new j(t);for(var i in r){var o=i,a=r;"function"==typeof a[o]&&(t.apiInterface[o]=a[o].bind(r))}if("function"==typeof t.apiInterface.init)try{var s=t.apiInterface.init(t.rootDivElem.id,E({playerEvents:t.playerEvents,serverEvents:t.serverEvents.emitter,dlist:x(n)},function(t){return t.find((function(t){return"c"===t.id}))}(n)));if(s&&"function"==typeof s.then)return s}catch(t){}return Promise.resolve(t.apiInterface)}function M(t,e,n,i){var o={playerId:t.playerId,subid:t.subid},a=t.apiInterface.eventEmitter.listenerTree,s=n.toString().split("."),c=s[0],u=s[1];!a||a[c]&&a[c][u]||!t.apiInterface.triggeredWithoutListeners||t.apiInterface.triggeredWithoutListeners.push({name:n,data:E(E({},o),i)}),e&&(o.vastId=e.cxvid||e.vastId,Object(r.d)(r.a,o,e.customVars)),Object(r.d)(r.a,o,i),e&&e.moat;try{t.apiInterface.trigger(n,o)}catch(t){}}},function(t,e,n){"use strict";n.d(e,"i",(function(){return i})),n.d(e,"u",(function(){return a})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"m",(function(){return p})),n.d(e,"j",(function(){return h})),n.d(e,"t",(function(){return m})),n.d(e,"r",(function(){return A})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"n",(function(){return g})),n.d(e,"s",(function(){return P})),n.d(e,"a",(function(){return w})),n.d(e,"q",(function(){return R})),n.d(e,"o",(function(){return D})),n.d(e,"p",(function(){return L})),n.d(e,"f",(function(){return N})),n.d(e,"l",(function(){return k})),n.d(e,"k",(function(){return j}));var r=n(1);function i(t,e){if(null!=t)return t?"https:":"http:";try{var n=e||window.location||document.location;if(n&&"http:"==n.protocol)return"http:"}catch(t){}return"https:"}function o(t){try{if(t&&0===t.protocol.indexOf("file"))return!0;if(document&&document.location&&0===document.location.protocol.indexOf("file"))return!0;if(window.location&&0===window.location.protocol.indexOf("file"))return!0;if(location&&0===location.protocol.indexOf("file"))return!0}catch(t){return!0}return!1}function a(t){var e=t||location||window.location||document.location;return!(o(t)||e&&(-1!=e.host.indexOf("localhost")||-1!=e.host.indexOf("127.0.0.1")||e.port&&"80"!=e.port))}function s(){var t="";try{if(parent!==window){t=document.referrer;var e=window.location.ancestorOrigins;if(e){var n=e[e.length-1];n&&t.substring(0,n.length)!=n&&(t=n)}}else t=top.location.href}catch(t){}return t}function c(t){try{var e=document.createElement("a");return e.href=t,e.host}catch(e){return t}}function u(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)&&void 0!==t[r]&&"function"!=typeof t[r]){var i=String(t[r]);r&&r.length&&i.length?n.push([r,v(i)].join("=")):r&&r.length?n.push(r+"="):i&&i.length&&n.push(i)}return e||n.push("cb="+(new Date).getTime().toFixed(0)),n.join("&")}function d(t,e){var n=u(e),r=-1==t.indexOf("?")&&n.length>0?"?":"";return[t,r,n].join("")}var l=function(t){try{var e=(new URL(t).pathname.split("/").pop()||"").split(".");return 1===e.length?"":e.pop()||""}catch(t){return""}};function p(t){var e=t.split("/")[0].toLowerCase(),n=!("rtsp:"!==e&&"rtp:"!==e);if(!n){var r=l(t);"m3u8"!==r&&"m3u"!==r&&"swf"!==r||(n=!0)}return n}function h(t,e){var n;n=e?{}:[];try{for(var r=t.slice(t.indexOf("?")+1).split("&"),i=0,o=r;i<o.length;i++){var a=o[i].split("=");e||n.push(a[0]);var s=a[1];e&&(s=f(s)),n[a[0]]||(n[a[0]]=s)}}catch(t){n={}}return n}function f(t){try{t=decodeURIComponent(t)}catch(e){try{t=unescape(t)}catch(t){}}return t}function v(t){try{t=encodeURIComponent(t)}catch(e){try{t=escape(t)}catch(t){}}return t}function m(t,e,n){return e&&e.trim&&e.replace?(e=e.trim(),"https:"==t.toLowerCase()&&(e=e.replace(/^http:/i,"https:")),o(n)&&(e=e.replace(/^\/\//,t+"//")),e):e}function A(t,e){return e.indexOf("//")>0?m(t,e):t+(0==e.indexOf("//")?"":"//")+e}function y(t,e){if(void 0===e&&(e=window),!t)return t;if(/\w+:\/\//.exec(t))return t;var n=e.location.protocol;try{n=e.top.location.protocol}catch(t){}return/^\/\//.exec(t)?n+t:"".concat(n,"//").concat(t)}function b(t,e){if(void 0===e&&(e=window),!t)return t;try{var n=new URL(t),r=e.top.location.host||e.location.host;if(n.host===r)return t}catch(t){}return null}function g(t,e){var n=void 0===e?{}:e,r=n.noLeadingWww,i=void 0!==r&&r,o=n.noPort,a=void 0!==o&&o;try{t=new URL(y(t))}catch(t){return}return t=a?t.hostname:t.host,i&&t.startsWith("www.")&&(t=t.substring(4)),t}function E(t){try{if(!t.location.ancestorOrigins)return;return t.location.ancestorOrigins}catch(t){}}function _(t,e){return t.context&&t.context.sourceUrl&&(e=!0),e}function T(t,e){return t&&(e=t),e}function I(t,e,n,r){return S(t,e)&&(n=!0,r=function(t,e){return e=T(function(t){try{var e=t.querySelector("link[rel='canonical']");if(null!==e)return e.href}catch(t){}return null}(t.document),e)}(t,r)),{reachedTop:n,bestCanonicalUrl:r}}function O(t,e,n){return t&&!e&&(n=t),n}function S(t,e){return t===e.top}function C(t,e,n,r,i,o){return!t&&e&&e[n-1]&&(t=e[n-1],r=S(i,o)),{foundLocation:t,hasTopLocation:r}}function P(t){var e=t.currentWindow,n=void 0===e?{}:e,r=t.inAmpFrame,i=void 0!==r&&r,o=t.win,a=void 0===o?window:o,s=t.bestLocation,c=void 0===s?"":s,u=t.hasTopLocation,d=void 0!==u&&u,l=t.valuesFromAmp,p=void 0!==l&&l,h=t.reachedTop,f=void 0!==h&&h,v=t.bestCanonicalUrl,m=void 0===v?"":v,A=t.level,y=void 0===A?0:A,b=t.maxNestedIframes,g=void 0===b?10:b;do{var P=n,w=i,R=void 0,D=!1,L=null,N=E(a);i=!1,n=n?n.parent:a;try{R=n.location.href||null}catch(t){D=!0}if(D)if(w){var k=P.context;try{c=L=null==k?void 0:k.sourceUrl,d=!0,p=!0,f=S(n,a),m=T(k.canonicalUrl,m)}catch(t){}}else{try{var j=P.document.referrer;j&&(L=j,f=S(n,a))}catch(t){}var x=C(L,N,y,d,n,a);L=x.foundLocation,d=x.hasTopLocation,c=O(L,p,c)}else{if(R){c=L=R,p=!1;var U=I(n,a,f,m);f=U.reachedTop,m=U.bestCanonicalUrl}i=_(n,i)}y++}while(n!==a.top&&y<g);return{bestLocation:c,hasTopLocation:d,reachedTop:f,bestCanonicalUrl:m}}function w(t,e){var n=new URL(t);return Object.entries(e).forEach((function(t){var e=t[0],r=t[1];n.searchParams.append(e,r)})),n.toString()}function R(t,e){void 0===e&&(e={});try{var n=new URL(t);return Object.entries(e).forEach((function(t){var e=t[0],r=t[1];null===r?n.searchParams.delete(e):n.searchParams.set(e,r)})),n.toString()}catch(n){return r.a.error("Failed to replace url params - ".concat(t),n,e),t}}function D(t,e){try{var n=new URL(t);return e.reduce((function(t,e){return t[e]=n.searchParams.get(e),t}),{})}catch(n){r.a.error("Failed to read url params - ".concat(t),n,e)}return{}}var L=function(t,e,n){return t.split(e).join(n)},N=function(t,e){try{var n=new URL(t),r="".concat(n.protocol,"//").concat(n.hostname).concat(n.pathname);return e&&e.leaveQuery&&(r+=n.search),e&&e.leaveHash&&(r+=n.hash),r}catch(t){}return t},k=function(t){return"mp4"===l(t)},j=function(t){return"m3u8"===l(t)}},function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"n",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"l",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"k",(function(){return d})),n.d(e,"m",(function(){return l})),n.d(e,"q",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"o",(function(){return v})),n.d(e,"p",(function(){return m})),n.d(e,"d",(function(){return A})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return b})),n.d(e,"i",(function(){return g})),n.d(e,"e",(function(){return E}));var r=n(11),i=n(27);function o(t){return Array.isArray(t)?t.slice():t?[t]:[]}function a(t){return!r.a.nullOrUndefined(t)&&r.a.object(t)}function s(t){return t&&(((new Date).getTime()-t)/1e3).toFixed(1)}function c(t,e,n){try{var r=document.createElement("script"),i=document.getElementsByTagName("head")[0]||document.documentElement;r.setAttribute("type","text/javascript"),e&&(r.async=!0),r.src=t,n&&r.addEventListener("load",n),i.appendChild(r)}catch(t){}}function u(t,e){return void 0===t&&(t=null),void 0===e&&(e=1),new Promise((function(n,r){try{var i=document.createElement("iframe");i.style.display="none",t&&(i.src=t),i.onerror=function(t){return r(t)};var o=setTimeout((function(){return n(i)}),1e3*e);i.onload=function(){clearTimeout(o),n(i)},document.body.appendChild(i)}catch(t){r(t)}}))}function d(t){var e=t.src,n=t.target,r=void 0===n?document.body:n,o=t.inIframe,a=void 0===o||o,s=t.windowRefs,c=t.timeout,u=t.className,d=void 0===u?null:u;return new Promise((function(t,n){var o=document.createElement("script");o.src=e,o.setAttribute("type","text/javascript");var u=window;if(a){var l=document.createElement("iframe");l.onload=function(){(u=l.contentWindow)?(Object.assign(u,s||{}),u.document.open(),u.document.write("<html></html>"),u.document.head.appendChild(o),u.document.close()):n({win:u,msg:"iframe.error"})},l.onerror=function(){n({win:u,msg:"iframe.error"})},l.src="about:blank",l.style.display="none",d&&Object(i.b)(l,d),r.appendChild(l)}else r.appendChild(o);var p=c&&setTimeout((function(){return n({win:u,msg:"timeout"})}),1e3*c);o.onload=function(){clearTimeout(p),t(u)},o.onerror=function(t){clearTimeout(p),n({win:u,error:t,msg:"script.error"})}}))}function l(t,e,n,r){void 0===r&&(r=!1);var i=document.getElementsByTagName("head")[0]||document.documentElement,o=document.getElementById(t);if(r&&o)n&&o.addEventListener("load",(function(){return n()}));else{var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.id=t,a.src=e(),a.addEventListener("load",(function(){return n()})),i.appendChild(a)}}function p(t){if(t.length>1)for(var e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[n];t[n]=t[e],t[e]=r}return t}function h(t,e){if(t.find)return t.find(e);for(var n=0,r=t;n<r.length;n++){var i=r[n];if(e(i))return i}}function f(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var v=function(t){var e={};try{new URL(t).searchParams.forEach((function(t,n){e[n]=t}))}catch(t){}return e};function m(t,e,n){try{var r=new URL(t);return null===n?r.searchParams.delete(e):r.searchParams.set(e,n),r.toString()}catch(t){}return t}function A(t,e){return Object.keys(e).forEach((function(n){a(t[n])&&a(e[n])?A(t[n],e[n]):t[n]=e[n]})),t}function y(t,e){return Object.keys(e).forEach((function(n){a(t[n])&&a(e[n])?y(t[n],e[n]):r.a.empty(e[n])||(t[n]=e[n])})),t}function b(t){return(new XMLSerializer).serializeToString(t)}function g(t){var e="th";return 1===t&&(e="st"),2===t&&(e="nd"),3===t&&(e="rd"),"".concat(t).concat(e)}function E(t){return!!document.querySelector(t)}},function(t,e,n){"use strict";var r=function(t,e){return Boolean(t&&e&&t instanceof e)},i=function(t){return null==t},o=function(t){return r(t,Object)},a=function(t){return"string"==typeof t||t instanceof String};e.a={fn:function(t){return r(t,Function)||"function"==typeof t},nullOrUndefined:i,emptyString:function(t){return a(t)&&""===t},str:a,object:o,empty:function(t){return!!i(t)||(!(!a(t)&&!Array.isArray(t)||0!==t.length)||o(t)&&0===Object.keys(t).length)},url:function(t){return void 0===t&&(t=""),/^(http|https):\/\/[^ "]+$/.test(t)||/^\/\/[^ "]+$/.test(t)},array:function(t){return Array.isArray(t)},promise:function(t){return t instanceof Promise}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return h}));var r=n(83),i=n(15),o=n(13),a=n(8),s=n(16),c=n(30),u=n(4),d=n(7);function l(t,e){return null!=t.findPlayerData((function(t){return t!=e&&t.state==u.a.Playing}))}function p(t,e,n,s){if(void 0===n&&(n=29),"function"==typeof t.finishPlayerData)return t.finishPlayerData(e,n,s);if(e.state!=u.a.Error&&e.state!=u.a.Finished){if(e===d.a&&Object(d.c)(null),t.anyPlaying=t.anyPlaying&&l(t,e),Object(i.d)(e),e.flowTimeout.cancel(),s&&(t.emit(r.a.AD_ERROR,{error:s,playerData:e}),Object(o.g)(t,e,s),e.state=u.a.Error,60===s.code&&(e.skippable=!1,Object(a.b)(t,e,"ad.complete",{error:s,playerData:e}))),e.state==u.a.Playing){t.adFinishedAt=t.now();var c={listCompleted:t.frozen,skipped:2==n,error:!!s,tooLong:3==n};e.skippable=!1,Object(a.b)(t,e,"adcomplete",c),Object(a.b)(t,e,"ad.complete",c),e.finishPromiseResolve()}Object(i.b)(t,e)}}function h(t,e){t.frozen=!0,t.playNextRepeatTimer.cancel();var n=0==d.b.length;return function(t,e){if(d.b.length)for(var n=d.b.length-1;n>=0;n--)d.b[n]!==e&&Object(i.b)(t,d.b[n])}(t,e),Object(a.b)(t,null,"player.adspaused"),e||(t.anyPlaying=!1,t.beingVpaid&&!t.vpaidContent&&Object(s.a)(t,"jsAdError",{error:"no ads"})),e?e.finishPromise:n?Promise.resolve():c.a.delay(1e3)}},function(t,e,n){"use strict";n.d(e,"i",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return g})),n.d(e,"k",(function(){return E})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return T})),n.d(e,"e",(function(){return S})),n.d(e,"j",(function(){return C})),n.d(e,"d",(function(){return P})),n.d(e,"f",(function(){return L}));var r,i,o=n(31),a=n(9),s=n(22),c=n(4),u=n(1),d=n(0),l=n(5),p=n(11),h=n(14),f=n(2),v=n(6),m=n(26),A=function(){return(A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};!function(t){t[t.VIDEO_ONLY=0]="VIDEO_ONLY",t[t.VPAID_FLV_DEFAULT=1]="VPAID_FLV_DEFAULT",t[t.VPAID_JS_DEFAULT=2]="VPAID_JS_DEFAULT",t[t.VPAID_FLV_ONLY=3]="VPAID_FLV_ONLY",t[t.VPAID_JS_ONLY=4]="VPAID_JS_ONLY"}(r||(r={})),function(t){t[t.VPAID_UNKNOWN_ERROR=1]="VPAID_UNKNOWN_ERROR",t[t.VPAID_TIMEOUT=2]="VPAID_TIMEOUT",t[t.VPAID_EMPTY_VAST=3]="VPAID_EMPTY_VAST",t[t.VPAID_EMPTY_BLOCKED_DOMAIN=4]="VPAID_EMPTY_BLOCKED_DOMAIN",t[t.VPAID_NO_AVAILABLE_ADS=5]="VPAID_NO_AVAILABLE_ADS",t[t.VPAID_VAST_ERROR=6]="VPAID_VAST_ERROR",t[t.VPAID_SECURITY_ERROR=7]="VPAID_SECURITY_ERROR",t[t.VPAID_STREAM_ERROR=8]="VPAID_STREAM_ERROR",t[t.VPAID_START_TIMEOUTED=9]="VPAID_START_TIMEOUTED",t[t.VPAID_INTERNAL_VPAID_ERROR=10]="VPAID_INTERNAL_VPAID_ERROR",t[t.VPAID_IMA_NON_LINEAR=11]="VPAID_IMA_NON_LINEAR",t[t.VPAID_VOLUME_VIOLATION=12]="VPAID_VOLUME_VIOLATION",t[t.VPAID_INNER_VPW_EXCEPTION=13]="VPAID_INNER_VPW_EXCEPTION",t[t.VPAID_VIDIBLE_CONTENT=14]="VPAID_VIDIBLE_CONTENT"}(i||(i={}));var y,b=[60];!function(t){t[t.FIRST=1]="FIRST",t[t.MIDPOINT=2]="MIDPOINT",t[t.THIRD=3]="THIRD",t[t.COMPLETE=4]="COMPLETE"}(y||(y={}));var g=[null,"firstQuartile","midpoint","thirdQuartile","complete"];function E(t,e,n){if(e&&n&&n.vastTracker.quartiles){var r=n.vastTracker.quartiles,i=r[g[t]];if(t==y.COMPLETE&&(i=n.vastTracker.assetDuration),i){for(var o in r)o&&r.hasOwnProperty(o)&&(!n.vastTracker.progress||n.vastTracker.progress<r[o])&&r[o]<i&&E(Object.keys(r).indexOf(o)+1,e,n);(!n.vastTracker.progress||n.vastTracker.progress<=i)&&n.vastTracker.setProgress(i)}}}function _(t,e,n){if(3!=n.code){var r=e.getErrorEvent(n);r&&(r.timed?t.serverEvents.demandTimedEvent(e,r.event):t.serverEvents.demandEvent(e,r.event))}}function T(t,e,n,r,i,o,a,s,p){if(t){if("function"==typeof t.vastError)return t.vastError(e,n,r,i,o,a,s,p);if(92!=n){var h="";if(void 0!==o&&o){if(3!=n&&o.vastErrorWasReported)return;h=(o.state>=c.a.Started?((new Date).getTime()-o.startAdTime)/1e3:((new Date).getTime()-o.loadAdTime)/1e3).toFixed(1)}else;void 0===a&&(a=!1),void 0===s&&(s=!1);var f="";if(u.a.hasLoggers())try{o.vastResponseXML&&(f=(new XMLSerializer).serializeToString(o.vastResponseXML))}catch(t){u.a.error("Could not serialize vastResponseXML",t)}var v={errorCode:n,errorMessage:r,vastXml:f,demandId:o.vastId,type:Object(l.h)(o),bidder:o.bidder,mediaFileUrl:o.mediaURL,mediaFileFormat:o.adType};a&&!o.logStartWasDone&&(v.logStartRequest=1,o.logStartWasDone=!0),s&&!o.logLoadWasDone&&(v.logLoadRequest=1,o.logLoadWasDone=!0),""!=h&&(v.time=h),o.vastErrorWasReported=!0,b.includes(n)||(t.eventDispatcher.sendErrorEvent(o,r,t),d.b.emit(d.a.AD.ERROR,{code:n,isGeneric:10===n,message:r,demand:o}))}}}var I=document.createElement("video");function O(t){try{var e=t.split("/"),n=e[0],r=e[1];switch(n){case"video":return["video",r];case"application":if(-1!=r.indexOf("javascript"))return["jsvpaid"];if(-1!=r.indexOf("shockwave-flash"))return["flvpaid"];default:return[null]}}catch(t){return[null]}}function S(t,e){return e?e.fromUrlHandler?function(t){var e=null;switch(t.code){case o.a.NO_XHR_SUPPORT:e={reason:24,code:91,iabError:h.b.VAST_URL_UNAVAILABLE,message:"no supported xhr object"};break;case o.a.OPEN:e={reason:23,code:95,iabError:h.b.VAST_URL_UNAVAILABLE,message:"xhr error on open"};break;case o.a.SEND:e={reason:23,code:96,iabError:h.b.VAST_URL_UNAVAILABLE,message:"xhr error on send"};break;case o.a.CORS:e={reason:24,code:93,iabError:h.b.VAST_URL_UNAVAILABLE,message:"xhr cross origin exception"};break;case o.a.STATUS:e={reason:24,code:94,iabError:h.b.VAST_URL_UNAVAILABLE,message:"xhr status error"};break;case o.a.TIMEOUT:e={reason:23,code:97,iabError:h.b.VAST_URL_UNAVAILABLE,message:"xhr timeout error"};break;default:case o.a.UNKNOWN:e={reason:23,code:98,iabError:h.b.VAST_URL_UNAVAILABLE,message:"xhr js exception"}}return e}(e):{reason:25,code:25,iabError:h.b.VAST_SCHEMA_VALIDATION_ERROR,message:e.message}:function(t){if(p.a.nullOrUndefined(t))return{reason:27,code:20,iabError:h.b.EMPTY_VAST_RESPONSE,message:"empty response"};if(!function(t){var e,n=null===(e=null==t?void 0:t.documentElement)||void 0===e?void 0:e.childNodes;if(p.a.nullOrUndefined(n))return!1;for(var r=0,i=n.length;r<i;r++)if("Ad"===n[r].nodeName)return!0;return!1}(t))return{reason:26,code:21,iabError:h.b.VAST_SCHEMA_VALIDATION_ERROR,message:"no <Ad> element"}}(t.vastResponseXML)}function C(t,e,n){if(!n||!n.ads||!n.ads.length)return{reason:27,code:20,iabError:h.b.VAST_SCHEMA_VALIDATION_ERROR,message:"empty response"};var i=n.ads[0];return i.creatives&&i.creatives.length?Object(s.c)("chooseAdCreative",{players:t,playerData:e},(function(){return function(t,e,n){for(var i,o=null,a=null,c=["",""],p=c[0],f=c[1],y="",b=0,g=n.creatives;b<g.length;b++){var E=g[b];if("linear"==E.type){var _=E;e.mediaFiles=_.mediaFiles;for(var T=0,I=_.mediaFiles;T<I.length;T++){var S=I[T],C=O(S.mimeType),P=C[0],L=C[1];switch(P){case"video":if(!w(t,S,L))continue;break;case"jsvpaid":e.hasJSVPAID=!0;break;default:continue}if(e.vastPreferType!=r.VIDEO_ONLY||"video"==P){if("video"==P){if("video"==p&&!R(a,f,S,L))continue}else if("video"==p)continue;p=(i=[P,_,S,L])[0],o=i[1],a=i[2],f=i[3]}}}else"companion"==E.type&&(y=D(t,E,y))}if(!a)return{reason:5,code:22,vastError:h.b.NO_SUPPORTED_MEDIA_FILE_FOUND,message:"no suitable media"};return Object(s.c)("chooseAdCreative",{players:t,playerData:e,log:!0},(function(){e.adParameters=o.adParameters,n.impressionURLTemplates&&(1!=n.impressionURLTemplates.length||n.impressionURLTemplates[0])||(n.impressionURLTemplates=[]),e.ad=n,e.creative=o,e.minBitrate=a.minBitrate,function(t){var e,n=t.ad.pricing;if(!n&&!t.parsedPrice)return;var r=t.takePriceFromNode?(null==n?void 0:n.value)||t.parsedPrice:t.floorPrice,i=parseFloat(r),o=(null==n?void 0:n.currency)||(null==t?void 0:t.parsedCurrency)||"USD";if(i>0&&Object(l.D)(t)){var a=(null==n?void 0:n.value)?"ad tag":"parsed price";"parsed price"===a&&u.a.remote("Ad has pricing info: ".concat(i," ").concat(o,". Source: ").concat(a),A(A({},Object(m.b)(t,{tagPrice:null===(e=null==t?void 0:t.apiImpressionData)||void 0===e?void 0:e.price,price:i})),{category:{main:v.a.MONETIZATION,sub:v.b.AD_RESPONSE}})),t.impressionData=A(A({},t.impressionData),{pricing:i,currency:o})}}(e),function(t){var e=t.ad.extensions;if(!e||0==e.length)return;for(var n=!1,r=0,i=e;r<i.length;r++){var o=i[r];if(o.attributes&&"CedatoParams"==o.attributes.type&&o.children)for(var a=0,s=o.children;a<s.length;a++){var c=s[a];if("Cookie"==c.name&&c.value&&!n){t.cookie=c.value;var u=c.attributes.price?+c.attributes.price:void 0;t.apiImpressionData=A(A(A({},c.attributes),{price:u}),t.apiImpressionData),t.impressionData=A(A(A({},t.impressionData),c.attributes),{pricing:u}),n=!0}}}}(e),e.adType="jsvpaid"==p?e.isVidible?"jsvidible":"jsvpaid":"video",e.mediaURL=a.fileURL,e.mediaURL.trim&&(e.mediaURL=e.mediaURL.trim()),e.companionHTML=y,d.b.emit(d.a.AD.XML_PARSED,{demand:e})}),(function(){return{reason:28,code:3,message:"js exception"}}))}(t,e,i)}),(function(){return{reason:28,code:3,vastError:h.b.UNDEFINED_ERROR,message:"js exception"}})):{reason:7,code:23,iabError:h.b.VAST_SCHEMA_VALIDATION_ERROR,message:"no valid creatives"}}function P(t){var e=t.mediaFiles;if(!e||!e.length)return null;for(var n=null,r="",i=0,o=e;i<o.length;i++){var a=o[i],s=O(a.mimeType),c=s[0],u=s[1];"video"===c&&w(f.b,a,u)&&(n&&!R(n,r,a,u)||(n=a,r=u))}return n||null}function w(t,e,n){if(t.usejsv){if(["webm","mp4","wmv","flv"].indexOf(n)<0)return!1;if(e.deliveryType&&"streaming"==e.deliveryType||Object(a.m)(e.fileURL)||e.fileURL.length<8)return!1}else try{if(!I.canPlayType(e.mimeType))return!1}catch(t){}return!0}function R(t,e,n,r){if("mp4"!==e&&"mp4"==r)return!0;if("mp4"!=r&&"mp4"==e)return!1;var i=!0;if(n.bitrate&&t.bitrate){if(i=!1,t.bitrate&&n.bitrate>t.bitrate)return!1;n.bitrate==t.bitrate&&(i=!0)}else if(t.width&&n.width){i=!1;var o=t.width*t.height,a=n.width*n.height;if(o&&a>o)return!1;a==o&&(i=!0)}return!i||!e||"mp4"!=e&&"webm"!=e&&("mp4"!=r||"ogg"!=e&&"3gp"!=e)}function D(t,e,n){for(var r=0,i=e.variations;r<i.length;r++){var o=i[r];o.width==t.width&&o.height==t.height&&("image/jpeg"==o.type||(n=o.htmlResource))}return n}function L(t,e,n){var r=null,i=n&&n.match(/^data:(.*?)(;base64)?,(.*)$/);if(e.vastXml)try{e.vastResponseXML=Object(o.e)(e.vastXml)}catch(t){r="Inline VAST failed: "+t.message}else if(i)try{var s=";base64"==i[2]?atob(i[3]):decodeURIComponent(i[3]);e.vastResponseXML=Object(o.e)(s)}catch(t){r="Inline VAST failed: "+t.message}else n&&-1!==n.indexOf("noad.xml")?r="No Ads expected":(n=Object(a.t)(t.protocol,n))||(r="Invalid VAST url");return{error:r,vastUrl:n}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r={code:202,message:"Media player expecting different duration."},i={code:401,message:"File not found. Unable to find Linear/MediaFile from URI."},o={code:900,message:"Undefined Error."},a={code:901,message:"General VPAID error."},s={code:101,message:"VAST schema validation error."},c={code:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the media player.)"},u={code:403,message:"Couldn’t find MediaFile that is supported by this media player, based on the attributes of the MediaFile element."},d={code:402,message:"Timeout of MediaFile URI."},l={code:405,message:"Problem displaying MediaFile. Media player found a MediaFile with supported type but couldn’t display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},p={code:303,message:"No ads VAST response after one or more Wrappers. Also includes number of empty VAST responses from fallback."},h=function(t){return{code:t.code,message:t.msg}};e.b={AD_DURATION_ERROR:r,MEDIA_FILE_NOT_FOUND:i,UNDEFINED_ERROR:o,GENERAL_VPAID_ERROR:a,VAST_SCHEMA_VALIDATION_ERROR:s,VAST_URL_UNAVAILABLE:c,NO_SUPPORTED_MEDIA_FILE_FOUND:u,MEDIA_FILE_URL_TIMEOUT:d,MEDIA_FILE_DISPLAY_ERROR:l,EMPTY_VAST_RESPONSE:p}},function(t,e,n){"use strict";n.d(e,"f",(function(){return ce})),n.d(e,"g",(function(){return ue})),n.d(e,"d",(function(){return de})),n.d(e,"e",(function(){return le})),n.d(e,"h",(function(){return pe})),n.d(e,"b",(function(){return fe})),n.d(e,"a",(function(){return ve})),n.d(e,"c",(function(){return Ae}));var r=n(33),i=n(49),o=n(12),a=n(38),s=n(17),c=n(59),u=n(20),d=n(13),l=n(48),p=n(16),h=n(8);function f(t,e,n){var r={category:"vpaidjs",event:"disappeared",error:"vpaidJS event called after destroy:"+n,url:e.mediaURL,vast:e.vastId};Object(u.c)(t,r,.01)}var v=n(22),m=n(58),A=n(4),y=n(65),b=n(5),g=n(10),E=n(39),_=n(79);function T(t,e){var n=function(t,e){var n=Object(E.b)(t),r={viewable:[],notviewable:[],viewundetermined:[]};return e.ad.viewableImpression.forEach((function(t){var e,i,o;(null===(e=null==t?void 0:t.viewable)||void 0===e?void 0:e.length)>0&&(r.viewable=t.viewable.map((function(t){return n(t)}))),(null===(i=null==t?void 0:t.notviewable)||void 0===i?void 0:i.length)>0&&(r.notviewable=t.notviewable.map((function(t){return n(t)}))),(null===(o=null==t?void 0:t.viewundetermined)||void 0===o?void 0:o.length)>0&&(r.viewundetermined=t.viewundetermined.map((function(t){return n(t)})))})),r}(t,e),r=function(t){return Object(g.l)(t)};if(_.a.isAvailable(window)){var i=new _.a(t.divElem);i.on((function(i){n[i].forEach(r),Object(h.b)(t,e,"viewable"===i?"viewable":"nonViewable")})),e.vastTracker.on("complete",(function(){i.off()}))}else n.viewundetermined.forEach(r)}var I=n(67),O=n(2);var S=function(){return O.b.isInView||O.b.reportViewability};function C(t,e){null==e.creative.trackingEvents&&(e.creative.trackingEvents=[]),e.vastTracker=new t.DMVAST.VASTTracker(t.DMVAST.client,e.ad,e.creative),function(t,e){var n,r;t.reportViewability&&(null===(r=null===(n=e.ad)||void 0===n?void 0:n.viewableImpression)||void 0===r?void 0:r.length)>0&&T(t,e)}(t,e),function(t){!t.durationKnown&&t.vastTracker.duration&&t.vastTracker.duration>0&&(t.duration=t.vastTracker.duration);t.vastTracker.duration=t.duration,t.vastTracker.setDuration(t.duration)}(e),e.vastTracker.playerId=t.playerId,e.vastTracker.subid=t.subid,e.vastTracker.domain=t.domain,e.vastTracker.vastId=e.vastId,e.vastTracker.on("clickthrough",(function(t){e.adClickUrl=t})),function(t){var e=function(t){var e,n;return(null===(n=null===(e=t.ad)||void 0===e?void 0:e.adVerifications)||void 0===n?void 0:n.filter((function(t){return"omid"===t.apiFramework&&!!t.resource})))||[]}(t);(null==e?void 0:e.length)&&I.c.loadOmidScript(O.b).then((function(){var n=new I.c(O.b,e,t.adContainer,t.duration);n.startAdSession(t),t.vastTracker.on("start",(function(){if(S()){var e=O.b.muted?0:O.b.volume,r=t.vastTracker.duration;"number"==typeof r&&n.mediaEvents.start(r,e)}})),t.vastTracker.on("firstQuartile",(function(){return S()&&n.videoDidCrossQuartile(1)})),t.vastTracker.on("midpoint",(function(){return S()&&n.videoDidCrossQuartile(2)})),t.vastTracker.on("thirdQuartile",(function(){return S()&&n.videoDidCrossQuartile(3)})),t.vastTracker.on("pause",(function(){S()&&n.mediaEvents.pause()})),t.vastTracker.on("resume",(function(){S()&&n.mediaEvents.resume()})),t.vastTracker.on("skip",(function(){S()&&(n.mediaEvents.skipped(),n.endAdSession())})),t.vastTracker.on("complete",(function(){S()&&(n.videoDidCrossQuartile(4),n.endAdSession())}))}))}(e),t.skipConfig.enabled&&t.skipConfig.offset&&(e.vastTracker.skipDelay=t.skipConfig.offset)}var P=n(0),w=n(1),R=n(14),D=n(73),L=function(){return(L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function N(t,e){e.adStartCount++,t.beingVpaid&&Object(p.a)(t,"jsAdStarted",{}),e.viewableOnStart&&ue(t,e)}function k(t,e){if(e.gotAdImpression)return!0;if(P.b.emit("ad.skippableStateChanged",{skippable:!1}),e.skipVastTracker||(C(t,e),function(t){var e;null===(e=t.vastTracker)||void 0===e||e.trackImpression()}(e)),function(t,e){if(t.info.mobile){var n={category:"jsv",event:"impression",usejsv:t.usejsv,label:e};Object(u.c)(t,n,.005)}}(t,e.adType),e.state==A.a.Finished)return!1;if(t.paused&&!t.allowPausedImpressions)return pe(t,e),Object(d.h)(t,e.vastId,61,"impression on paused",null,e),Object(o.b)(t,e,4,{code:61,message:"impression on paused"}),!1;t.anyPlaying=!0,e.state=A.a.Playing,e.gotAdImpression=!0,e.triggerAdPlayingCallback(),ue(t,e),e.initNonLinearCompleter(),e.viewabilityTimer.start().then((function(){t.serverEvents.demandEvent(e,L(L({name:"AdProgress"},Object(m.c)(t)),{progress:0,duration:2,durationDelta:0}))})).catch((function(){}));var n=e.utag,r=n&&!t.usableTagsSent[n]?(t.usableTagsSent[n]=!0,{utag:n}):{},i=Object(m.c)(t);setTimeout((function(){t.eventDispatcher.sendAdImpressionEvent(e,t),t.serverEvents.demandTimedEvent(e,L(L(L({name:"AdImpression"},Object(m.c)(t)),e.impressionData),r))}),t.adViewabilityDelay),function(t,e){var n=((new Date).getTime()-e.startAdTime)/1e3;Object(l.b)(t,u.a.E_ADSTART,e,L({time:n.toFixed(1),gpvOrdNo:e.uniqId,retryTestGroup:t.retryTestGroup,widthDetected:t.widthDetected,heightDetected:t.heightDetected,vastType:Object(l.f)(e),actualVastType:Object(l.e)(e)},e.impressionData))}(t,e);var a=function(t,e){return e.impDetail?L({},e.impressionData&&L(L(L(L({price:e.impressionData.pricing||e.apiImpressionData.price,currency:e.impressionData.currency||e.apiImpressionData.currency,bidder:null==e?void 0:e.bidder,publisherDemand:null==e?void 0:e.isPubDemand,adType:e.originalType||e.type},t.sessionConfig),{eids:t.eids}),Object(b.g)({demandId:e.demandId})),{adDuration:e.duration,title:e.title,transactionId:e.transactionId,vastId:e.vastId})):null}(t,e);a.viewability=i;try{P.b.emit(P.a.AD.IMPRESSION,Ae(e)),t.emit(s.a.AD_STARTED,{apiImpressionData:a,playerData:e})}catch(t){w.a.error("ad.started emit failed",t)}!function(t,e){try{Object(y.e)(t,e)}catch(t){w.a.error("send iiq pixel failed",t)}}(t,a);try{Object(c.b)(t,e,"adstart")}catch(t){w.a.error("trigger beacon failed",t)}if(Object(D.e)(t))try{t.sendPixel(Object(D.d)(t,a))}catch(t){w.a.error("send white ops pixel failed",t)}if(!e.skipVastTracker)try{e.vastTracker.load()}catch(t){w.a.error("load vast tracker failed",t)}if(t.beingVpaid)try{Object(p.a)(t,"jsAdImpression",{})}catch(t){w.a.error("calling vpaid impression event failed",t)}t.curAdStarts++,e.curAdStarts++;var f=t.rollAdStarts||t.maxAdStarts;if(f&&t.curAdStarts>=f)try{Object(o.c)(t,e)}catch(t){w.a.error("freeze players failed",t)}try{!function(t,e){if(e.keepAlive){var n=null,r=0,i=function(){e.keepAliveTimer.start().then((function(){var a=e.getAdRemainingTime();null!=n&&a==n||(n=a,r=Date.now()),Date.now()-r>=1e3*e.keepAlive?(pe(t,e),Object(o.b)(t,e,30,{code:62,message:"Time stuck on state ".concat(A.a[e.state])})):i()})).catch((function(){}))};i()}}(t,e)}catch(t){w.a.error("keep alive failed",t)}if(e.allowLongImpressions||e.flowTimeout.Seconds(e.timers.longImpression).start((function(){Object(d.h)(t,e.vastId,60,"long impression",null,e),Object(v.c)("longImpression",{players:t,log:!0},(function(){Object(o.b)(t,e,3,{code:60,iabError:R.b.AD_DURATION_ERROR,message:"Ad duration is bigger than ".concat(e.timers.longImpression," seconds")}),t.beingVpaid&&Object(p.a)(t,"jsAdSkipped",{})}))})).catch((function(){})),t.paused&&!e.isPaused)try{Object(h.c)(t,e)}catch(t){w.a.error("pause player data failed",t)}return!0}var j=n(30),x=n(7),U=n(68);function M(t,e,n){e.duration=n,e.initNonLinearCompleter(),e.durationKnown=!0,e.vastTracker&&(e.vastTracker.duration=e.duration,e.vastTracker.setDuration(e.duration)),P.b.emit(P.a.INTERNAL.AD.TIME_UPDATE,{demand:e}),x.a==e&&(Object(h.b)(t,e,"player.durationChange"),t.beingVpaid&&(Object(p.a)(t,"jsAdDurationChange",{duration:n}),Object(p.a)(t,"jsAdRemainingTimeChange",{remainingTime:n})))}function V(t,e,n){e.nonLinearCompleteTimer.cancel(),e.nonLinearCompleteTimer=j.a.Seconds(n),e.nonLinearCompleteTimer.start().then((function(){e.state==A.a.Playing&&at(t,e)})).catch((function(){}))}function F(t,e){var n;t.serverEvents.demandEvent(e,{name:"initAd"}),e.flowTimeout.Seconds(e.timers.loadAd).start().then((function(){Object(d.h)(t,e.vastId,31,"Failed to play video ad",null,e,!1),Object(o.b)(t,e,31,{code:31,iabError:R.b.GENERAL_VPAID_ERROR,message:"VPaid loadAd operation reached a timeout of ".concat(e.timers.loadAd," seconds")})})).catch((function(){}));try{e.state=A.a.Initing,n=e.initAd()}catch(t){n=t.message}n&&(Object(d.h)(t,e.vastId,32,n,null,e,!1,!0),Object(o.b)(t,e,16,{code:32,iabError:R.b.GENERAL_VPAID_ERROR,message:n}))}function B(t,e){e.flowTimeout.Seconds(e.timers.startAd).start().then((function(){pe(t,e),Object(d.h)(t,e.vastId,41,"",null,e,!1),Object(o.b)(t,e,18,{code:41,iabError:R.b.GENERAL_VPAID_ERROR,message:"startAd operation reached a timeout of ".concat(e.timers.startAd," seconds")})})).catch((function(){}))}function q(t,e){e.firedEvents.AdLoaded||(e.firedEvents.AdLoaded=!0,null!=e.requeryTimeout&&(clearTimeout(e.requeryTimeout),e.requeryTimeout=null),e.state<A.a.Loading||e.state==A.a.Error||e.state>A.a.Initing&&e.state<A.a.Error||(e.flowTimeout.cancel(),e.state=t.intent?A.a.Pending:A.a.Ready,e.priorityTieBreaker++,t.serverEvents.demandTimedEvent(e,{name:"AdLoaded"}),Object(l.c)(t,e),Object(h.b)(t,e,"ad.loaded",t.mediaPreview?{mediaUrl:e.vpaidJsIframeVideo&&e.vpaidJsIframeVideo.src||""}:null),t.beingVpaid&&Object(p.a)(t,"jsAdReadyToStart",{}),e.fetchAdditionalCreativeInfo?Object(U.b)(e).then((function(){P.b.emit(P.a.INTERNAL.AD.LOADED,{ad:e})})):P.b.emit(P.a.INTERNAL.AD.LOADED,{ad:e})))}function G(t,e,n){var r=n.errorMsg,i=n.dynamicIABError,a=void 0===i?R.b.GENERAL_VPAID_ERROR:i;if(e.firedEvents.AdError=!0,!(e.state<=A.a.Loading&&"jsima"!=e.adType||e.state==A.a.Finished)){var s=function(t){var e=d.c.VPAID_UNKNOWN_ERROR,n="";try{n=t.toLowerCase()}catch(t){}-1==n.indexOf("timeout")&&-1==n.indexOf("timed out")||(e=d.c.VPAID_TIMEOUT);-1==n.indexOf("empty")&&-1==n.indexOf("3403")||(e=d.c.VPAID_EMPTY_VAST);-1!=n.indexOf("domain")&&-1!=n.indexOf("block")&&(e=d.c.VPAID_EMPTY_BLOCKED_DOMAIN);-1==n.indexOf("no ad")&&-1==n.indexOf("there was an error parsing the ad tag response - null, errno: 0")||(e=d.c.VPAID_NO_AVAILABLE_ADS);-1==n.indexOf("but the server returned a vast error")&&-1==n.indexOf("failed to parse liverail xml response")&&-1==n.indexOf("unknown liverail xml response type")||(e=d.c.VPAID_VAST_ERROR);-1==n.indexOf("security error")&&-1==n.indexOf("2048")||(e=d.c.VPAID_SECURITY_ERROR);-1==n.indexOf("2032")&&-1==n.indexOf("9408")&&-1==n.indexOf("error loading asset : ioerror")||(e=d.c.VPAID_STREAM_ERROR);-1!=n.indexOf("1903")&&(e=d.c.VPAID_START_TIMEOUTED);-1!=n.indexOf("1902")&&(e=d.c.VPAID_INTERNAL_VPAID_ERROR);-1!=n.indexOf("volume violation")&&(e=d.c.VPAID_VOLUME_VIOLATION);-1!=n.indexOf("non linear ads")&&(e=d.c.VPAID_IMA_NON_LINEAR);-1!=n.indexOf("adstart exception")&&(e=d.c.VPAID_INNER_VPW_EXCEPTION);return e}(r);Object(h.b)(t,e,"aderror"),Object(h.b)(t,e,"ad.error"),e.state>=A.a.Started&&e.flowTimeout.cancel();var c,u=!1;e.state==A.a.Initing&&(u=!0),Object(d.h)(t,e.vastId,10,r,null,e,!1,u,null),c=e.state>A.a.Initing?20:e.state>A.a.Fetched?19:27,Object(o.b)(t,e,c,{code:10,iabError:a,message:r,vpaidError:s})}}function H(t,e){if(!e.firedEvents.AdImpression&&!e.firedEvents.AdStarted){if(e.firedEvents.AdLoaded||q(t,e),e.firedEvents.AdStarted=!0,e.state<A.a.Started||e.state>A.a.Playing)return Object(d.h)(t,e.vastId,110,"unrequested start on state ".concat(A.a[e.state]),null,e,!1,!0),pe(t,e),void Object(o.b)(t,e,12,{code:110,iabError:R.b.GENERAL_VPAID_ERROR,message:"unrequested start on state ".concat(A.a[e.state])});N(t,e),e.firedEvents.AdImpression||e.impressionAfterStartTimeout.start().then((function(){Object(l.b)(t,u.a.E_ADSTART_WO_IMPRESSION,e,{}),e.viewableOnStart&&de(e)})).catch((function(){}))}}function W(t,e){if(!e.firedEvents.AdImpression&&(e.firedEvents.AdStarted||H(t,e),!(e.state<A.a.Started||e.state>A.a.Playing)&&(e.firedEvents.AdImpression=!0,e.flowTimeout.cancel(),e.impressionAfterStartTimeout.cancel(),e.errorCount=0,!e.impressionOnlyWithVideoStart||e.firedEvents.AdVideoStart)))return t.paused&&!e.viewable?(e.firedEvents.AdImpression=!1,void Object(h.c)(t,e)):void k(t,e)}function Y(t,e){e.firedEvents.AdVideoStart||(e.firedEvents.AdVideoStart=!0,t.beingVpaid&&Object(p.a)(t,"jsAdVideoStart",{}),e.impressionOnlyWithVideoStart&&e.firedEvents.AdImpression&&k(t,e))}function J(t,e){e.firedEvents.AdStarted&&!e.firedEvents.AdImpression||e.onQuartile(d.b.FIRST)}function z(t,e){e.firedEvents.AdStarted&&!e.firedEvents.AdImpression||e.onQuartile(d.b.MIDPOINT)}function K(t,e){e.firedEvents.AdStarted&&!e.firedEvents.AdImpression||e.onQuartile(d.b.THIRD)}function X(t,e){e.firedEvents.AdImpression&&(e.state!=A.a.Playing&&e.state!=A.a.Finished||(e.onComplete(),e.callPauseTimer.cancel(),Object(o.b)(t,e,1)))}function Q(t,e){e.firedEvents.AdStopped=!0,e.state==A.a.Playing&&X(t,e)}function Z(t,e,n){ve(t,e,n.url,!1===n.playerHandles)}function $(t,e,n){var r=n.t;null!=r&&M(t,e,r)}function tt(t,e,n){var r=n.t;null!=r&&(e.lastRemainingTime&&e.lastRemainingTime<r&&e.nonLinearCompleteTimer.cancel(),e.lastRemainingTime=r,!e.durationKnown||e.state<A.a.Playing?M(t,e,r):(!e.skipVastTracker&&e.vastTracker&&e.vastTracker.setProgress(e.duration-r),t.beingVpaid&&Object(p.a)(t,"jsAdRemainingTimeChange",{remainingTime:r})))}function et(t,e){e.state==A.a.Playing&&(Object(h.h)(t,e),t.beingVpaid&&Object(p.a)(t,"jsAdPaused",{}))}function nt(t,e){e.firedEvents.AdImpression||W(t,e),e.state==A.a.Playing&&(t.paused?Object(h.g)(t,e):(Object(h.i)(t,e),t.beingVpaid&&Object(p.a)(t,"jsAdPlaying",{})))}function rt(t,e){var n=e.getAdVolume();if(n){var r=n.volume,i=n.muted;e.viewableForSeconds()<1||Object(h.j)(t,r,i,e)}}function it(t,e){e.onSkip()}function ot(t,e){e.state==A.a.Playing&&e.setSkippableState()}function at(t,e){e.firedEvents.AdStarted&&!e.firedEvents.AdImpression||e.state!=A.a.Playing&&e.state!=A.a.Finished||(t.beingVpaid&&Object(p.a)(t,"jsAdUserClose",{}),e.callPauseTimer.cancel(),Object(o.b)(t,e,1))}var st,ct=n(86),ut=n(37),dt=n(9),lt=n(74),pt=n(21),ht=Date.now(),ft={aconp:{required:!1,values:[2,1]},ad_rule:{required:!1,getter:function(t){return t.values[0]},values:[0,1]},ad_type:{required:!0,override:!0,getter:function(t){var e=t.values;return"audio_video"===t.current.get("ad_type")?e[1]:""},values:["audio","video","audio_video","skippablevideo","standardvideo"]},addtl_consent:{required:!1},afvsz:{required:!1,values:["200x200","250x250","300x250","336x280","450x50","468x60","480x90","729x90"]},allcues:{required:!1},ciu_szs:{required:!1},cmsid:{required:!1},vid:{required:!1},correlator:{required:!0,getter:function(){return ht},override:!0},cust_params:{required:!1},description_url:{required:!0,getter:function(){return window.location.href}},env:{required:!0,getter:function(t){return t.values[1]},values:["instream","vp"]},excl_cat:{required:!1},gdfp_req:{required:!0,getter:function(t){return t.values[0]},values:[1]},gdpr:{required:!0,getter:function(t){var e,n,r=!!(null===(n=null===(e=t.players.consentListener.getAvailableConsents()[pt.a.TCF])||void 0===e?void 0:e.apiResponse)||void 0===n?void 0:n.gdprApplies);return Number(r)||""},values:[0,1]},gdpr_consent:{required:!0,getter:function(t){var e;return(null===(e=t.players.consentListener.getAvailableConsents()[pt.a.TCF])||void 0===e?void 0:e.consentString)||""}},hl:{required:!0,getter:function(){return"en"}},iabexcl:{required:!1},ipd:{required:!1},ipe:{required:!1},iu:{required:!0},lip:{required:!1},ltd:{required:!1},min_ad_duration:{required:!1},max_ad_duration:{required:!1},mridx:{required:!1},msid:{required:!1},an:{required:!1},nofb:{required:!1},npa:{required:!1},omid_p:{required:!0,getter:function(t){var e=t.imaVersion;return"Google1/h.".concat(e)}},output:{required:!0,override:!0,getter:function(t){return t.values[1]},values:["vast","xml_vast4","vmap","xml_vmap1","xml_vmap1_vast4"]},plcmt:{required:!0,getter:function(t){return t.values[0]},values:[1,2]},pmad:{required:!1},pmnd:{required:!1},pmxd:{required:!1},pod:{required:!1},pp:{required:!1},ppt:{required:!1},ppid:{required:!1},ppos:{required:!1},ppsj:{required:!1},ptpl:{required:!1},ptpln:{required:!1},pubf:{required:!1},pvtf:{required:!1},pvid:{required:!1},pvid_s:{required:!1},rdid:{required:!1},idtype:{required:!1},is_lat:{required:!1},rdp:{required:!1},scor:{required:!0,getter:function(t){var e=t.players;return ht+e.auctionId+1}},sdk_apis:{required:!0,getter:function(){return"2,7,8"}},sdmax:{required:!1},sid:{required:!0,getter:function(t){return t.players.pageLoadUid}},ssss:{required:!1},sz:{required:!0,getter:function(t){return t.values.join("|")},values:["640x480","640x360"]},tfcd:{required:!1},trt:{required:!1,values:[1,2]},unviewed_position_start:{required:!0,getter:function(){return 1}},url:{required:!0,getter:function(){return window.location.href}},vad_type:{required:!1,values:["linear","nonlinear"]},vid_d:{required:!1},vconp:{required:!1,values:[2,1]},vpa:{required:!0,getter:function(t){return t.players.clickToPlay?"click":"auto"},values:["auto","click"]},vpi:{required:!1,values:[1,0]},vpmute:{required:!0,getter:function(t){return t.players.muted?1:0},values:[1,0]},vpos:{required:!1,values:["preroll","midroll","postroll"]},wta:{required:!1,values:[1,0]},ctv:{required:!0,getter:function(){return 0}},is_amp:{required:!0,getter:function(t){var e=t.players;return Number(e.isAmp)}},sdkv:{required:!0,getter:function(t){var e=t.imaVersion;return"h.".concat(e)}},impl:{required:!0,override:!0,getter:function(){return"remove"}},cookie:{required:!0,getter:function(){return lt.a.get("__gads")}},gpic:{required:!0,getter:function(){return lt.a.get("__gpi")}},eo_id_str:{required:!0,getter:function(){return lt.a.get("__eoi")}}},vt=Object.keys(ft),mt=function(t){var e=vt.filter((function(t){return ft[t].required})),n=new URL(t).searchParams;return e.filter((function(t){return!n.has(t)||ft[t].override}))},At=function(t,e,n){void 0===n&&(n="3.631.0");var r=mt(e),i=new URL(e);return r.forEach((function(e){var r=ft[e],o=r.getter,a=r.values;if(o){var s=o({players:t,values:a,current:i.searchParams,imaVersion:n});"remove"===s?i.searchParams.delete(e):void 0!==s&&""!==s&&i.searchParams.set(e,s)}})),i.toString()},yt=n(44),bt=(st=function(t,e){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}st(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),gt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Et=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function _t(t,e){var n,r=e.filter((function(e){return+e.k>=t}));return(n=r.length?r[0]:e[e.length-1])||(n=e[0]),n}var Tt=function(t){function e(e){var n=t.call(this,e)||this;return n.forceVolume=!1,n}return bt(e,t),e.prototype.bindListenners=function(){this.onVideoElementChanged=this.onVideoElementChanged.bind(this),this.onAdsManagerLoaded=this.onAdsManagerLoaded.bind(this),this.onAdError=this.onAdError.bind(this),this.onAdEvent=this.onAdEvent.bind(this),this.onAdUserEvent=this.onAdUserEvent.bind(this),this.onAdProgressEvent=this.onAdProgressEvent.bind(this),this.adBreakReadyHandler=this.adBreakReadyHandler.bind(this)},e.prototype.fetchAdUrl=function(t,e){var n=this;Object(ct.c)(O.b),this.bindListenners(),this._ref=Object(ct.b)(),this.uniqueId=Date.now()+this.vastId+Math.round(1e4*Math.random()),this._fetchAdUrlCallback=e,this.state=A.a.Fetching,this.skipVastTracker=!0,this.vastPreferType!=d.i.VIDEO_ONLY?le(O.b,this,{ignoreAdContainer:!0}).then((function(){n._ref.loaded.then((function(){n.adDisplayContainer=n._ref.createAdContainer(),n.adsLoader=n._ref.createLoader(),n.adContainer=n._ref.container,n.init(),n.requestAd()}))})):(Object(d.h)(O.b,this.vastId,22,"no suitable media: "+this.adType,null,this,!1,!0),Object(o.b)(O.b,this,5,{code:22,iabError:R.b.NO_SUPPORTED_MEDIA_FILE_FOUND,message:"no suitable media: "+this.adType}))},e.prototype.mapIMAErrorToVastError=function(t){void 0===t&&(t={});var e=t.code,n=t.msg;return e?Object(R.a)({code:e,msg:n}):R.b.GENERAL_VPAID_ERROR},e.prototype.buildIMAErrorMessage=function(t,e){var n=(null==e?void 0:e.msg)||"Error message not available";if(null==e?void 0:e.innerError){var r=e.innerError,i=r.errorMsg,o=r.actualErrorMsg,a=r.iabErrorCode;n="".concat(i,", ").concat(o,". IAB code: ").concat(a)}return"IMA ".concat(t," - ").concat(n,". VAST Error code: ").concat((null==e?void 0:e.vastErrorCode)||(null==e?void 0:e.code)||"N/A")},e.prototype.emitEvent=function(t,e){var n=this;switch(t){case this.AdsManagerLoadedEvent:case this.AdErrorLoadedEvent:this.flowTimeout.cancel(),this.onAdsRequested(e),this.isAdsRequested=!0;break;case this.AdErrorEvent:case this.AdPlayErrorEvent:G(O.b,this,{dynamicIABError:this.mapIMAErrorToVastError({code:null==e?void 0:e.vastErrorCode,msg:null==e?void 0:e.msg}),errorMsg:this.buildIMAErrorMessage(t,e)});break;case this.AdEvent.AD_BREAK_READY:case this.AdEvent.AD_METADATA:case this.AdEvent.ALL_ADS_COMPLETED:break;case this.AdEvent.CLICK:Z(O.b,this,{url:null,id:null,playerHandles:!1});break;case this.AdEvent.AD_PROGRESS:P.b.emit(P.a.INTERNAL.AD.TIME_UPDATE,{demand:this});break;case this.AdEvent.DURATION_CHANGE:$(O.b,this,{t:e.ad&&e.ad.getDuration()||null});break;case this.AdEvent.STARTED:H(O.b,this);break;case this.AdEvent.IMPRESSION:W(O.b,this);break;case this.AdEvent.FIRST_QUARTILE:J(O.b,this);break;case this.AdEvent.MIDPOINT:z(O.b,this);break;case this.AdEvent.THIRD_QUARTILE:K(O.b,this);break;case this.AdEvent.COMPLETE:this.adsLoader.contentComplete(),setTimeout((function(){return X(O.b,n)}),50);break;case this.AdEvent.LOADED:e&&e.ad&&this.initLoadedAd(e.ad),q(O.b,this);break;case this.AdEvent.LINEAR_CHANGED:e&&e.ad&&this.initLoadedAd(e.ad),this.isNonLinear()||this.nonLinearCompleteTimer.cancel();break;case this.AdEvent.LOG:case this.AdEvent.CONTENT_PAUSE_REQUESTED:break;case this.AdEvent.CONTENT_RESUME_REQUESTED:this.progress&&0!==this.progress.time&&this.clearSDK();break;case this.AdEvent.SKIPPED:it(O.b,this);break;case this.AdEvent.USER_CLOSE:at(O.b,this);break;case this.AdEvent.VOLUME_CHANGED:rt(O.b,this);break;case this.AdEvent.VOLUME_MUTED:break;case this.AdEvent.PAUSED:et(O.b,this);break;case this.AdEvent.RESUMED:nt(O.b,this);break;case this.AdEvent.VAST_LOAD_TIMEOUT:}},e.prototype.init=function(){var t;O.b.content instanceof ut.a?this.contentVideoElement=O.b.content.getHTMLVideoElement()||this.videoElement:this.contentVideoElement=this.videoElement,Object(r.c)(this.contentVideoElement)&&(this.contentVideoElement=Object(r.a)(O.b)),(null===(t=O.b.hlsConfig)||void 0===t?void 0:t.preload)&&P.b.on(P.a.INTERNAL.CONTENT.VIDEO_ELEMENT_CHANGED,this.onVideoElementChanged),this.AdEvent=google.ima.AdEvent.Type,this.AdErrorCode=google.ima.AdError.ErrorCode,this.AdsManagerLoadedEvent=google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.AdErrorLoadedEvent=google.ima.AdError.Type.AD_LOAD,this.AdErrorEvent=google.ima.AdErrorEvent.Type.AD_ERROR,this.AdPlayErrorEvent=google.ima.AdError.Type.AD_PLAY,this.isStarted=!1,this.isAdsRequested=!1,this.width=O.b.width,this.height=O.b.height,P.b.on(P.a.INTERNAL.GOOGLE_IMA.AD_ERROR,this.onAdError),P.b.on(P.a.INTERNAL.GOOGLE_IMA.ADS_MANAGER_LOADED,this.onAdsManagerLoaded)},e.prototype.getCustomParams=function(t){return t.map((function(t){return"".concat(t.key,"=").concat(t.value)})).join("&")},e.prototype.getTargetings=function(){var t=[],e=O.b.priceTables;if(Object(b.q)(O.b,this)){var n=Object(b.n)(this),r=n?e.exco:e.publisher,i=_t(this.floorPrice,r),o=this.floorPrice;this.floorPrice=+i.k,(n||Object(b.s)(this))&&this.setCPM(this.floorPrice),w.a.log("GAM price targeting: key for ".concat(this.vastId,": ").concat(i.k," value: ").concat(i.v,", floorPrice: ").concat(o," -> ").concat(this.floorPrice)),t.push({key:this.keyValueParamName,value:i.v})}return t},e.prototype.addCustomParam=function(t,e){try{var n="cust_params",r=new URL(t),i=new URLSearchParams(r.search),o=i.get(n);return Object(yt.c)(O.b)&&o&&(o.includes("videostart")&&(o=o.replace(/videostart=[^&]*/g,"videostart=".concat(1===O.b.adSlotImpressionCount?"auto-firstplus1":"auto-first"))),O.b.googleCustomParamsForReport=o),o?(i.delete(n),i.set(n,"".concat(o,"&").concat(e))):i.set(n,e),r.search="?".concat(i),r.toString()}catch(n){w.a.error("Error adding custom param to URL",n,{url:t,param:e})}return t},e.prototype.addTargeting=function(t){var e=this.getTargetings();return e.length?this.addCustomParam(t,this.getCustomParams(e)):t},e.prototype._preFetchVastUrl=function(t){return gt(this,void 0,void 0,(function(){var e=this;return Et(this,(function(n){return[2,new Promise((function(n){return gt(e,void 0,void 0,(function(){var e,r,i,o,a,s;return Et(this,(function(c){switch(c.label){case 0:if(!this.isPlaylist)return[2,n(t)];e=t,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(At(O.b,t,null===(s=null===google||void 0===google?void 0:google.ima)||void 0===s?void 0:s.VERSION))];case 2:return[4,c.sent().text()];case 3:return r=c.sent(),i=new DOMParser,o=i.parseFromString(r,"application/xml"),(a=o.querySelector("Ad"))&&a.textContent&&(e=a.textContent.trim()),[3,5];case 4:return c.sent(),[3,5];case 5:return n(e),[2]}}))}))}))]}))}))},e.prototype.requestAd=function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.contentComplete(),O.b.serverEvents.demandEvent(this,{name:"requestAds"}),this.adsRequest=new google.ima.AdsRequest;var t=Object(dt.o)(this.mediaURL,["description_url","url"]),e=t.description_url,n=t.url,r={url:Object(dt.f)(n||window.location.href)};e&&(r.description_url=Object(dt.f)(e)),this.adsRequest.adTagUrl=this.addTargeting(Object(dt.q)(this.mediaURL,r)),this.adsRequest.linearAdSlotWidth=this.width,this.adsRequest.linearAdSlotHeight=this.height,this.adsRequest.forceNonLinearFullSlot=!0,this.adsLoader.requestAds(this.adsRequest,{id:this.uniqueId,element:this.contentVideoElement})},e.prototype.getSuggestedDuration=function(){if(this.ad){var t=this.ad.getDuration();return t<=0&&(t=this.ad.getMinSuggestedDuration()),t<=0&&(t=this.suggestedDuration),t}},e.prototype.getSuggestedRemainingTime=function(){var t=this.getAdRemainingTime();return null==t&&(t=this.duration-(Date.now()-this.nonLinearCompleteTimer.startedAt)/1e3),t>=0?t:0},e.prototype.getAdRemainingTime=function(){if(!this.adsManager)return null;var t=this.adsManager.getRemainingTime();return t<0?null:t},e.prototype.initLoadedAd=function(t){this.ad=t,this.duration=this.getSuggestedDuration(),this.durationKnown=!0,this.googleSkip=t.isSkippable(),this.advertiserDomains=[null==t?void 0:t.getAdvertiserName()],P.b.emit(P.a.INTERNAL.AD.IMA_AD_LOADED,this)},e.prototype.initNonLinearCompleter=function(){this.isNonLinear()&&V(O.b,this,this.duration)},e.prototype.getAdSkippableState=function(){return!this.mediaURL.includes("skippable")&&t.prototype.getAdSkippableState.call(this)},e.prototype.unlockAdSlot=function(){!this.unlocked&&this.adDisplayContainer&&this.state<A.a.Started&&(this.adDisplayContainer.initialize(),this.unlocked=!0)},e.prototype.onAdsRequested=function(t){this.onAdResponse()&&(t?(-1==[this.AdErrorCode.VAST_EMPTY_RESPONSE,this.AdErrorCode.VAST_ASSET_NOT_FOUND,this.AdErrorCode.VAST_NO_ADS_AFTER_WRAPPER,this.AdErrorCode.UNKNOWN_AD_RESPONSE].indexOf(t.code)&&(this.state=A.a.Started),this.emitEvent(this.AdErrorEvent,t)):(O.b.serverEvents.demandTimedEvent(this,{name:"AdsRequested",retryCount:this.retryCount}),this._fetchAdUrlCallback(O.b,this)))},e.prototype.onVideoElementChanged=function(t){var e=t.video;this.contentVideoElement=e},e.prototype.clearAd=function(){this.lastError=null,P.b.off(P.a.INTERNAL.CONTENT.VIDEO_ELEMENT_CHANGED,this.onVideoElementChanged);try{this.clearSDK()}catch(t){}},e.prototype.destroy=function(){this.lastError=null,P.b.off(P.a.INTERNAL.CONTENT.VIDEO_ELEMENT_CHANGED,this.onVideoElementChanged);try{this.clearSDK()}catch(t){}},e.prototype.clearSDK=function(){try{P.b.off(P.a.INTERNAL.GOOGLE_IMA.ADS_MANAGER_LOADED,this.onAdsManagerLoaded),P.b.off(P.a.INTERNAL.GOOGLE_IMA.AD_ERROR,this.onAdError),this.adsManager&&this.adsManager.destroy()}catch(t){}},e.prototype.initMedia=function(){var e=this;return t.prototype.initMedia.call(this).then((function(){F(O.b,e)}))},e.prototype.initAd=function(){var t=this;this.transferError((function(){t.adsManager.init(t.width,t.height,google.ima.ViewMode.NORMAL)}))},e.prototype.hideAd=function(){(null===x.a||void 0===x.a?void 0:x.a.uniqId)===this.uniqId&&t.prototype.hideAd.call(this)},e.prototype.startAd=function(){var t,e=this;this.isStarted||(this.forceVolume=!0,this.syncVolume(),this.adsManager&&this.adsManager.start&&(this.transferError((function(){e.adsManager.start()})),this.sureFastStart=null===(t=this.expectedSureFastStart)||void 0===t||t,B(O.b,this),this.isStarted=!0))},e.prototype.stopAd=function(){var t=this;this.adsManager&&this.adsManager.stop&&this.transferError((function(){return t.adsManager.stop()}))},e.prototype.destroyAd=function(){this.destroy()},e.prototype.resizeAd=function(t,e){var n=this;this.width===t&&this.height===e||(this.width=t,this.height=e,this.adsManager&&this.adsManager.resize&&this.transferError((function(){return n.adsManager.resize(t,e,google.ima.ViewMode.NORMAL)})))},e.prototype.setAdVolume=function(t,e,n){var r=this;this.adsManager&&(this.muted==e&&this.viewable||(this.muted=e,t=e?0:t,(this.forceVolume&&!n||this.adsManager.getVolume()!=t)&&(this.transferError((function(){return r.adsManager.setVolume(t)})),this.forceVolume=!1)))},e.prototype.getAdVolume=function(){return this.adsManager&&{volume:this.adsManager.getVolume()}},e.prototype.isNonLinear=function(){return!!this.ad&&!this.ad.isLinear()},e.prototype.showControlBar=function(){return null!=this.controlBar&&this.controlBar},e.prototype.showAdUI=function(){return null!=this.enableAdUI&&this.enableAdUI},e.prototype.getClickText=function(){return O.b.info.mobile?null:this.clickTextEnabled?this.clickText||"Learn More":null},e.prototype.getProgress=function(){if(this.ad){var t=this.getSuggestedDuration(),e=Math.ceil(t-this.getSuggestedRemainingTime());return{time:e=e>0?e:0,duration:t}}return null},e.prototype.pauseAd=function(){var t=this;this.transferError((function(){t.adsManager.pause()}))},e.prototype.resumeAd=function(){var t=this;this.transferError((function(){t.adsManager.resume()}))},e.prototype.skipAd=function(){var t=this;this.getAdSkippableState()?(this.adsManager.skip(),this.failSkipTimer.start().then((function(){t.onSkip()})).catch((function(){}))):this.onSkip()},e.prototype.getAdId=function(){var t,e;return this.ad&&((null===(t=this.ad.data)||void 0===t?void 0:t.adId)||(null===(e=this.ad)||void 0===e?void 0:e.adId))||null},e.prototype.getCreativeId=function(){var t,e;return this.ad&&((null===(t=this.ad.data)||void 0===t?void 0:t.creativeId)||(null===(e=this.ad)||void 0===e?void 0:e.creativeId))||null},e.prototype.getNetworkId=function(){var t=Object(dt.o)(this.mediaURL,["iu"]).iu;return t&&(t.split("/")[0]||t.split("/")[1])||null},e.prototype.transferError=function(t){try{t&&t()}catch(t){throw new Error(t.getMessage&&t.getMessage()||t.message||"Unknown error")}},e.prototype.onAdsManagerLoaded=function(t){var e=t.getUserRequestContext();if(!e||this.uniqueId===e.id){if(this.adsManager)return this.adsLoader.contentComplete(),void this.emitEvent(this.AdsManagerLoadedEvent);var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,n.bitrate=736,this.adsManager=t.getAdsManager((null==e?void 0:e.element)||this.contentVideoElement,n),!Object(b.p)(x.a)&&O.b.muted&&(this.forceVolume=!0,this.setAdVolume(0,!0)),this.adsManager.addEventListener(this.AdErrorEvent,this.onAdError),this.adsManager.addEventListener(this.AdEvent.AD_BREAK_READY,this.adBreakReadyHandler),this.adsManager.addEventListener(this.AdEvent.AD_METADATA,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.ALL_ADS_COMPLETED,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.DURATION_CHANGE,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.AD_PROGRESS,this.onAdProgressEvent),this.adsManager.addEventListener(this.AdEvent.IMPRESSION,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.LINEAR_CHANGED,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.LOADED,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.LOG,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.SKIPPABLE_STATE_CHANGED,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.CONTENT_RESUME_REQUESTED,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.CONTENT_PAUSE_REQUESTED,this.onAdEvent),this.adsManager.addEventListener(this.AdEvent.STARTED,this.onAdProgressEvent),this.adsManager.addEventListener(this.AdEvent.FIRST_QUARTILE,this.onAdProgressEvent),this.adsManager.addEventListener(this.AdEvent.MIDPOINT,this.onAdProgressEvent),this.adsManager.addEventListener(this.AdEvent.THIRD_QUARTILE,this.onAdProgressEvent),this.adsManager.addEventListener(this.AdEvent.COMPLETE,this.onAdProgressEvent),this.adsManager.addEventListener(this.AdEvent.CLICK,this.onAdUserEvent),this.adsManager.addEventListener(this.AdEvent.PAUSED,this.onAdUserEvent),this.adsManager.addEventListener(this.AdEvent.RESUMED,this.onAdUserEvent),this.adsManager.addEventListener(this.AdEvent.SKIPPED,this.onAdUserEvent),this.adsManager.addEventListener(this.AdEvent.USER_CLOSE,this.onAdUserEvent),this.adsManager.addEventListener(this.AdEvent.VOLUME_CHANGED,this.onAdUserEvent),this.adsManager.addEventListener(this.AdEvent.VOLUME_MUTED,this.onAdUserEvent),this.emitEvent(this.AdsManagerLoadedEvent)}},e.prototype.onAdEvent=function(t){var e,n,r,i,o,a=this,s=t.type,c={ad:t.getAd()};if(t.type==this.AdEvent.LOG)try{if(!c.ad||!c.ad.data||!c.ad.data.adId){var u=null==t?void 0:t.getAdData();u&&(null==u?void 0:u.adError)&&(c.msg=null===(e=null==u?void 0:u.adError)||void 0===e?void 0:e.getMessage(),c.code=null===(n=null==u?void 0:u.adError)||void 0===n?void 0:n.getErrorCode(),c.innerError=function(t){if(t&&t.message){var e=t.message.split("Error: ")[1];if(e)try{var n=JSON.parse(e);return{errorMsg:n.errorMessage,actualErrorMsg:n.actualErrorMessage,iabErrorCode:n.iabErrorCode}}catch(t){return}}}(null===(r=null==u?void 0:u.adError)||void 0===r?void 0:r.getInnerError()),c.vastErrorCode=null===(i=null==u?void 0:u.adError)||void 0===i?void 0:i.getVastErrorCode(),s=null===(o=null==u?void 0:u.adError)||void 0===o?void 0:o.getType())}}catch(t){}this.delayEvent(t,(function(){a.emitEvent(s,c)}))},e.prototype.onAdProgressEvent=function(e){var n=this;this.delayEvent(e,(function(){n.emitEvent(e.type,{ad:e.getAd()})})),"start"!==e.type&&t.prototype.setSkippableState.call(this)},e.prototype.delayEvent=function(t,e){var n="Ad"+t.type.charAt(0).toUpperCase()+t.type.slice(1);setTimeout(e,this.delay[n]||0)},e.prototype.onAdUserEvent=function(t){this.emitEvent(t.type)},e.prototype.onAdError=function(t){if(t){var e=t.getUserRequestContext();if(e&&this.uniqueId!==e.id)return;var n=t.getError();this.lastError={msg:n.getMessage(),code:n.getErrorCode()},n.getType()==this.AdErrorLoadedEvent?this.emitEvent(this.AdErrorLoadedEvent,this.lastError):this.emitEvent(this.AdErrorEvent,this.lastError),this.clearSDK()}},e.prototype.getErrorEvent=function(e){var n={event:{},timed:!1};return this.isAdsRequested?this.state==A.a.Initing?(n.event={name:"AdLoadError",errorCode:10==e.code?30:e.code,message:e.message},31==e.code&&(n.event.timeout=!0),n.timed=!0):n=t.prototype.getErrorEvent.call(this,e):(10==e.code?n.event={name:"AdsRequestError",errorCode:200,message:e.message,retryCount:this.retryCount}:201==e.code&&(n.event={name:"AdsRequestError",errorCode:e.code,message:e.message,retryCount:this.retryCount,timeout:!0}),n.timed=!0),this.lastError&&null!=this.lastError.code&&(n.event.imaError=this.lastError.code),n},e.prototype.adBreakReadyHandler=function(){},Object.defineProperty(e.prototype,"keyValueParamName",{get:function(){var t;return(null===(t=this.gpvDemand)||void 0===t?void 0:t.gkvp)||"pf"},enumerable:!1,configurable:!0}),e}(a.a),It=function(){function t(){}return t.prototype.AdLoaded=function(){},t.prototype.AdError=function(t){},t.prototype.AdStarted=function(){},t.prototype.AdVideoStart=function(){},t.prototype.AdVideoFirstQuartile=function(){},t.prototype.AdVideoMidpoint=function(){},t.prototype.AdVideoThirdQuartile=function(){},t.prototype.AdVideoComplete=function(){},t.prototype.AdImpression=function(t){},t.prototype.AdDurationChange=function(){},t.prototype.AdVolumeChange=function(){},t.prototype.AdClickThru=function(t,e,n){},t.prototype.AdSkipped=function(){},t.prototype.AdSkippableStateChange=function(){},t.prototype.AdUserClose=function(){},t.prototype.AdStopped=function(){},t.prototype.AdPaused=function(){},t.prototype.AdPlaying=function(){},t.prototype.AdSizeChange=function(){},t.prototype.AdExpandedChange=function(){},t.prototype.AdRemainingTimeChange=function(){},t}();function Ot(t,e){for(var n in e)e.hasOwnProperty(n)&&null!=e[n]&&!1!==e[n]&&t.setAttribute(n,!0===e[n]?n:e[n]);return t}function St(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var Ct="margin:0;padding:0;top:0px;left:0px;position:absolute;width:100%;height:100%;";function Pt(t,e,n){return new Promise((function(i,o){var a=n.createElement("script");a.setAttribute("type","text/javascript"),e.mediaURL.indexOf("js#")>-1&&(e.mediaURL=function(t,e){void 0===t&&(t="");try{var n=Object(dt.j)(t.replace("#","?"),!0),r=t.split("#")[0];return n&&n.vast&&(n.vast=encodeURIComponent(Object(E.b)(O.b,e)(n.vast))),r+"#"+Object.keys(n).map((function(t){return"".concat(t,"=").concat(n[t])})).join("&")}catch(e){return t}}(e.mediaURL,e));var s=e.mediaURL;s.match(/^http.*\/player\/(.*_)?vpaid_\d+\.\d+.*\.js/)&&t.playerUrl&&(s=s.replace(/^http.*\.js/,t.playerUrl.replace("player","vpaid"))),a.src=Object(dt.t)(t.protocol,s),a.addEventListener("load",(function(){Object(v.c)("jsVpaidLoaded",{players:t,playerData:e},(function(){!function(t,e){if("function"==typeof t.jsVpaidLoaded)return t.jsVpaidLoaded(e);var n=e.jsVpaidFrame;if(!n||!n.contentWindow||!n.contentWindow.getVPAIDAd)throw new Error("couldn't find js vpaid module");Object(r.c)(e.videoElement)&&!e.vpaidUseJSV?(e.videoElement.style.display="none",e.vpaidJsIframeVideo=document.createElement("video"),e.adContainer.insertBefore(e.vpaidJsIframeVideo,e.adContainer.firstChild)):e.vpaidJsIframeVideo=e.videoElement;if(e.vpaidJsIframeVideo.setAttribute("style",Ct),e.vpaidJsIframeVideo.volume=0,e.vpaidJsIframeVideo.muted=!0,e.vpaidJs=n.contentWindow.getVPAIDAd(),!e.vpaidJs)throw new Error("failed to create js vpaid module");e.vpaidJs.handshakeVersion&&e.vpaidJs.handshakeVersion("2.0")}(t,e),i(a)}),o)})),n.body.appendChild(a)}))}function wt(t,e){var n=function(t,e){return!!t.htmlOnly||void 0!==e.sandbox&&e.sandbox}(t,e);return function(t,e){return new Promise((function(n,r){var i=document.createElement("iframe");St(i,{onload:function(){return n(i)},onerror:r,id:"vjs"+Math.floor(5e3*Math.random()),src:"about:blank",width:"100%",height:"100%",marginWidth:"0",marginHeight:"0"}),Ot(i,{style:Ct,frameBorder:"0",scrolling:"no",sandbox:e&&"allow-scripts allow-same-origin allow-popups"}),t.appendChild(i)}))}(e.adContainer,n).then((function(r){e.jsVpaidFrame=r;var i=r.contentWindow&&r.contentWindow.document;if(!i)throw new Error("loadJsVpaid frame document not defined");i.body.setAttribute("style","margin:0;padding:0;"),i.head.appendChild(i.createElement("meta")).setAttribute("charset","UTF-8"),"https:"==t.protocol&&i.head.appendChild(Ot(i.createElement("meta"),{"http-equiv":"Content-Security-Policy",content:"upgrade-insecure-requests;"}));var o=St(i.createElement("div"),{id:"vpaid-js-ad-elem",className:"vpaid-ad-slot"});return o.setAttribute("style",Ct),e.vpaidJsIframeAdElem=o,(e.iframeSlot||n?i.body:e.adContainer).appendChild(o),e.initCompanion(i),Pt(t,e,i)}))}var Rt=n(93),Dt=n(29),Lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nt=function(){return(Nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},kt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstQuartile=!1,e.isPotentiallyNonLinear=!1,e}return Lt(e,t),e.prototype.getAdRemainingTime=function(){var t;try{t=(t=this.vpaidJs.getAdRemainingTime())<0?null:t}catch(t){}return P.b.emit(P.a.INTERNAL.AD.TIME_UPDATE,{demand:this}),t},e.prototype.getAdDuration=function(){var t;try{t=(t=this.vpaidJs.getAdDuration())<0?null:t}catch(t){}return t},e.prototype.verifyDuration=function(){if(!this.durationKnown){var t=this.getAdDuration();t&&(this.duration=t,this.durationKnown=!0)}},e.prototype.isNonLinear=function(){return this.vpaidJs.getAdLinear&&!this.vpaidJs.getAdLinear()},e.prototype.initNonLinearCompleter=function(){this.isNonLinear()&&V(O.b,this,this.duration)},e.guessError=function(t){return void 0===t?t="unknown error":"string"!=typeof t&&(t=t.message?t.message:t.data&&t.data.message?t.data.message:"Couldnt extract error message"),{errorMsg:t}},e.clickData=function(t,e,n){return Array.isArray(t)?{url:t[0]||"",id:t[1],playerHandles:t[2]}:{url:t||"",id:e,playerHandles:n}},e.prototype.considerVolumeChange=function(){if(!O.b.dynamicSound){var t=!1,e=null,n=!1;try{if(0==this.vpaidJs.getAdVolume())return;this.viewable?this.viewableForSeconds()<1?e="JS VPAID - AdVolume change too soon after adStarted":(t=!0,e="JS VPAID - AdVolume change allowed"):e="JS VPAID - AdVolume change before viewable",t||(this.vpaidJs.setAdVolume(0),0==this.vpaidJs.getAdVolume()&&(n=!0,e="JS VPAID - AdVolume change reverted"))}catch(t){e="JS VPAID - AdVolumeChanged exception"+(t&&t.message?t.message:"")}!function(t,e,n,r){var i={category:"sound",event:n?"enabled":"rejected",error:r,url:e.mediaURL,vast:e.vastId};Object(u.c)(t,i,n?.01:.1)}(O.b,this,t||n,e)}},e.prototype.event=function(t,e){var n=this,r=void 0===e?{}:e,i=r.data,a=r.setVolume,s=void 0!==a&&a,c=this.vpaidEvents.currentEvent;try{j.a.delay(this.delay[c]||0).then((function(){t(O.b,n,i)})).catch(Object(v.b)(O.b,"jsvpaid event ".concat(c))),s&&this.syncVolume()}catch(t){Object(u.f)(O.b,3,"jsVpaid"+c+" hanlder JS exception: "),t&&t.terminateVpaid&&Object(o.b)(O.b,this,9,{code:10,message:"volume violation",iabError:R.b.GENERAL_VPAID_ERROR,vpaidError:d.c.VPAID_VOLUME_VIOLATION})}},e.prototype.AdLoaded=function(){this.initVpaidOnStart?this.startAd():this.event(q,{setVolume:!0})},e.prototype.AdError=function(t){this.event(G,{data:e.guessError(t)})},e.prototype.AdStarted=function(){this.verifyDuration(),this.event(H,{setVolume:!0})},e.prototype.AdStopped=function(){this.event(Q)},e.prototype.AdPlaying=function(){this.event(nt)},e.prototype.AdPaused=function(){this.event(et)},e.prototype.AdVideoStart=function(){this.verifyDuration(),this.nonLinearCompleteTimer.cancel(),this.event(Y,{setVolume:!0})},e.prototype.AdVideoFirstQuartile=function(){this.firstQuartile=!0,this.event(J)},e.prototype.AdVideoMidpoint=function(){this.event(z)},e.prototype.AdVideoThirdQuartile=function(){this.event(K)},e.prototype.AdVideoComplete=function(){this.event(X)},e.prototype.AdImpression=function(){var t=this.vpaidJs.cedatoAdInfo&&this.vpaidJs.cedatoAdInfo();if((t&&(this.impressionData=Nt(Nt(Nt({},t.pricing&&{pricing:t.pricing}),t.currency&&{currency:t.currency}),t.impType&&{impType:t.impType}),null!=t.adui&&(this.enableAdUI=t.adui),null!=t.controlBar&&(this.controlBar=t.controlBar)),this.event(W,{setVolume:!0}),this.videoElement)&&"undefined"===this.videoElement.getAttribute("src"))return Object(d.h)(O.b,this.vastId,100,"Failed to play video ad",new Error("jsVpaid Ad video wasnt selected"),this),void Object(o.b)(O.b,this,15,{code:100,iabError:R.b.GENERAL_VPAID_ERROR,message:"jsVpaid Ad video wasnt selected"});try{this.videoElement.play()}catch(t){}},e.prototype.AdRemainingTimeChange=function(){var t={t:null};if(this.state==A.a.Playing){var e=this.getAdRemainingTime();null!=e&&e>0||this.firstQuartile?this.nonLinearCompleteTimer.cancel():null!=this.lastRemainingTime||this.isPotentiallyNonLinear||this.durationKnown?this.lastRemainingTime&&this.lastRemainingTime<1&&(V(O.b,this,.5),this.isPotentiallyNonLinear=!0,this.lastRemainingTime=null):(this.isPotentiallyNonLinear=!0,V(O.b,this,this.duration)),t={t:e}}this.event(tt,{data:t,log:!1})},e.prototype.AdDurationChange=function(){this.event($,{data:{t:this.getAdDuration()}})},e.prototype.AdVolumeChange=function(){this.considerVolumeChange(),this.event(rt)},e.prototype.AdClickThru=function(t,n,r){this.event(Z,{data:e.clickData(t,n,r)})},e.prototype.AdSkipped=function(){this.event(it)},e.prototype.AdSkippableStateChange=function(){this.event(ot)},e.prototype.AdUserClose=function(){this.event(at)},e.prototype.AdSizeChange=function(){},e.prototype.AdExpandedChange=function(){},e.prototype.insertCompanion=function(){this.vpaidJsIframeAdElem.appendChild(this.companionsElementDiv)},e.prototype.unlockAdSlot=function(){!this.unlocked&&this.videoElement&&this.state<A.a.Initing&&(this.unlocked=!0,this.videoElement.load())},e.prototype.parseAdParameters=function(){if(this.adParameters)try{return JSON.parse(this.adParameters)}catch(t){}},e.prototype.initMedia=function(){var e=this;return this.vpaidJs=null,t.prototype.initMedia.call(this).then((function(){return wt(O.b,e).then((function(){e.vpaidEvents=new xt(e),e.initVpaidOnStart?(e.state=A.a.Ready,Object(Rt.a)(O.b,e,!1)):F(O.b,e)})).catch((function(t){Object(d.h)(O.b,e.vastId,100,"Failed to play video ad",t,e),Object(o.b)(O.b,e,15,{code:100,iabError:R.b.GENERAL_VPAID_ERROR,message:t.message})}))}))},e.prototype.initAd=function(){if(this.vpaidJsIframeVideo.muted=O.b.muted||!Object(Dt.d)(),this.vpaidJsIframeVideo.muted&&this.vpaidJsIframeVideo.setAttribute("muted","true"),this.vpaidJs&&this.vpaidJs.getMType&&1===this.vpaidJs.getMType()&&(this.subType="display"),!this.subType&&this.adParameters){var t=this.parseAdParameters();t&&t.adm&&(this.subType="display")}var e={AdParameters:this.adParameters||""},n={slot:this.vpaidJsIframeAdElem,videoSlot:this.vpaidJsIframeVideo,videoSlotCanAutoPlay:!0===O.b.mainAutoplay};if(this.mediaURL.indexOf("moatwrapper.js")>-1){var r=this.vpaidJsIframeVideo.canPlayType.bind(this.vpaidJsIframeVideo);this.vpaidJsIframeVideo.canPlayType=function(t){return"video/3gpp"!=t?r(t):""}}var i=this.vpaidJs.initAd(O.b.widthOverwrite||O.b.width,O.b.heightOverwrite||O.b.height,"normal",this.minBitrate,e,n);if(!i&&void 0!==i)return"jsVpaid init error"},e.prototype.startAd=function(){var t;if(O.b.rootDivElem.style.top="0px",this.syncVolume(),this.initVpaidOnStart&&!this.initVpaidOnStartDone)return this.initVpaidOnStartDone=!0,void this.initAd();try{this.vpaidJs.startAd(),this.sureFastStart=null!==(t=this.expectedSureFastStart)&&void 0!==t&&t,B(O.b,this)}catch(t){var e="jsVpaid start error";return t&&t.message&&t.message.includes("jsVpaid")&&(e=t.message),e}return null},e.prototype.pauseAd=function(){this.vpaidJs&&this.vpaidJs.pauseAd&&this.vpaidJs.pauseAd()},e.prototype.resumeAd=function(){this.vpaidJs&&this.vpaidJs.resumeAd&&this.vpaidJs.resumeAd()},e.prototype.stopAd=function(){this.vpaidJs&&(this.vpaidJs.stopAd&&this.vpaidJs.stopAd(),this.vpaidJs.pauseAd&&this.vpaidJs.pauseAd())},e.prototype.showAd=function(){t.prototype.showAd.call(this),this.vpaidJsIframeAdElem&&(this.vpaidJsIframeAdElem.style.zIndex="10000"),this.vpaidJsIframeVideo&&(this.vpaidJsIframeVideo.style.margin="0",this.vpaidJsIframeVideo.style.padding="0",this.vpaidJsIframeVideo.style.top="0px",this.vpaidJsIframeVideo.style.left="0px",this.vpaidJsIframeVideo.style.position="absolute")},e.prototype.clearAd=function(){try{this.vpaidJs&&(this.firedEvents.AdError||this.firedEvents.AdStopped||this.vpaidJs.stopAd(),this.vpaidEvents.unsubscribe()),this.jsVpaidFrame.parentNode.removeChild(this.jsVpaidFrame)}catch(t){}this.initialSound=!1,this.jsVpaidFrame=null,this.vpaidJsIframeAdElem=null,this.vpaidJsIframeVideo=null,this.vpaidJsIframeVideoCanvas=null,this.vpaidJs=null},e.prototype.resizeAd=function(t,e,n){this.vpaidJs&&this.vpaidJs.resizeAd&&this.vpaidJs.resizeAd(t,e,n)},e.prototype.setAdVolume=function(t,e,n){if(this.vpaidJs&&this.vpaidJs.setAdVolume&&(this.muted=e||!Object(Dt.d)(),t=this.muted?0:t,!n))try{this.vpaidJsIframeVideo.muted=this.muted,this.vpaidJsIframeVideo.volume=t,this.initialSound&&this.vpaidJs.getAdVolume&&this.vpaidJs.getAdVolume()===t||this.vpaidJs.setAdVolume(t),this.initialSound=!this.muted}catch(t){}},e.prototype.getAdVolume=function(){return this.vpaidJs&&this.vpaidJs.getAdVolume&&{volume:this.vpaidJs.getAdVolume()}},e.prototype.showAdUI=function(){return null!=this.enableAdUI&&this.enableAdUI},e.prototype.getProgress=function(){this.verifyDuration();var t=this.duration;return{time:t-this.getAdRemainingTime(),duration:t}},e.prototype.getAdSkippableState=function(){var e,n;return(null===(e=this.vpaidJs)||void 0===e?void 0:e.getAdSkippableState)&&(null===(n=this.vpaidJs)||void 0===n?void 0:n.getAdSkippableState())||t.prototype.getAdSkippableState.call(this)},e.prototype.skipAd=function(){var t=this;this.vpaidJs.getAdSkippableState&&this.vpaidJs.getAdSkippableState()?(this.vpaidJs.skipAd(),this.failSkipTimer.start().then((function(){t.onSkip()})).catch((function(){}))):this.onSkip()},e.prototype.getErrorEvent=function(e){var n={event:{},timed:!0};return this.state==A.a.Initing?(n.event={name:"AdLoadError",errorCode:10==e.code?30:e.code,message:e.message},31==e.code&&(n.event.timeout=!0)):n=t.prototype.getErrorEvent.call(this,e),e.vpaidError&&(n.event.vpaidError=e.vpaidError),n},e}(i.b),xt=function(t){function e(e){var n=t.call(this)||this;return n.playerData=e,n.subscribe(),n}return Lt(e,t),e.prototype.subscribe=function(){var t=this;Object(g.g)(It.prototype,(function(e){t[e]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t.currentEvent=e,t.playerData.vpaidJs){var i=t.playerData[e];i&&i.apply(t.playerData,kt([],n,!0))}else f(O.b,t.playerData,e)},t.playerData.vpaidJs.subscribe(t[e],e)}))},e.prototype.unsubscribe=function(){var t=this;try{Object(g.g)(It.prototype,(function(e,n){n&&t.playerData.vpaidJs.unsubscribe(n,e)}))}catch(t){}},e}(It),Ut=n(27),Mt=n(77),Vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstPlayEventTriggered=!1,e.completed=!1,e}return Vt(e,t),e.prototype.initMedia=function(){var e=this;return t.prototype.initMedia.call(this).then((function(){e.initCompanion(),function(t,e){if(e.videoElementPrepared)return;Object(v.c)("prepareVideoElem",{players:t,playerData:e,log:!0},(function(){Object(Ut.b)(e.videoElement,"video_element"),e.videoElement.style.zIndex=(9994-e.uniqId).toString(),e.firstPlayEventTriggered=!1,Object(v.a)(e.videoElement,"ad video event",{players:t,playerData:e},[{type:"canplay",playerDataAction:Gt},{type:"play",playerDataAction:qt},{type:"pause",playerDataAction:Bt},{type:"ended",playerDataAction:Ht},{type:"timeupdate",playerDataAction:Jt},{type:"volumechange",playerDataAction:zt},{type:"error",playerDataAction:Wt},{type:"click",playerDataAction:Yt}]),e.videoElementPrepared=!0}))}(O.b,e),Object(r.d)(O.b,e.videoElement,e.mediaURL),Object(r.c)(e.videoElement)||(e.videoElement.autoplay=!1,e.videoElement.controls=O.b.controlBar&&"native"==O.b.controlBarType,e.videoElement.loop=!1,e.videoElement.load())})).catch(Object(v.b)(O.b,"initMedia"))},e.prototype.initAd=function(){},e.prototype.startAd=function(){this.showAd(),this.sureFastStart=!0,this.syncVolume();var t=Object(Mt.b)(this.videoElement);!function(t,e,n,r){if(!t.usejsv&&t.info.mobile){var i={category:"autoplay",label:r,domain:t.domain,videoSrc:e.currentSrc};n&&n.then?n.then((function(){i.event="OK",Object(u.c)(t,i,.01)}),(function(e){var n=e.name,r=e.message;i.error=n,i.message=r,i.event="AbortError"!==n?"Failed":"Aborted",Object(u.c)(t,i,"AbortError"!==n?.1:.01)})):(i.event="Unknown",Object(u.c)(t,i,.01))}}(O.b,this.videoElement,t,"vast")},e.prototype.pauseAd=function(){this.videoElement.pause()},e.prototype.resumeAd=function(){this.videoElement.play()},e.prototype.stopAd=function(){this.videoElement.pause()},e.prototype.clearAd=function(){this.videoElement&&this.videoElement.pause()},e.prototype.destroyAd=function(){this.clearAd(),t.prototype.destroyAd.call(this)},e.prototype.resizeAd=function(t,e,n){},e.prototype.setAdVolume=function(t,e,n){this.muted=e,n||this.videoElement&&(this.videoElement.muted!==e&&(this.videoElement.muted=e),this.videoElement.volume!==t&&(this.videoElement.volume=t))},e.prototype.getAdVolume=function(){return this.videoElement&&{volume:this.videoElement.volume,muted:this.videoElement.muted}},e.prototype.getProgress=function(){if(!this.videoElement)return{time:0,duration:0};var t=this.videoElement.duration||0;return{time:Math.min(this.videoElement.currentTime,t),duration:t}},e.prototype.getAdRemainingTime=function(){var t=this.getProgress();return t.duration-t.time},e.prototype.getErrorEvent=function(e){var n=t.prototype.getErrorEvent.call(this,e);return e.videoError&&(n.event.videoError=e.videoError),n},e}(i.b);function Bt(t,e){e.videoElement.duration>0&&e.videoElement.duration>e.videoElement.currentTime&&Object(h.d)(t,e)}function qt(t,e){Object(h.g)(t,e),e.firstPlayEventTriggered||(e.firstPlayEventTriggered=!0,e.state==A.a.Started&&(N(t,e),k(t,e)&&(t.beingVpaid&&(Object(p.a)(t,"jsAdDurationChange",{duration:e.duration|e.videoElement.duration}),Object(p.a)(t,"jsAdVideoStart",{})),e.errorCount=0)))}function Gt(t,e){"video"==e.adType&&(e.state>=A.a.Ready||function(t,e){e.durationKnown=!0;try{e.duration=e.videoElement.duration,e.syncVolume(),e.vastTracker&&(e.vastTracker.duration=e.duration,e.vastTracker.setDuration(e.duration))}catch(t){e.durationKnown=!1}var n=Math.floor(t.height),r=(t.height-n)/2;r=Math.floor(r),e.videoElement.style.cssText="background-color: black; width:100%; height:100%; position: relative; top: "+r+"px",e.state=A.a.Ready,P.b.emit(P.a.INTERNAL.AD.LOADED,{ad:e})}(t,e))}function Ht(t,e){e.completed||(e.completed=!0,e.onComplete(),Object(o.b)(t,e,1))}function Wt(t,e,n){if(e.state!=A.a.Error&&"video"==e.adType){if(!e.retriedMediaFile&&e.mediaFiles&&e.mediaFiles.length>0&&(e.mediaFiles=e.mediaFiles.filter((function(t){return t.fileURL!==e.mediaURL})),e.mediaFiles.length>=1)){var i=Object(d.d)(e);if(i)return Object(r.d)(t,e.videoElement,i.fileURL),e.retriedMediaFile=!0,void e.videoElement.load()}Object(h.b)(t,e,"aderror"),Object(h.b)(t,e,"ad.error");var a,s,c,u,l=n.target.error.code;Object(d.h)(t,e.vastId,10,"video player error code: "+l,null,e,!1),Object(o.b)(t,e,21,{code:10,message:Object(r.e)(n.target),iabError:(a=n.target.error,c=a.code,u=R.b.MEDIA_FILE_DISPLAY_ERROR,((s={})[a.MEDIA_ERR_SRC_NOT_SUPPORTED]=R.b.MEDIA_FILE_NOT_FOUND,s[a.MEDIA_ERR_NETWORK]=R.b.MEDIA_FILE_URL_TIMEOUT,s)[c]||u),videoError:l})}}function Yt(t,e){ve(t,e,null)}function Jt(t,e){var n;if(!(e.state<A.a.Initing||e.state==A.a.Error||"video"!=e.adType)){e.setSkippableState();var r=e.videoElement;P.b.emit(P.a.INTERNAL.AD.TIME_UPDATE,{demand:e}),t.beingVpaid&&Object(p.a)(t,"jsAdRemainingTimeChange",{remainingTime:r.duration-r.currentTime}),(null==e?void 0:e.vastTracker)&&(null===(n=e.vastTracker)||void 0===n||n.setProgress(r.currentTime));var i=Math.floor(r.currentTime/r.duration*4);i>0&&i<4&&e.quartile!=i&&e.onQuartile(i)}}function zt(t,e){e.viewable&&e.videoElement.controls&&Object(h.j)(t,e.videoElement.volume,e.videoElement.muted,e)}var Kt,Xt=n(94),Qt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentlyPlaying=1,e}return Qt(e,t),e.prototype.AdLoaded=function(){var e=this,n=this.vpaidJsIframeAdElem.vdb_Player;if(n){var r=this.jsVpaidFrame.contentWindow.vidible;r&&(n.addEventListener(r.AD_START,(function(){e.currentlyPlaying=3})),n.addEventListener(r.VIDEO_START,(function(){3!=e.currentlyPlaying&&(e.currentlyPlaying=2,Object(o.b)(O.b,e,36,{code:300,message:"vidible content exception",iabError:R.b.GENERAL_VPAID_ERROR,vpaidError:d.c.VPAID_VIDIBLE_CONTENT}))})))}t.prototype.AdLoaded.call(this)},e.prototype.AdVideoComplete=function(){2!=this.currentlyPlaying&&t.prototype.AdVideoComplete.call(this)},e}(jt),$t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),te=function(t){function e(e){var n=t.call(this,e)||this;return n.proxy=null,n.proxy=n.vastURL,n}return $t(e,t),Object.defineProperty(e.prototype,"tamProxy",{get:function(){return this.proxy||(this.proxy=this.vastURL),this.proxy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tamConfig",{get:function(){return this.gpvDemand.tam||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"slotId",{get:function(){return this.tamConfig.slotId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pubId",{get:function(){return this.tamConfig.pubId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deals",{get:function(){return this.tamConfig.deals||!1},enumerable:!1,configurable:!0}),e}(Ft),ee=n(42),ne=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),re=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},ie=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},oe=Date.now(),ae=function(t){function e(e){return t.call(this,e)||this}return ne(e,t),e.prototype.fetchAdUrl=function(e,n){return re(this,void 0,void 0,(function(){var e,r,i=this;return ie(this,(function(o){switch(o.label){case 0:return this.uniqId=oe,this.adContainer?[3,2]:[4,le(O.b,this)];case 1:o.sent(),o.label=2;case 2:return ee.a.loadSDK(),ee.a.updateParams({pageUrl:O.b.domain}),(e=Kt)?[3,4]:[4,ee.a.createAd({adUnit:this.googleSlotId,dimensions:[[Math.round(O.b.width),Math.round(O.b.height)],[1,1]],adUnitId:this.adContainer.id,isOutstream:!0})];case 3:e=o.sent(),o.label=4;case 4:return Kt=e,r=function(e){i.vastXml=e.vast,t.prototype.fetchAdUrl.call(i,null,n)},ee.a.googletag.cmd.push((function(){var t=ee.a.googletag.pubads().getTargetingKeys(),e=t.reduce((function(t,e){return t[e]=ee.a.googletag.pubads().getTargeting(e),t}),{});if(ee.a.googletag.pubads().clearTargeting(),Object(b.q)(O.b,i)){var n=O.b.priceTables.exco,o=_t(i.floorPrice,n);o&&ee.a.googletag.pubads().setTargeting("pf",o.v)}ee.a.googletag.pubads().addEventListener("slotRenderEnded",r),ee.a.googletag.pubads().refresh([Kt]),ee.a.googletag.display(i.adContainer.id),ee.a.googletag.pubads().clearTargeting("pf"),t.forEach((function(t){ee.a.googletag.pubads().setTargeting(t,e[t])}))})),[2]}}))}))},e}(i.b);var se={video:Ft.prototype,jsvpaid:jt.prototype,jsvidible:Zt.prototype,jsima:Tt.prototype,vast:i.b.prototype,prebidAdapter:i.a.prototype,tam:te.prototype,googleOutstream:ae.prototype};function ce(t){!function(t,e){if(Object.setPrototypeOf)Object.setPrototypeOf(t,e);else if({__proto__:[]}instanceof Array)t.__proto__=e;else for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(t,se[t.adType||"vast"])}function ue(t,e){var n;if(!e.viewable){e.viewable=!0,e.viewableAt=e.playedAt=Date.now();try{e.showAd()}catch(t){}t.content&&(null===(n=t.getContentElement())||void 0===n||n.hadAd(),t.content.hide())}}function de(t){t.viewable&&(he(t),t.viewable=!1,t.viewableAt=t.playedAt=null)}function le(t,e,n){return void 0===n&&(n={}),e.adContainersReady=e.adContainersReady||t.playerReady.then((function(){t.unlockedVideos.length>0?(e.reusableVideoTrace=t.unlockedVideos.pop(),e.videoElement=e.reusableVideoTrace.target,e.unlocked=!0):(e.videoElement=Object(r.b)(),function(t){t.videoElement.addEventListener("timeupdate",(function(){t.setSkippableState()}))}(e),e.reusableVideoTrace=function(t,e){var n=t.addEventListener,r=t.removeEventListener,i=[],o={},a=t;for(var s in a)"on"==s.substr(0,2)&&a[s]&&(o[s]=a[s]);return a.addEventListener=function(t,e,r){i.push({type:t,listener:e,options:r}),n.call(this,t,e,r)},a.removeEventListener=function(t,n,o){if(e)for(var a=0;a!=i.length;a++){var s=i[a];t==s.type&&n==s.listener&&o==s.options&&i.splice(a,1)}r.call(this,t,n,o)},{target:a,activeListeners:i,storedOns:o,reset:function(){for(var t in a)"on"==t.substr(0,2)&&(a[t]=o[t]||null);for(var e=0;e!=i.length;e++){var n=i[e],s=n.type,c=n.listener,u=n.options;r.call(a,s,c,u)}i.splice(0,i.length)}}}(e.videoElement)),!0!==n.ignoreAdContainer&&(e.adContainer=function(t){var e=document.createElement("div");return e.id="__exco_ad_container_".concat(t.vastId,"_").concat(t.uniqId),e.className="__exco_ad_container",e}(e),e.adContainer.appendChild(e.videoElement),t.divElem.appendChild(e.adContainer))})).catch(Object(v.b)(t,"prepareAdContainers"))}function pe(t,e){try{e.stopAd&&e.stopAd()}catch(t){}}function he(t){t.viewable=!1;try{t.hideAd&&t.hideAd()}catch(t){}}function fe(t,e){Object(v.c)("destroyPlayerData",{players:t,playerData:e,log:!0},(function(){if(-1===x.b.indexOf(e))return!1;if(e.state==A.a.Finished&&null==e.requeryTimeout)return!1;e.state=A.a.Finished,null!=e.requeryTimeout&&(clearTimeout(e.requeryTimeout),e.requeryTimeout=null),e.flowTimeout.cancel(),e.viewabilityTimer.cancel(),e.keepAliveTimer.cancel(),he(e),-1!==x.b.indexOf(e)&&x.b.splice(x.b.indexOf(e),1);try{setTimeout((function(){!function(t){try{t.clearAd&&t.clearAd(),t.companionsElementDiv&&(t.companionsElementDiv.parentNode.removeChild(t.companionsElementDiv),t.companionsElementDiv.innerHTML="",t.companionsElementDiv=null),t.reusableVideoTrace&&t.videoElement&&(t.reusableVideoTrace.reset(),t.videoElement.pause(),t.videoElement.removeAttribute("src"),t.videoElement.removeAttribute("style"),t.videoElement.removeAttribute("autoplay"))}catch(t){}}(e),e.reusableVideoTrace&&e.unlocked&&e.videoElement&&!Object(r.c)(e.videoElement)&&(t.unlockedVideos.push(e.reusableVideoTrace),e.videoElement.parentNode&&e.videoElement.parentNode.removeChild(e.videoElement),e.videoElement=null),e.destroyAd&&e.destroyAd()}),200)}catch(t){}}))}function ve(t,e,n,r){void 0===r&&(r=!1),!e.skipVastTracker&&e.vastTracker?e.vastTracker.click():e.skipVastTracker||Object(u.f)(t,6,"no vastTracker for click"),n=n||e.adClickUrl,Object(c.b)(t,e,"adclick",{clickUrl:n}),t.serverEvents.demandEvent(e,{name:"AdClick",clickUrl:Object(Xt.b)(n)}),t.eventDispatcher.sendAdClickedEvent(e,t),P.b.emit(P.a.AD.CLICKED,Ae(e)),t.beingVpaid&&Object(p.a)(t,"jsAdClickthrough",{url:n}),r||n&&"string"==typeof n&&window.open(n,"_blank")}function me(t){void 0===t&&(t={});var e=t.getAdId(),n={viewability:!!t.viewability,progress:null==t?void 0:t.progress,skipOffset:O.b.skipConfig.offset,skippable:!!t.isSkippable(),adClickUrl:t.adClickUrl};return t.isPubDemand&&(n.cpm=t.cpm),e&&(n.adId=e),n}function Ae(t){return{demand:t,exposedDemandData:me(t)}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return p}));var r=n(46),i=n(20),o=n(8),a=n(12),s=n(22),c=n(53),u=n(90);function d(t){if(t.jsCallingVpaid){var e=window;if(!e[t.jsCallingVpaid]||!e[t.jsCallingVpaid].pEvent)return Object(i.f)(t,6,"vpaid parent not found in post calling js obj: "+t.jsCallingVpaid),!1;t.callingJSVpaid=e[t.jsCallingVpaid]}return!0}function l(t){if(t.beingVpaid){var e,n,i=new r.EventEmitter2;i.on("inPlayAd",(function(){t.anvato&&n&&(n.src=u.a,n.muted=!0,n.play()),t.playerReady.then((function(){return Object(c.d)(t)}))})),i.on("inStopAd",(function(){return setTimeout((function(){t.autoplay=!1,Object(a.c)(t),p(t,"jsAdStopped",{})}),0)})),i.on("inPauseAd",(function(){return setTimeout((function(){t.vpaidContent||(t.autoplay=!1),Object(o.d)(t,"vpaidplayer")}),0)})),i.on("inResumeAd",(function(){return setTimeout((function(){Object(o.g)(t,"vpaidplayer")}),0)})),i.on("inSetAdVolume",(function(e){return setTimeout((function(){Object(o.j)(t,e&&e.volume,void 0,null,t.allowSound)}),0)})),i.on("inResizeAd",(function(e){return setTimeout((function(){Object(o.e)(t,e.viewMode,e.width,e.height)}),0)})),i.on("inGetProgress",(function(e){var n=Object(o.a)(t);n&&e.callback(n)})),i.on("inInitAd",(function(r){e=r.slot;var i=t.beingVpaidUseSlot;if(e&&!1!==i){var a=t.rootDivElem;a.parentNode.removeChild(a),e.parentNode.style.margin=0,e.parentNode.style.padding=0,(Math.abs(e.offsetTop)>50||Math.abs(e.offsetLeft)>50)&&(e.style.position="fixed",e.style.top="0",e.style.left="0"),e.appendChild(a)}n=r.videoSlot,setTimeout((function(){Object(o.e)(t,r.viewMode,r.width||t.width,r.height||t.height),p(t,"jsAdReadyToStart",{})}),0)}));var s=document.createElement("div");s.setAttribute("id",t.divId);var d=t.widthOverwrite||t.width,l=t.heightOverwrite||t.height;if(s.setAttribute("style","width:"+d+"px;height:"+l+"px;position:relative;top:0px;"),t.rootDivElem=s,t.jsCallingVpaid)document.querySelector("body").appendChild(s),t.callingJSVpaid.handshake((function(t,e){return i.emit(t,e)}));if(t.companionsRootDivElem=document.createElement("div"),t.companionsDivElem=document.createElement("div"),t.companionsDivElem.setAttribute("style","width:100%;height:100%;position:relative;top:0px; display: block;"),t.companionsRootDivElem.appendChild(t.companionsDivElem),t.jsCallingVpaid)document.querySelector("body").appendChild(t.companionsRootDivElem);return!0}}function p(t,e,n){if(t.jsCallingVpaid){Object(s.c)(e,{players:t,log:-1==["jsAdRemainingTimeChange"].indexOf(e)},(function(){t.callingJSVpaid.pEvent(e,n)}))}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return v}));var r=n(30),i=n(75),o=n(10),a=n(37),s=n(31),c=n(83);n.d(e,"a",(function(){return c.a}));var u,d,l=n(7),p=n(19),h=n(56),f=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t[t.ACTIVE=1]="ACTIVE",t[t.FROZEN=2]="FROZEN",t[t.DEACTIVATED=3]="DEACTIVATED"}(d||(d={}));var v=function(t){function e(){var e=t.call(this)||this;return e._internalEventsEmitter=c.b,e.isInView=!1,e.wasInView=!1,e.partiallyInView=!1,e.isOutstream=!1,e.globalPricing=!1,e.extraParams=null,e.ortbExtraParams={},e.skipConfig={enabled:!1,offset:null},e.dropBidsUnderOriginalCPM=!1,e.firstSlotStart=!1,e.auctionId=0,e.mlRandomParams={},e.gpidIndex=0,e.isHumanSession=!1,e.monetize=!0,e.beingVpaid=!1,e.anvato=!1,e.jwplayer=!1,e.checkDomPresence=!0,e.checkDetectedSize=!1,e.vpaidContent=!1,e.curUniq=0,e.freqRetry=!1,e.anyPlaying=!1,e.allowSound=!1,e.allowPausedImpressions=!0,e.usejsv=!1,e.areqMethod=0,e.multipleEventMethod=0,e.mediaPreview=!1,e.intent=!1,e.controlsTouch=!1,e.secureIMA=!1,e.videoPreload="metadata",e.clickText=null,e.clickTextEnabled=!1,e.iframe=!1,e.areqEventsQueue={},e.areqEntryCount=0,e.areqTimer=null,e.eventsQueue={},e.gpvExtraParams={},e.gpvMethod=0,e.iabCategories=null,e.prebidJS={initialized:!1,que:[]},e.prebidPBJS={initialized:!1,que:[]},e.prebidJSAdUnitCode=1,e.gpvAttempt=0,e.waitingForAds=!1,e.debug={},e.conf={},e.initOverrides=[],e.gpvConfLoaded=!1,e.timers=null,e.iiq=null,e.vastWaitFactor=1,e.totalVastRetries=null,e.maxTotalVastRetries=null,e.maxFailedVastRetries=null,e.maxAdStarts=null,e.rollAdStarts=null,e.restTime=null,e.vpaidInitLimit=3,e.autoScheduleReset=!1,e.sizeTolerance=null,e.widthOverwrite=null,e.heightOverwrite=null,e.rawSchedule=null,e.nullSchedule={api:!1,content:{wait:0,mas:0},time:{start:9e9,mas:0},auto:null},e.sessionConfig={mv:"default",pt:null,grh:null},e.eventDispatcher=null,e.flModel=null,e.postRoll=!1,e.roll=0,e.mainAutoplay=!0,e.viewAutoplay=0,e.controlBarType=null,e.clickToPlay=!1,e.vastList={},e.playNextRepeatTimer=new r.a,e.viewStartPlayerInterval=null,e.viewCheckPlayerInterval=null,e.externalViewabilityFunction=null,e.debugLogReason="gpv",e.debugLog="",e.debugLogBuffer="",e.logToHTML=!1,e.submitDebugLogOnPlayerError=!1,e.submitDebugLogOnVastError=!1,e.submitDebugLogForVastId=null,e.unlockedVideos=[],e.domIsReady=!1,e.started=!1,e.paused=!1,e.scheduledPixelSent=!1,e.showBrandMenu=!1,e.demandTypeThrottleMap={},e.sendStringParams=s.g,e.usableTagsSent={},e.curAdStarts=0,e.currentSlotIndex=0,e.hlsConfig={preload:!1,supportCC:!1,cdnPrefix:"cdn"},e.iiqPercentage=0,e.iiqPassPPIDToGoogle=!1,e.iiqEnabled=!1,e.now=Date.now,e.startTime=(new Date).getTime(),e.playerReady=new Promise((function(t){e.playerReadyResolve=function(){return e.domIsReady=!0,t()}})),e}return f(e,t),e.prototype.on=function(t,e){this._internalEventsEmitter.on(t,e)},e.prototype.off=function(t,e){this._internalEventsEmitter.off(t,e)},e.prototype.once=function(t,e){this._internalEventsEmitter.once(t,e)},e.prototype.emit=function(t,e){this._internalEventsEmitter.emit(t,e)},e.prototype.removeAllListeners=function(){this._internalEventsEmitter.removeAllListeners()},Object.defineProperty(e.prototype,"sessionPrice",{get:function(){var t;return(null===(t=this.flModel)||void 0===t?void 0:t.cpm)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"priceTables",{get:function(){var t;return(null===(t=this.sessionConfig)||void 0===t?void 0:t.pt)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schedule",{get:function(){return this.monetize?this.rawSchedule:this.nullSchedule},set:function(t){t.content&&(t.content.type="preRoll"),t.time&&(t.time.type="midRoll"),this.rawSchedule=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ccsModelName",{get:function(){var t,e;return(null===(e=null===(t=this.flModel)||void 0===t?void 0:t.ccs)||void 0===e?void 0:e.name)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPublisherDemand",{get:function(){return this.gpvData.filter((function(t){return t.gtag})).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isIvt",{get:function(){var t;return Object(h.g)(null===(t=this.sessionConfig)||void 0===t?void 0:t.grh)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteOpsId",{get:function(){var t,e;return null===(e=null===(t=this.sessionConfig)||void 0===t?void 0:t.grh)||void 0===e?void 0:e.wolud},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteOpsState",{get:function(){var t,e;return null===(e=null===(t=this.sessionConfig)||void 0===t?void 0:t.grh)||void 0===e?void 0:e.wopt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preRollOrMidRoll",{get:function(){return this.adSlotCurrentType===p.a.BREAKING_ADS?"midRoll":"preRoll"},enumerable:!1,configurable:!0}),e.prototype.findPlayerData=function(t){return Object(o.a)(l.b,t)},e.prototype.isAdContent=function(){var t=this.getContentElement();return t&&t.isAdContent()},e.prototype.getContentElement=function(){return this.content instanceof a.a&&this.content},e}(i.a)},function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c}));var r=function(t,e){void 0===e&&(e=new Date);var n=t instanceof Date?t.getTime():t,r=(e instanceof Date?e.getTime():e)-n;return r/=1e3,Math.round(r)},i=function(t,e){return((t instanceof Date?t.getTime():t)-(e instanceof Date?e.getTime():e))/1e3},o=function(t,e){return((t instanceof Date?t.getTime():t)-(e instanceof Date?e.getTime():e))/1e3/60},a=function(t,e){void 0===e&&(e=new Date);var n=t instanceof Date?t.getTime():t;return(e instanceof Date?e.getTime():e)-n},s=function(t){return i((new Date).getTime(),t)};function c(){var t=new Date;return t.toISOString().replace("Z","").slice(0,-1)+t.getTimezoneOffset()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c}));var r,i=n(28),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t){var e,n,i,a=t.schedule,c={enabled:!1,slotDuration:15,podLimit:3},u=function(){var t;return Math.max((null===(t=a.breakingAds)||void 0===t?void 0:t.interval)||function(){var t,e,n;return Array.isArray(null===(t=null==a?void 0:a.time)||void 0===t?void 0:t.start)?null===(e=null==a?void 0:a.time)||void 0===e?void 0:e.start[0]:null===(n=null==a?void 0:a.time)||void 0===n?void 0:n.start}()||15,2)},d=function(t){var e,n;return(null===(e=a[t])||void 0===e?void 0:e.maxImpressions)||(null===(n=a.content)||void 0===n?void 0:n.mas)||2},l=function(e){var n,r;return{slotImpTimeout:t.info.mobile?null===(n=a[e])||void 0===n?void 0:n.slotImpTimeout:null===(r=a[e])||void 0===r?void 0:r.slotImpTimeoutMobile}},p={enabled:!0,maxImpressions:d(r.PLAYER_START),timeout:7,slotImpTimeout:3,slotImpTimeoutMobile:3,smartPods:c},h={enabled:!0,maxImpressions:d(r.PRE_ROLL),contentItemsBeforeSlot:1,slotImpTimeout:3,slotImpTimeoutMobile:3,smartPods:c},f={enabled:!0,aggressive:!1,maxImpressions:1,interval:u(),smartPods:c};return{timeToFetchAdsBeforeSlot:Math.min(Math.floor(.9*u()),7),playerStart:o(o(o({},p),a.playerStart||{}),l(r.PLAYER_START)),preRoll:o(o(o({},h),a.preRoll||{}),l(r.PRE_ROLL)),breakingAds:o(o({},f),a.breakingAds),sessionImpressionCap:t.sessionImpressionCap,adaptiveAdCount:null===(e=null==t?void 0:t.schedule)||void 0===e?void 0:e.adaptiveAdCount,cacheBasedAuctionConfig:s(t),skipSlotOnAdSkip:null!==(i=null===(n=null==t?void 0:t.schedule)||void 0===n?void 0:n.skipSlotOnAdSkip)&&void 0!==i&&i}}function s(t){var e,n,r,i=(null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.cacheBasedAuction)||{enabled:!1,buffer:0};return{enabled:null!==(r=i.enabled)&&void 0!==r&&r,buffer:i.buffer||0}}function c(t){var e=t.isOutstream?i.a.OUTSTREAM:i.a.INSTREAM,n={context:e,placement:3,plcmt:e===i.a.INSTREAM?2:4};return(t.forceInstream||t.userInteraction)&&(n.placement=1,n.plcmt=1),n}!function(t){t.PLAYER_START="playerStart",t.PRE_ROLL="preRoll",t.BREAKING_ADS="breakingAds"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return _})),n.d(e,"d",(function(){return O})),n.d(e,"f",(function(){return C})),n.d(e,"c",(function(){return P}));var r,i,o,a=n(9),s=n(30),c=n(3),u=n(10),d=n(22),l=7e3;!function(t){t[t.E_REQUEST=1]="E_REQUEST",t[t.E_LOADED=2]="E_LOADED",t[t.E_MIDS=3]="E_MIDS",t[t.E_END=4]="E_END",t[t.E_ADSTART=5]="E_ADSTART",t[t.E_ADSTART_WO_IMPRESSION=6]="E_ADSTART_WO_IMPRESSION",t[t.E_CLICK=7]="E_CLICK",t[t.E_VAST_ERROR=8]="E_VAST_ERROR",t[t.E_ACTUAL_REQUEST=9]="E_ACTUAL_REQUEST",t[t.E_START=10]="E_START",t[t.E_SERVED_AND_START=11]="E_SERVED_AND_START",t[t.E_CONTENT_CLICK=12]="E_CONTENT_CLICK",t[t.E_ADPLAYED=13]="E_ADPLAYED",t[t.E_SCHEDULED=14]="E_SCHEDULED",t[t.E_DETECTED=15]="E_DETECTED",t[t.E_PLAYER_ERROR=16]="E_PLAYER_ERROR",t[t.E_SUBMIT_DEBUG_LOG=17]="E_SUBMIT_DEBUG_LOG",t[t.E_CLIENT_EVENT=18]="E_CLIENT_EVENT",t[t.E_AD_SKIPPED=19]="E_AD_SKIPPED"}(i||(i={})),function(t){t[t.Video=0]="Video",t[t.FlashVpaid=1]="FlashVpaid",t[t.JsVpaid=3]="JsVpaid",t[t.ImaJs=4]="ImaJs",t[t.FlashJsVpaid=5]="FlashJsVpaid",t[t.Spotx=6]="Spotx"}(o||(o={}));var p=((r={})[i.E_REQUEST]={url:"/vpx/requesti"},r[i.E_LOADED]={url:"/vpx/loadedi"},r[i.E_MIDS]={url:"/vpx/midsi"},r[i.E_END]={url:"/vpx/endi",immediate:!0},r[i.E_ADSTART]={url:"/vpx/starti",immediate:!0},r[i.E_ADSTART_WO_IMPRESSION]={url:null,immediate:!0},r[i.E_CLICK]={url:"/vpx/click",immediate:!0},r[i.E_VAST_ERROR]={url:"/vpx/errori",immediate:!1},r[i.E_START]={url:"/ppx/starti"},r[i.E_SERVED_AND_START]={url:"/ppx/served_and_starti"},r[i.E_ADPLAYED]={url:"/ppx/adplayedi"},r[i.E_SCHEDULED]={url:null},r[i.E_DETECTED]={url:null},r[i.E_PLAYER_ERROR]={url:"/ppx/errori"},r[i.E_CONTENT_CLICK]={url:null},r[i.E_ACTUAL_REQUEST]={exclude:!0,server:"a",url:"/areq"},r[i.E_SUBMIT_DEBUG_LOG]={exclude:!0,url:"sdl"},r[i.E_CLIENT_EVENT]={exclude:!0,url:"/lpx/v1"},r);var h={subid:"sid",domain:"domain",domainDetected:"dd",widthDetected:"wd",heightDetected:"hd",sessionId:"se",playerVersion:"pv",timeFromStart:"s",flashSupport:"f",detect:"sa",vastId:"v",playerId:"p",demandId:"dmid",memUsed:"m",time:"t",time2:"t2",duration:"d",quartile:"qd",gpvTime:"gt",fpwReadyTime:"ft",domReadyTime:"dt",gpvM:"gm",roundNo:"r",gpvOrdNo:"gpvn",totalMemS:"tm",vastType:"y",actualVastType:"yy",state:"st",gpvAttempt:"ga",errorCode:"en",errorMessage:"em",mediaURL:"mu",logStartRequest:"ls",logLoadRequest:"lr",cedatoxPlayerId:"cxp",cedatoxVastId:"cxv",chosenVastId:"cv",parentPlayerId:"pp",retryTestGroup:"rtg",gpvCookie:"gpvck",cookie:"ck",eventCookie:"evck",pricing:"pricing",currency:"currency",impType:"impType"},f=["playerId","vastId","demandId"],v=["cedatoxPlayerId","cedatoxVastId","chosenVastId","parentPlayerId"],m=["eventCookie","subid","domain","sessionId","domainDetected","gpvCookie","detect"],A=m.concat(["timeFromStart"]);function y(t,e,n){for(var r=0,i=t.length;r<i;r++)if(void 0!==e[t[r]]&&null!==e[t[r]])switch(t[r]){case"flashSupport":n[t[r]]=e[t[r]]?"1":"0";break;default:n[t[r]]=e[t[r]]}}function b(t,e,n,r){y(t,e,r),y(t,n,r)}function g(t){var e={};for(var n in t)t.hasOwnProperty(n)&&void 0!==h[n]&&"function"!=typeof h[n]&&(e[h[n]]=t[n]);return e}function E(t,e){for(var n in e)e.hasOwnProperty(n)&&null!=h[n]&&"function"!=typeof h[n]&&t.push([n,String(e[n])].join("="))}function _(t,e,n,r){if(e&&i[e]){var o=p[e];o&&o.url&&!o.exclude&&function(t,e,n,r,o){var a=n.url,c=n.immediate,d=n.server;try{var p=c,h=t||{};r=r||{},o=o||{};var m=[];E(m,h),E(m,r),E(m,o);var y=Object(u.h)(t.startTime),g={name:a.substring(a.lastIndexOf("/")+1),common:{},extra:{}};switch(b(A,h,{},g.common),g.common.timeFromStart=y,e){case i.E_REQUEST:b(f.concat(v),r,o,g.extra);break;case i.E_LOADED:b(["memUsed","time","vastType","actualVastType"].concat(f,v),r,o,g.extra),p=p||null!=r&&null!=r.chosenVastId;break;case i.E_MIDS:b(["duration","quartile"].concat(f,v),r,o,g.extra);break;case i.E_END:b(["duration"].concat(f,v),r,o,g.extra);break;case i.E_CLICK:b(f.concat(v),r,o,g.extra);break;case i.E_ADSTART:b(["time","roundNo","gpvOrdNo","vastType","actualVastType","retryTestGroup","cookie","widthDetected","heightDetected","pricing","currency","impType"].concat(f,v),r,o,g.extra);break;case i.E_ADSTART_WO_IMPRESSION:b(f.concat(v),r,o,g.extra);break;case i.E_VAST_ERROR:b(["errorCode","errorMessage","mediaURL","logStartRequest","logLoadRequest","time"].concat(f,v),r,o,g.extra);break;case i.E_START:case i.E_SERVED_AND_START:b(["playerId"],h,o,g.extra);break;case i.E_SCHEDULED:b(["playerId","fpwReadyTime","gpvTime","domReadyTime","gpvM","gpvAttempt"],h,o,g.extra),g.extra.time=y;break;case i.E_DETECTED:b(["playerId","widthDetected","heightDetected"],h,o,g.extra);break;case i.E_ADPLAYED:b(["playerId","gpvOrdNo"],h,o,g.extra),g.extra.time=y;break;case i.E_CONTENT_CLICK:b(["playerId"],h,o,g.extra);break;case i.E_PLAYER_ERROR:b(["playerId"],h,o,g.extra),b(["errorCode","errorMessage"],r,o,g.extra)}var _=a.substring(0,a.lastIndexOf("/")),O=t.serverHost(d||t.eventServer)+_;if("/ppx"==_)return void T(t,O,g);if("/vpx"!=_)return;var C=function(){return function t(e,n){if(n){var r=e.eventsQueue[n].events;if(r.length){r.length;try{e.sendStringParams({url:[n,"/multiple-events"].join(""),params:I(r),usePost:1==e.multipleEventMethod})}catch(t){}}e.eventsQueue[n].events=[]}else for(var i in e.eventsQueue)e.eventsQueue.hasOwnProperty(i)&&t(e,i)}(t,O)};t.eventsQueue[O]?(t.eventsQueue[O].events.length>=7&&(t.eventsQueue[O].timer.cancel(),C()),t.eventsQueue[O].events.push(g)):t.eventsQueue[O]={timer:new s.a(l),events:[g]},1==t.eventsQueue[O].events.length&&t.eventsQueue[O].timer.start().then(C).catch((function(){})),p&&(t.eventsQueue[O].timer.trigger(),t.areqEntryCount>0&&S(t))}catch(t){}}(t,e,o,n,r),t.playerEvents&&t.playerEvents.emit(i[e],t,n,r)}}function T(t,e,n){try{var r=[e,"/",n.name,"?"].join(""),i=g(Object(c.c)({},n.common,n.extra));e=Object(a.b)(r,i),t.sendPixel(e)}catch(t){}}function I(t){for(var e={common:{},eventsList:[],eventsData:[]},n=0,r=t.length;n<r;n++){var i={},o=t[n];if(0==n)e.common=o.common;else for(var a in o.common)o.common.hasOwnProperty(a)&&o.common[a]!=e.common[a]&&(i[a]=o.common[a]);for(var a in o.extra)o.extra.hasOwnProperty(a)&&(i[a]=o.extra[a]);e.eventsList.push(o.name),e.eventsData.push(g(i))}var s=e.eventsList.join(","),u=[];for(n=0;n<e.eventsData.length;n++){var d=e.eventsData[n],l=[];for(var p in d)d.hasOwnProperty(p)&&l.push([p,d[p]].join(":"));u.push(l.join(",").replace(new RegExp("\\|","g"),""))}return Object(c.c)({events:s,data:u.join("|")},g(e.common))}function O(t,e,n,r){try{if(t.areqEntryCount>=10?S(t):0==t.areqEntryCount&&(t.areqTimer=setTimeout((function(){return S(t)}),l)),r)null==t.areqEventsQueue[r]&&(t.areqEventsQueue[r]=0,t.areqEntryCount+=1),t.areqEventsQueue[r]+=1;else{var i=t.areqEventsQueue[e];null==i&&(i=t.areqEventsQueue[e]={}),null==i[n]&&(i[n]=0,t.areqEntryCount+=1),i[n]+=1}}catch(t){}}function S(t){Object(d.c)("flushActualRequests",{players:t},(function(){var e={};b(m,t,{},e);var n=g(e),r=1,o=function(t,e){return n[t+r]=e},a=function(t){1!=t&&o("c",t),r++};for(var s in t.areqEventsQueue)if(t.areqEventsQueue.hasOwnProperty(s))if("number"==typeof t.areqEventsQueue[s]){(d=t.areqEventsQueue[s])>0&&(o("dmid",s),a(d))}else{var c=t.areqEventsQueue[s];for(var u in c){var d;if(c.hasOwnProperty(u))(d=c[u])>0&&(o("p",s),o("v",u),a(d))}}var l=p[i.E_ACTUAL_REQUEST];t.sendStringParams({url:t.serverHost(l.server)+l.url,params:n,usePost:1==t.areqMethod}),clearTimeout(t.areqTimer),t.areqEntryCount=0,t.areqEventsQueue={}}))}function C(t,e,n){t.serverEvents.supplyEvent({name:"SupplyError",errorCode:e,message:n}),_(t,i.E_PLAYER_ERROR,{errorCode:e,errorMessage:n},{})}function P(t,e,n){void 0===n&&(n=1)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a.b})),n.d(e,"e",(function(){return P})),n.d(e,"h",(function(){return p.g})),n.d(e,"i",(function(){return p.h})),n.d(e,"c",(function(){return p.b})),n.d(e,"b",(function(){return p.a})),n.d(e,"f",(function(){return p.e})),n.d(e,"g",(function(){return p.f})),n.d(e,"d",(function(){return p.c}));var r,i,o,a=n(25),s=n(87),c=n(57),u=n(55),d=n(11),l=n(1),p=n(35),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=[u.b.LOADED,u.b.USER_ACTION_COMPLETE,u.b.CMP_UI_SHOWN],v=function(t,e){!function(t,e){t.__tcfapi("addEventListener",2,(function(t,n){e(t,n)}))}(t,(function(t,n){if(function(t,e){if(!e){var n='Consent (tcf): was not able to add listener, "addEventListener" returned success='.concat(e);return l.a.error(n,new Error(n),{gdprListenerResponse:t}),!1}if(!d.a.object(t)){n='Consent (tcf): was not able to add listener, "addEventListener" returned unexpected response';return l.a.error(n,new Error(n),{gdprListenerResponse:t}),!1}return!0}(t,n))if(f.includes(t.eventStatus))e(t);else{var r="Consent (tcf): received unexpected event";l.a.error(r,new Error(r),{gdprListenerResponse:t})}}))},m=function(t){function e(e,n){var r=t.call(this,a.a.TCF,n)||this;return r._window=e,r}return h(e,t),e.prototype.listen=function(){!function(t,e,n){Object(p.i)(t,e,"__tcfapi",n)}(this._window,this.location,this.startListening.bind(this))},e.prototype.startListening=function(){v(this._window,this.onConsentEvent.bind(this))},e.prototype.stopListening=function(){!function(t,e){e&&t.__tcfapi("removeEventListener",2,(function(t){!t&&l.a.error('Consent (tcf): was not able to remove listener, "removeEventListener" returned success='.concat(t))}),e)}(this._window,this.listenerId)},e.prototype.onConsentEvent=function(t){this.listenerId=t.listenerId,this.setUpdatedConsentData({consentString:t.tcString,apiResponseData:t,consentType:a.b.TCF})},e}(c.a),A=n(69),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=[A.b.LISTENER_REGISTERED,A.b.SIGNAL_STATUS,A.b.SECTION_CHANGE,A.b.CMP_STATUS,A.b.DISPLAY_STATUS],g=function(t,e){!function(t,e){t.__gpp("addEventListener",(function(t,n){e(t,n)}))}(t,(function(t,n){if(function(t,e){if(!e){var n='Consent (gpp): was not able to add listener, "addEventListener" returned success='.concat(e);return l.a.error(n,new Error(n),{gppListenerResponse:t}),!1}if(!d.a.object(t)){n='Consent (gpp): was not able to add listener, "addEventListener" returned unexpected response';return l.a.error(n,new Error(n),{gppListenerResponse:t}),!1}return!0}(t,n)){var r=t.pingData;if(b.includes(t.eventName))if(r&&r.cmpStatus==A.a.LOADED)e(t);else{var i="Consent (gpp): cmp status ".concat(null==r?void 0:r.cmpStatus);l.a.error(i,new Error(i),{gppListenerResponse:t})}else{i="Consent (gpp): received unexpected event";l.a.error(i,new Error(i),{gppListenerResponse:t})}}}))},E=function(t){function e(e,n){var r=t.call(this,a.a.GPP,n)||this;return r._window=e,r}return y(e,t),e.prototype.listen=function(){!function(t,e,n){Object(p.i)(t,e,"__gpp",n)}(this._window,this.location,this.startListening.bind(this))},e.prototype.startListening=function(){g(this._window,this.onConsentEvent.bind(this))},e.prototype.stopListening=function(){!function(t,e){e&&t.__gpp("removeEventListener",(function(t){!t&&l.a.log('Consent (gpp): was not able to remove listener, "removeEventListener" returned success='.concat(t))}),e)}(this._window,this.listenerId)},e.prototype.onConsentEvent=function(t){var e=t.pingData;this.listenerId=t.listenerId,this.setUpdatedConsentData({consentString:e.gppString,apiResponseData:t,consentType:a.b.GPP})},e}(c.a),_=n(85),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(t){function e(e){return t.call(this,a.a.NO_CONSENT,e)||this}return T(e,t),e.prototype.listen=function(){var t=this;setTimeout((function(){t.setUpdatedConsentData({consentString:"",apiResponseData:{},consentType:a.b.NO_CONSENT})}),400)},e}(c.a),O=function(t){return new I(t)},S=function(t,e,n){var r=[];return e.isAmp&&Object(p.d)(n)?r.push(function(t,e,n){return e.isAmpVideoIframe?Object(s.a)(e.NgEvents,n):Object(_.a)(t,n)}(t,e,n)):Object(p.g)(n.country)?r.push(function(t,e){return i||(i=new m(t,e)),i}(t,n)):Object(p.h)(n)?(r.push(function(t,e){return o||(o=new E(t,e)),o}(t,n)),r.push(O(n))):r.push(O(n)),l.a.log("Consent: Selected consent clients '".concat(r.map((function(t){return t.type})).join(", "),"'"),{location:n,amp:{isAmp:e.isAmp,isAmpSticky:e.isAmpVideoIframe},selectedClients:r.map((function(t){return t.type}))}),r},C=function(){function t(t){var e;this.consentAPIs=t,this.availableConsents=((e={})[a.b.TCF]=null,e[a.b.GPP]=null,e[a.b.NO_CONSENT]=null,e)}return t.prototype.listen=function(){this.listenForConsentChanges()},t.prototype.listenForConsentChanges=function(){var t=this;this.consentAPIs.forEach((function(e){e.onConsentResponse(t.onConsentResponse.bind(t)).listen()}))},t.prototype.onConsentResponse=function(t){this.availableConsents[t.consentType]=t,this.onConsentCb&&this.onConsentCb(t)},t.prototype.onConsent=function(t){return this.onConsentCb=t,this},t.prototype.getAvailableConsents=function(){return this.availableConsents},t}(),P=function(t,e,n){var r=S(t,e,n);return new C(r)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n(20),i=n(1);function o(t,e,n,o,a){for(var s=e.players,c=[],u=5;u<arguments.length;u++)c[u-5]=arguments[u];try{return n.apply(a,c)}catch(e){return Object(r.f)(s,3,t+" - JS exception: "+e.message),i.a.error("Safeguard: ".concat(t),e),o&&o(e)}}function a(t,e,n,r,i){for(var a=function(r){var a=function(t,e){return e.playerDataAction?function(n){return e.playerDataAction(t.players,t.playerData,n)}:e.playerAction?function(n){return e.playerAction(t.players,n)}:function(t){return e.action(t)}}(n,r);t.addEventListener(r.type,(function(i){return o("".concat(e," ").concat(r.type),n,a,r.catcher,t,i)}),i)},s=0,c=r;s<c.length;s++){a(c[s])}}function s(t,e){return function(n){n&&!0!==n.cancelled&&(t&&Object(r.f)(t,3,e+" - JS exception: "+n.message),i.a.error("Safecatch: ".concat(e),n))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"g",(function(){return _})),n.d(e,"f",(function(){return I})),n.d(e,"m",(function(){return O})),n.d(e,"i",(function(){return C})),n.d(e,"j",(function(){return P})),n.d(e,"e",(function(){return w})),n.d(e,"h",(function(){return R})),n.d(e,"q",(function(){return k})),n.d(e,"r",(function(){return j})),n.d(e,"b",(function(){return x})),n.d(e,"n",(function(){return U})),n.d(e,"l",(function(){return M})),n.d(e,"k",(function(){return V})),n.d(e,"p",(function(){return F})),n.d(e,"c",(function(){return q})),n.d(e,"o",(function(){return G})),n.d(e,"d",(function(){return Y}));var r=n(11),i=n(70),o=n(81),a=n(60),s=n(19),c=n(64),u=n(18),d=n(39),l=n(67),p=n(10),h=n(9);function f(t){var e="";return r.a.str(null==t?void 0:t.domain)&&(e=function(t){if(r.a.url(t))try{return Object(h.p)(Object(h.p)(new URL(t).hostname,"www.",""),".","_")}catch(t){return""}return t.replace(".","_").replace(".","_")}(null==t?void 0:t.domain)),e}var v,m=function(t){return t.isMlSession?t.gpidIndex.toString():""},A=n(63),y=n(41),b=function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},g={"auto-play":[1,2,5,6],"click-to-play":[2,3,5,6]},E={api:[1,2],mimes:["video/mp4","video/webm","application/javascript"],protocols:[1,2,3,4,5,6,7,8,11,12,13,14],playbackmethod:[2,6],linearity:1,minduration:1,startdelay:0,maxduration:60,pos:7,boxingallowed:1,skip:0,skipafter:5,skipmin:0};!function(t){t.IAB="iab",t.STATIC="static"}(v||(v={}));function _(t,e){var n,i=e.domain,o=e.page,a=Object(d.a)(t,"ortb2"),s=function(t){var e,n,i,o=null===(i=null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.externalConfig)||void 0===n?void 0:n.ortb2)||void 0===i?void 0:i.site;return r.a.object(o)?o:{}}(t),c=W(t),u=H(t),h={site:b({ref:r.a.str(o)?o:String(o),domain:r.a.str(i)?i:String(i),page:r.a.str(o)?o:String(o)},s)};return t.isAmp&&(h.site={}),t.isApp&&(null===(n=t.appParams)||void 0===n?void 0:n.domain)&&(h.site.domain=t.appParams.domain),h.source={ext:{omidpn:l.a,omidpv:l.b}},a&&Object(p.n)(a)&&Object.assign(h,a),c&&z(h,"badv",c),u&&z(h,"bcat",u),h}function T(t,e){var n=Object(s.c)({forceInstream:t.isInStream,isOutstream:t.isOutstream,userInteraction:t.userInteraction}),r=E.api.concat(t.reportViewability?[7]:[]),i=b(b({},E),{api:r});return i.placement=n.placement,i.plcmt=n.plcmt,i.context=t.isOutstream?"outstream":n.context,i.skip=function(t,e){var n;if(null==e?void 0:e.disableSkip)return 0;if((null==e?void 0:e.isCcsEnabled)&&e.ccsModifications){var r=Object(y.e)(e);return null!==r?r:0}return(null===(n=null==t?void 0:t.skipConfig)||void 0===n?void 0:n.enabled)?1:0}(t,e),i.playerSize=function(t){return[[Math.floor(t.width),Math.floor(t.height)]]}(t),t.muted||g[t.playbackMode]&&(i.playbackmethod=g[t.playbackMode]),i}function I(t,e){var n,r,i=T(t,e),o=null!==(n=Object(y.d)(e))&&void 0!==n?n:{};return{video:b(b(b(b(b({},i),t.ortbVideoObject),null==e?void 0:e.video),o),null===(r=t.mlRandomParams)||void 0===r?void 0:r.video)}}function O(t,e){var n=I(t,e);return function(t,e){var n=e.prebidConfig.bidder;n===A.a.SOVRN&&(t.video.protocols=[1,2,3,5,6,7,8]),n===A.a.SMAATO&&(delete t.video.startdelay,e.video&&Object(p.n)(e.video)&&(t.video=b(b({},t.video),e.video))),n===A.a.PUBMATIC&&(t.video=b(b({},t.video),{maxbitrate:1500,minbitrate:1}))}(n,e),n}function S(t,e){var n=Object(d.a)(t,"gpid"),r=function(t){return"XCO/".concat((null==t?void 0:t.playerId)+m(t),"/").concat(f(t))}(t);return e.isPubDemand&&(r=n||function(t){var e;return"".concat((null===(e=null==t?void 0:t.publisher)||void 0===e?void 0:e.id)+m(t),"/").concat(null==t?void 0:t.excoPlayerId,"/").concat(f(t))}(t)),t.gpidIndex++,r}function C(t,e){var n=t.ortbExtraParams.rwdd,r={secure:1,ext:{gpid:S(t,e)}};return n&&(r.rwdd=n),t.isApp&&(r.instl=0),r}var P=function(t,e){return Object(a.b)(t,e)};function w(t){var e={cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{syncEnabled:!1!==t.userIdentities,aliasSyncEnabled:!1!==t.userIdentities,userIds:Object(i.b)(t),idPriority:{uid2:["liveIntentId","uid2"]},auctionDelay:300,filterSettings:{iframe:{bidders:"*",filter:"include"}}}};return!1!==t.userIdentities&&Object(o.c)(t)&&(e.realTimeData={dataProviders:[o.b]}),{config:e,src:"https://cdn.ex.co/player/prebid/latest/pb-7.2.0.js",pbsSrc:"https://ps.ex.co/openrtb2/auction"}}function R(t,e){var n,i=(null===(n=null==t?void 0:t.content)||void 0===n?void 0:n.currentItem)||{},o=i.id,a=void 0===o?"":o,s=i.title,u=void 0===s?"":s,l=i.url,h=void 0===l?"":l,f=Y(t),v={site:{content:{id:r.a.str(a)?a:String(a),title:r.a.str(u)?u:String(u),url:r.a.str(h)?h:String(h)}}};f&&r.a.array(f)&&J(t)&&(v.site.content.cat=f);var m=Object(d.a)(t,"ortb2"),A=Object(c.b)();return A&&A.excoCookie&&(v.user=function(t){return{id:"".concat(t.excoCookie)}}(A)),"rtb"===e.originalType&&(A&&A.syncCookie&&(v.user=v.user||{},v.user.ext=v.user.ext||{},v.user.ext.exco=v.user.ext.exco||{},v.user.ext.exco=function(t){return t.syncCookie}(A)),v.ext=v.ext||{},v.ext.exco=v.ext.exco||{},v.ext.exco=b(b({},v.ext.exco),function(t){var e={};return t.initialWidth&&t.initialHeight&&(e.width=t.initialWidth,e.height=t.initialHeight),t.pageLoadUid&&(e.sid=t.pageLoadUid),t.version&&(e.pv=t.version),e}(t))),t.isApp&&(v.app=N(t,a,u,h),delete v.site),m&&Object(p.n)(m)&&Object.assign(v,m),v}function D(t){return t.gpvData.filter((function(t){return"c"!==t.id})).filter((function(t){return"prebid"===t.type&&"rtb"!==t.originalType})).filter((function(e){var n;return!(!t.isApp&&!e.pbserver)&&!["exco","colossusssp"].includes(null===(n=null==e?void 0:e.prebid)||void 0===n?void 0:n.bidder)})).map((function(t){var e;return null===(e=null==t?void 0:t.prebid)||void 0===e?void 0:e.bidder}))}function L(t,e,n){return{id:r.a.str(t)?t:String(t),title:r.a.str(e)?e:String(e),url:r.a.str(n)?n:String(n)}}function N(t,e,n,r){var i,o,a,s,c,u,d,l;return{id:null===(i=t.appParams)||void 0===i?void 0:i.storeId,name:null===(o=t.appParams)||void 0===o?void 0:o.name,bundle:null===(a=t.appParams)||void 0===a?void 0:a.bundle,storeurl:null===(s=t.appParams)||void 0===s?void 0:s.storeUrl,ver:null===(c=t.appParams)||void 0===c?void 0:c.version,cat:[null===(u=t.appParams)||void 0===u?void 0:u.category],content:L(e,n,r),domain:(null===(d=t.appParams)||void 0===d?void 0:d.domain)||(null===(l=t.appParams)||void 0===l?void 0:l.bundle)}}function k(t,e){var n,r=(null===(n=null==t?void 0:t.content)||void 0===n?void 0:n.currentItem)||{},i=r.id,o=void 0===i?"":i,a=r.title,s=void 0===a?"":a,c=r.url,u=void 0===c?"":c;e.ortb2.app=N(t,o,s,u),e.ortb2.user=function(t){return{id:t.appParams.ifa}}(t),e.ortb2.device=function(t){return{ifa:t.appParams.ifa}}(t),delete e.ortb2.site}function j(t,e){t.s2sConfig=function(t){var e,n,r={accountId:"1",bidders:D(t),adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:t.prebidConfig.pbsSrc,noP1Consent:t.prebidConfig.pbsSrc},timeout:3e3};return!1!==t.userIdentities&&(r.syncEndpoint=null===(n=null===(e=t.prebidConfig)||void 0===e?void 0:e.pbsSrc)||void 0===n?void 0:n.replace("openrtb2/auction","cookie_sync")),r}(e)}var x=function(t){if(null!==t.prebidMaxDuration&&void 0!==t.prebidMaxDuration&&0!==t.prebidMaxDuration){var e={maxduration:t.prebidMaxDuration};t.prebidConfig.params.video=b(b({},t.prebidConfig.params.video),e)}},U=function(t,e){t.floorPrice=t.isPubDemand?e:Math.max(e||0,.3)};function M(t,e){e.auctionId&&e.bidderCode&&t[e.auctionId]&&(t[e.auctionId][e.bidderCode]={start:(new Date).getTime(),done:null,responded:null,respondedFromStart:0,doneFromStart:0})}function V(t,e){e.auctionId&&(t[e.auctionId]={},M(t,e))}function F(t,e,n){if(e.auctionId&&e.bidderCode&&t[e.auctionId]){var r=t[e.auctionId][e.bidderCode];r&&(r[n]=(new Date).getTime(),r["".concat(n,"FromStart")]=Object(u.f)(r[n],r.start||(new Date).getTime()))}}function B(t){return function(e){return"ad_unit_".concat(e.vastId.toString())===t.bids[0].adUnitCode}}function q(t,e){var n,r=function(t){var n=e.find(B(t));n&&(n.requestTimeRecords.responded=(new Date).getTime(),n.requestTimeRecords.respondedFromStart=Object(u.f)(n.requestTimeRecords.responded,n.requestTimeRecords.start))},i=function(t){var n=e.find(B(t));n&&(n.requestTimeRecords.done=(new Date).getTime(),n.requestTimeRecords.doneFromStart=Object(u.f)(n.requestTimeRecords.done,n.requestTimeRecords.start))},o=function(t){var n=e.find(B(t));n&&(n.requestTimeRecords.start=(new Date).getTime())},a=function(){t.offEvent("bidRequested",o),t.offEvent("bidderDone",i),t.offEvent("bidResponse",r),t.offEvent("auctionEnd",a)};null===(n=null==t?void 0:t.que)||void 0===n||n.push((function(){t.onEvent("bidRequested",o),t.onEvent("bidderDone",i),t.onEvent("bidResponse",r),t.onEvent("auctionEnd",a)}))}function G(t){var e={};return t.forEach((function(t){var n=t.allowAlternateBidderCodes,r=void 0!==n&&n,i=t.allowedAlternateBidderCodes,o=void 0===i?[]:i;r&&o.length>0&&(e[t.prebidConfig.bidder]={allowAlternateBidderCodes:r,allowedAlternateBidderCodes:o})})),e}var H=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.iabCategories)||void 0===r?void 0:r.bcat)||null},W=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.iabCategories)||void 0===r?void 0:r.badv)||null},Y=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.iabCategories)||void 0===r?void 0:r.cat)||(null==t?void 0:t.iabCategories)||null},J=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.iabCategories)||void 0===r?void 0:r.sendCat)||!1},z=function(t,e,n){t[e]=r.a.array(n)?n:[n]}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s}));var r=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=function(){}),new Promise((function(r){return setTimeout((function(){n(t),r(e)}),t)}))},a=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=function(){}),Promise.race([t,o(e,n,r)])};function s(t,e){return void 0===e&&(e={timeout:3e3,delay:0,data:null}),r(this,void 0,void 0,(function(){return i(this,(function(n){return[2,new Promise((function(n){var r=Date.now(),i=null,o=function(){if(i&&clearTimeout(i),t()||Date.now()-r>e.timeout){var a={time:Date.now()-r};e.data&&(a.data=e.data),e.delay?setTimeout((function(){return n(a)}),e.delay):n(a)}else i=setTimeout((function(){return o()}),100)};o()}))]}))}))}},function(t,e,n){"use strict";var r,i;n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o})),function(t){t.TCF="tcf",t.GPP="gpp",t.NO_CONSENT="no-consent"}(r||(r={})),function(t){t.TCF="tcf",t.GPP="gpp",t.AMP="amp",t.AMP_VIDEO="amp-video",t.NO_CONSENT="no-consent"}(i||(i={}));var o=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IS","IT","LI","LV","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","GB","CH"]},function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d}));var r=n(47),i=n(5),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){return void 0===e&&(e={}),o(o({type:t.originalType||t.type||"vast",vastURL:t.vastURL,demandId:t.vastId,bidder:t.bidder,cpm:t.floorPrice},e),{auctionId:t.transactionId,subAuctionId:t.subTransactionId})}function s(t,e){void 0===e&&(e={});var n=a(t,e);return function(t,e){t.vastURL=e.prebidVastURL||e.vastURL,t.vastXml=e.getVastXmlString()||e.vastXml,t.cpm=Object(r.c)(e)}(n,t),n}function c(t,e){return void 0===e&&(e={}),a(t,e)}function u(t,e){var n,r,a,s;return void 0===e&&(e={}),{ad:o({type:t.adType,demand:{id:t.demandId,type:Object(i.h)(t),url:null===(n=t.gpvDemand)||void 0===n?void 0:n.url,isPubDemand:t.isPubDemand,bidder:t.bidder,isShakranistim:Object(i.A)(t),cpm:t.floorPrice,vast:{id:t.vastId,url:t.vastURL,xml:t.getVastXmlString(),creative:{id:null===(r=t.creative)||void 0===r?void 0:r.id,type:null===(a=t.creative)||void 0===a?void 0:a.type,duration:null===(s=t.creative)||void 0===s?void 0:s.duration}}}},e)}}function d(t){var e={},n=0,r=0;return t.forEach((function(t){e[t.bidder]={id:t.vastId,floor:t.floorPrice,transactionId:t.transactionId,subTransactionId:t.subTransactionId,vastUrl:t.vastURL},n=t.transactionId,r=t.subTransactionId})),{bidders:e,transactionId:n,subTransactionId:r}}},function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return d}));var r=n(109);function i(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function o(t){if(r){var e=t.ownerDocument.createElement("style");e.type="text/css",e.innerHTML=r,function(){var e=t.ownerDocument;try{if(t&&t.getRootNode&&(e=t.getRootNode()),e!==t.ownerDocument)return e}catch(t){}return e.getElementsByTagName("head")[0]}().appendChild(e),r=null}}function a(t){return"".concat("__exco_").concat(t)}function s(t,e){return void 0===e&&(e="__exco_"),Array.isArray(t)?t.filter((function(t){return!!t})).map((function(t){return e+t})).join(" "):e+t}function c(t,e,n){void 0===n&&(n="__exco_"),t.id=n+e,u(t,e,n)}function u(t,e,n){void 0===n&&(n="__exco_");var r=s(e,n);i(r).test(t.className)||(t.className+=" "+r)}function d(t,e,n){void 0===n&&(n="__exco_");var r=i(s(e,n)),o=t.className.replace(r,"");t.className!=o&&(t.className=o)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"k",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"b",(function(){return v})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return A})),n.d(e,"i",(function(){return y})),n.d(e,"h",(function(){return g})),n.d(e,"j",(function(){return E}));var r,i,o=n(37),a=n(22),s=n(3),c=n(43),u=n(1);function d(t,e,n,r){if(t.contentDefinition||(t.contentDefinition=e?function(t,e){var n;return{video:{url:e.url,clickUrl:e.click,loop:!!e.cl,shuffle:null!=e.shuffle?!!e.shuffle:null,controlBar:null!=e.co?e.co:t.controlBar},image:{url:e.loader_image_url,position:null!==(n=e.loader_image_position)&&void 0!==n?n:""},variants:e.variants,wait:e.wait}}(t,e):{video:{},image:{},wait:!1}),n&&l(t,n),r)try{Object(s.d)(s.a,t.contentDefinition.video,{url:r.Url,clickUrl:r.ClickUrl}),Object(s.d)(s.a,t.contentDefinition.image,{url:r.Image,position:r.ImagePosition}),r.External&&(t.contentDefinition.external=r.External)}catch(t){}}function l(t,e){var n,r=t.contentDefinition;(n=e)&&b(n)&&!Object(c.b)()&&!t.isAmp&&Object(c.d)(t.hlsConfig).catch((function(t){u.a.error("Failed to load hls script",t)}));try{Object(s.d)(s.a,r,e)}catch(t){}}function p(t,e){l(t,e),t.content instanceof o.a&&t.content.setContent(t.contentDefinition)}function h(t,e){t.content instanceof o.a&&t.content.setVideoVariant(e)}function f(t,e){t.content instanceof o.a&&t.content.setVideoFormat(e)}function v(t,e){t.content instanceof o.a&&t.content.seekContent(e)}function m(t,e){t.content instanceof o.a&&t.content.setCurrentVideo(e)}function A(t,e){t.contentDefinition.external=e,t.content&&y(t)}function y(t){return Object(a.c)("createContentPlayer",{players:t,log:!0},(function(){t.content=new o.a(t,t.contentDefinition)})),t.content}!function(t){t.RSS="rss",t.SPLIT_RSS="split-rss"}(r||(r={})),function(t){t.INSTREAM="instream",t.OUTSTREAM="outstream"}(i||(i={}));var b=function(t){var e=t.video,n=void 0===e?{}:e;return null==n?void 0:n.list.some((function(t){var e;return null===(e=t.url)||void 0===e?void 0:e.includes(".m3u8")}))};function g(t,e){if(0===e||t>=e)return 0;var n=t/e*4;return 25*Math.floor(n)}var E=function(t){var e,n;return(null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.content)||void 0===n?void 0:n.hlsFixedResolutionLevels)||{}}},function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=function(){var t;try{var e=i(),n=null===(t=null==e?void 0:e.navigator)||void 0===t?void 0:t.userActivation;if(n)return n.hasBeenActive||n.isActive}catch(t){}return!1};function i(){for(var t=window;t.frameElement;)t=t.parent;return t}var o=function(t){try{if("string"!=typeof t)return null;var e=i(),n=t.replace("window.","").split(".").reduce((function(t,n,r){return r?t[n]:e[n]}),null);return null!=n?n:null}catch(t){}return null},a=function(t,e,n){return void 0===e&&(e={}),new Promise((function(r,i){var o=n&&n.document?n.document:document,a=o.getElementsByTagName("head")[0],s=o.createElement("script");s.src=t,s.onload=function(){return r()},s.onerror=function(t){return i(t)};var c=e.async,u=e.defer;c&&(s.async=!0),u&&(s.defer=!0),a.appendChild(s)}))}},function(t,e,n){"use strict";var r=function(){function t(t){void 0===t&&(t=1/0),this.msec=t,this.startedAt=null,this.elapsed=null}return t.delay=function(e,n){void 0===e&&(e=0);var r=0;return"function"==typeof e?n=e:r=e,new t(r).start(n)},t.Seconds=function(e){return new t(1e3*e)},t.prototype.cancel=function(){this.resolve=null,this.pause(),this.reject&&(this.reject({cancelled:!0}),this.reject=null)},t.prototype.reset=function(t){return this.pause(),this.msec=t,this},t.prototype.Seconds=function(t){return this.reset(1e3*t)},t.prototype.start=function(t){this.cancel();var e=this.hold(t);return this.timerId=setTimeout(this.resolve,this.msec),this.startedAt=Date.now(),this.elapsed=0,e},t.prototype.pause=function(){null!=this.timerId&&(clearTimeout(this.timerId),this.timerId=null,null!=this.startedAt&&(this.elapsed=(this.elapsed||0)+Math.max(0,Date.now()-this.startedAt)),this.startedAt=null)},t.prototype.resume=function(){this.rewind(Math.max(0,this.msec-(this.elapsed||0)))},t.prototype.hold=function(t){var e=this,n=new Promise((function(t,n){e.resolve=t,e.reject=n})).then((function(){return e.pause()}));return t?n.then(t):n},t.prototype.rewind=function(t){this.pause(),this.resolve&&(this.timerId=setTimeout(this.resolve,null!=t?t:this.msec),this.startedAt=Date.now())},t.prototype.trigger=function(){this.reject=null,this.resolve&&this.resolve(),this.cancel()},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return p})),n.d(e,"c",(function(){return v}));var r,i=n(9),o=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function s(){try{return new XMLHttpRequest}catch(t){return null}}function c(t){return(window.DOMParser?function(t){return(new window.DOMParser).parseFromString(t,"text/xml")}:"undefined"!=typeof ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(){return null})(t)}function u(t){return(null==t.responseXML||t.responseXML.xml)&&t.responseText?c(t.responseText):t.responseXML}function d(t,e){return p({url:t,method:"POST",postData:Object(i.c)(e,!0),contentType:"application/x-www-form-urlencoded"})}function l(t){var e=t.url,n=void 0===e?"":e,r=t.params,o=void 0===r?null:r,a=t.usePost;void 0!==a&&a?d(n,o):(new Image).src=Object(i.b)(n,o)}function p(t){var e=t.url,n=void 0===e?"":e,i=t.withCredentials,o=void 0!==i&&i,a=t.method,c=void 0===a?"GET":a,u=t.postData,d=void 0===u?null:u,l=t.contentType,p=t.timeout,h=void 0===p?0:p,f=t.xhrObject;return new Promise((function(t,e){var i=f||s(),a=function(o,a){var s=!1;if(!i)return e({xhr:i,code:r.NO_XHR_SUPPORT,data:{message:"no supported xhr object"}}),null;try{i.open(c,n,!0)}catch(t){return e({xhr:i,code:r.OPEN,data:t}),null}"withCredentials"in i&&(i.withCredentials=o),"timeout"in i&&(i.timeout=h,i.ontimeout=function(){e({xhr:i,code:r.TIMEOUT,data:{message:"no response from xhr within ".concat(h/1e3," sec.")}})}),i.onload=function(){s||(i.status>=400?e({xhr:i,code:r.STATUS,data:{message:i.statusText,status:i.status}}):t(i))},i.onerror=function(){s=!0},i.onloadend=function(){a(s)},d&&i.setRequestHeader&&l&&i.setRequestHeader("Content-type",l);try{i.send(d)}catch(t){e({xhr:i,code:r.SEND,data:t})}};a(o,(function(t){o&&t?a(!1,(function(t){t&&e({xhr:i,code:r.CORS,data:{result:-1,message:"cross origin exception"}})})):e({xhr:i,code:r.CORS,data:{result:-1,message:"cross origin exception"}})}))}))}function h(t){return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:e="",r.label=1;case 1:return r.trys.push([1,3,,5]),[4,t.json()];case 2:return n=r.sent(),e=null==n?void 0:n.error,[3,5];case 3:return r.sent(),[4,t.text()];case 4:return e=r.sent(),[3,5];case 5:return[2,e]}}))}))}!function(t){t[t.NO_XHR_SUPPORT=1]="NO_XHR_SUPPORT",t[t.OPEN=2]="OPEN",t[t.SEND=3]="SEND",t[t.CORS=4]="CORS",t[t.STATUS=5]="STATUS",t[t.TIMEOUT=6]="TIMEOUT",t[t.UNKNOWN=7]="UNKNOWN",t[t.LAST=10]="LAST"}(r||(r={}));var f=function(t){var e;return null===(e=t.headers.get("content-type"))||void 0===e?void 0:e.includes("application/json")};function v(t){return o(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,fetch(t)];case 1:return(e=o.sent()).ok&&f(e)?[3,3]:(n=Error.bind,i=(r="Error @http#fetchJSON: status code ".concat(e.status,", message: ")).concat,[4,h(e)]);case 2:throw new(n.apply(Error,[void 0,i.apply(r,[o.sent()])]));case 3:return[2,e.json()]}}))}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"d",(function(){return R})),n.d(e,"b",(function(){return N})),n.d(e,"e",(function(){return U})),n.d(e,"f",(function(){return M})),n.d(e,"c",(function(){return F}));var r=n(11),i=n(10),o=n(23),a=n(9);function s(t,e){var n,r=Object(a.s)({win:t,inAmpFrame:e.isAmp}),i=r.bestLocation,o=r.hasTopLocation,s=r.reachedTop,c=r.bestCanonicalUrl;try{n=function(t){return t.top.document.referrer}(t)}catch(t){}var u=function(t,e,n){return t||e?n:null}(s,o,i),d=function(t){return t||null}(c),l=function(t,e,n){return Object(a.d)(Object(a.e)(t,e))||n}(d,t,u);return{ref:n,canonicalUrl:d,page:l,domain:Object(a.n)(l)||null}}var c=function(t){return s(window,t)},u=n(60),d=n(63),l=n(19),p=n(2),h=n(1),f=n(6),v=n(5),m=function(){return(m=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var A=n(59),y=n(24),b=n(26),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},E=function(){function t(t,e,n){void 0===n&&(n={});var r=this;this.promise=new Promise((function(t){return r._resolve=t})),this.prebidAuctionTimes={},this.bids={requested:[],resolved:[],filled:[]},this._handlers=["auctionInit","auctionEnd","bidRequested","bidRejected","bidResponse","bidWon","bidderDone","bidderError","bidTimeout"],this._done=!1,this._startTS=Date.now(),this._onBidResponseCallbacks=[],this._onAuctionDoneCallbacks=[],this._prebidJS=t,this._timeout=n.timeout,this._prebidToPlayerData=e,this._prebidJS.que.push((function(){r._handlers.forEach((function(t){r[t]=r[t].bind(r),r._prebidJS.onEvent(t,r[t])}))}));var i=[new Promise((function(t){return r._AuctionEndResolve=t}))];this._timeout&&i.push(Object(y.b)(this._timeout,"timeout")),Promise.race(i).then((function(t){h.a.info("Prebid Auction resolved - ".concat((null==t?void 0:t.data)||t),(Date.now()-r._startTS)/1e3),r.resolve()})),this._handlePreResolved(),0===Object.keys(e).length&&setTimeout((function(){return r.auctionEnd()}),10)}return t.prototype.onBid=function(t){return this._onBidResponseCallbacks.push(t),this.bids.filled.length&&this.bids.filled.forEach((function(e){return t(e)})),this},t.prototype.onDone=function(t){return this._onAuctionDoneCallbacks.push(t),this},t.prototype.destroy=function(){var t=this;this._prebidJS&&this._prebidJS.offEvent&&this._handlers.forEach((function(e){t._prebidJS.offEvent(e,t[e])}))},t.prototype.resolve=function(){var t=this;if(!this._done){var e=this.bids.requested.filter((function(e){return!t.bids.filled.find((function(t){return t.adUnitCode===e.adUnitCode}))}));e.forEach((function(e){return e.playerData=t._prebidToPlayerData[e.adUnitCode]})),this._onAuctionDoneCallbacks.forEach((function(t){return t(e)})),this._resolve(this.bids.filled),this._done=!0}},t.prototype.auctionInit=function(){this._handlePreResolved()},t.prototype.auctionEnd=function(){try{var t=Object.keys(this.prebidAuctionTimes||{})[0];t&&h.a.remote("Prebid Auction",{auctionId:t,auctionDemands:Object.values(this.prebidAuctionTimes||{})[0],category:{main:f.a.MONETIZATION,sub:f.b.AUCTION}})}catch(t){h.a.error("Error in logging prebid auction times",t)}this.destroy(),this._AuctionEndResolve("auctionEnd")},t.prototype.bidRequested=function(t){var e=this;t.auctionId&&(this.prebidAuctionTimes[t.auctionId]?Object(o.l)(this.prebidAuctionTimes,t):Object(o.k)(this.prebidAuctionTimes,t)),t.bids.forEach((function(t){!1===e.bids.requested.includes(t)&&e.bids.requested.push(t)}))},t.prototype.bidderDone=function(t){var e,n=this,r=t.bids.filter((function(t){return n._prebidToPlayerData[t.adUnitCode]}));r.length&&(Object(o.p)(this.prebidAuctionTimes,t,"done"),(e=this.bids.resolved).push.apply(e,r))},t.prototype.bidResponse=function(t){!1===this.bids.filled.includes(t)&&(Object(o.p)(this.prebidAuctionTimes,t,"responded"),function(t,e){var n;if(isNaN(+e.cpm))throw new Error("no pricing provided in the bid");e.playerData=t,e.vast=e.vastXml?"data:;base64,".concat(btoa(e.vastXml)):e.vastUrl,t.vastURL=e.vast,t.vastXml=e.vastXml,t.prebidVastURL=e.vastUrl,t.prebidConfig.floorPrice=t.floorPrice,t.advertiserDomains=null===(n=e.meta)||void 0===n?void 0:n.advertiserDomains,t.impressionData={currency:e.currency,impType:e.bidder,pricing:+e.cpm},t.prebidVastURL&&Object(A.a)(t,"adstart",{url:t.prebidVastURL,rate:null});"exco"===e.bidder&&function(t,e){e.nurl&&Object(A.a)(t,"adstart",{url:e.nurl,rate:null});e.burl&&Object(A.a)(t,"adstart",{url:e.burl,rate:null})}(t,e)}(this._prebidToPlayerData[t.adUnitCode],t),this.bids.filled.push(t),this._onBidResponseCallbacks.forEach((function(e){return e(t)})))},t.prototype.bidWon=function(){},t.prototype.bidderError=function(t){var e,n=this,r=t.bidderRequest,i=t.error,o=r.bids.filter((function(t){return n._prebidToPlayerData[t.adUnitCode]}));(e=this.bids.resolved).push.apply(e,o),o.forEach((function(t){var e=n._prebidToPlayerData[t.adUnitCode];e&&h.a.error("Monetization: prebid bidder error",i,g(g({},Object(b.b)(e)),{errorDetails:{status:i.status,statusText:i.statusText,content:i.content,readyState:i.readyState,responseText:i.responseText,responseType:i.responseType,responseURL:i.responseURL},category:{main:f.a.MONETIZATION,sub:f.b.PREBID}}))}))},t.prototype.bidTimeout=function(t){var e,n=this,r=[];t.forEach((function(t){r=r.concat(t)})),(e=this.bids.resolved).push.apply(e,r),r.forEach((function(t){var e=n._prebidToPlayerData[t.adUnitCode];e&&h.a.error("Monetization: prebid bidder timeout",new Error("Prebid bidder timeout"),g(g({transactionId:p.b.auctionId},Object(b.b)(e)),{location:p.b.location,timeOut:w,category:{main:f.a.MONETIZATION,sub:f.b.PREBID}}))}))},t.prototype.bidRejected=function(){},t.prototype._handlePreResolved=function(){var t=this;Object.entries(this._prebidToPlayerData).forEach((function(e){var n=e[0],r=e[1];r.cachedBids&&(t.bidRequested({bids:[{adUnitCode:n}]}),r.cachedBids[0]&&t.bidResponse(r.cachedBids[0]))}))},t}(),_=function(t,e,n,r){void 0===r&&(r={});var i=new E(t,e,r);return t.que.push((function(){t.requestBids({adUnits:n,timeout:r.timeout,bidsBackHandler:function(){}})})),i};var T=n(0),I=n(70),O=n(21),S=function(){return(S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},C=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},P=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},w=3e3;function R(t,e,n){var r=e.prebidConfig,i=Date.now(),o=new Promise((function(t,e){var n=setInterval((function(){window.CEDATO_BID&&(clearInterval(n),t()),(Date.now()-i)/1e3>=10&&e({message:"gave up on waiting prebid script"})}),250)})),a={width:t.width,height:t.height,domain:t.domain,playerData:e,gdprConsent:n};return o.then((function(){return window.CEDATO_BID.requestBid(r,a)}))}function D(t,e,n){var r=[];return e.forEach((function(e){var i,a,s,c,u;if((null===(i=e.prebidConfig)||void 0===i?void 0:i.bidder)&&!((null===(a=e.prebidConfig)||void 0===a?void 0:a.bidder)in n)&&(n["ad_unit_".concat(e.vastId.toString())]=e,!e.cachedBids||0===(null===(s=e.cachedBids)||void 0===s?void 0:s.length))){var d=S({},e.prebidConfig),l=function(t,e){var n,r=Object(o.m)(t,e),i=Object(o.i)(t,e),a=S(S({code:"ad_unit_".concat(e.vastId.toString()),renderer:{url:"example.com/publishersCustomRenderer.js",render:function(){}},mediaTypes:r},t.prebidConfig.unit||{}),{ortb2Imp:i,bids:[]});return"outstream"===(null===(n=null==r?void 0:r.video)||void 0===n?void 0:n.context)&&(a.renderer={url:"",render:function(){}}),h.a.log("Ad unit for demand id ".concat(e.vastId),S(S({},a),{auctionId:e.transactionId,subAuctionId:e.subTransactionId,id:e.vastId})),a}(t,e);t.isMlSession&&(d.disableUserId=null===(c=t.mlRandomParams)||void 0===c?void 0:c.disableUserId),d.getFloor=(u=e.floorPrice,function(){return{floor:u,currency:"USD"}}),d.floorPrice=e.floorPrice,B(d),l.bids.push(d),r.push(l)}})),t.prebidJSAdUnitCode++,t.prebidJS.que.push((function(){return t.prebidJS.addAdUnits(r)})),r}var L=function(t,e){var n,a,s=e.prebidConfig.params,c=s.config,A=void 0===c?{}:c,y=s.schain,b={isPubDemand:e.isPubDemand,schainDisabled:e.schainDisabled,schainOverride:e.schainOverride};if(y&&r.a.str(y)?A.schain={validation:"relaxed",config:Object(u.a)(y)}:A.schain=Object(o.j)(t,b),Object(u.d)(null===(n=A.schain)||void 0===n?void 0:n.config)&&!Object(v.y)(e)){var g="Ad request with missing supply chain.";h.a.error(g,new Error(g),{schainConfig:b,category:{main:f.a.MONETIZATION,sub:f.b.AD_REQUEST}})}return e.isPubDemand&&(e.prebidConfig.params.pubDemand=!0),function(t,e){var n=t.prebidConfig;if(r.a.str(n.params.schain)&&(n.params.schain=Object(u.a)(n.params.schain),Object(u.d)(n.params.schain)&&!Object(v.y)(t))){var o="Ad request missing supply chain since an empty supply chain was specifically configured for the demand";h.a.error(o,new Error(o),{demandId:t.demandId,configuredSchain:n.params.schain,category:{main:f.a.MONETIZATION,sub:f.b.AD_REQUEST}})}if(n.bidder===d.a.YIELDMO)n.params.video={protocols:[2,3,5,6],api:[1,2]};else if(n.bidder!==d.a.PULSEPOINT||Object(i.n)(n.params.schain))if(n.bidder===d.a.YAHOO)e.yahooAds={mode:"video"};else if(n.bidder===d.a.TRIPLELIFT){1!==Object(l.c)({forceInstream:p.b.isInStream,isOutstream:p.b.isOutstream,userInteraction:p.b.userInteraction}).placement&&(Object(i.n)(n.params.video)?n.params.video=m(m({},n.params.video),{context:"outstream"}):n.params.video={context:"outstream"})}else n.bidder===d.a.SMARTX&&(n.params.bidfloorcur="USD",n.params.cur=["USD"]);else n.params.video={},n.params.schain={ver:"1.0",nodes:[],complete:0}}(e,A),Object(o.b)(e),A.ortb2=Object(o.h)(t,e),t.isMlSession&&(e.prebidConfig.params.video=null===(a=null==t?void 0:t.mlRandomParams)||void 0===a?void 0:a.video),h.a.log("Bidder config for demand id ".concat(e.vastId),S(S(S({},A),e.prebidConfig.params),{auctionId:e.transactionId,subAuctionId:e.subTransactionId,id:e.vastId})),A};function N(t,e,n){var r;return void 0===n&&(n=!1),C(this,void 0,void 0,(function(){var i,a,s,c;return P(this,(function(u){switch(u.label){case 0:return[4,F(t,n)];case 1:if((i=u.sent()).que.push((function(){i.bidderSettings=Object(o.o)(e)})),s=D(t,e,a={}),!(null===(r=t[n?"prebidPBJS":"prebidJS"])||void 0===r?void 0:r.configWasSet))try{U(i,t,n)}catch(t){}return c=t.consentListener.getAvailableConsents(),i.que.push((function(){return i.setConfig(j(c))})),Object.values(a).forEach((function(e){i.que.push((function(){var n;i.setBidderConfig({bidders:[null===(n=e.prebidConfig)||void 0===n?void 0:n.bidder],config:S({},L(t,e))})}))})),Object(o.c)(i,Object.values(a)),[4,Object(I.c)({players:t,prebid:i,isPBS:n})];case 2:return u.sent(),[2,_(i,a,s,{timeout:1e3*t.prebidConfig.timeout})]}}))}))}function k(t){var e;if(!t)return{};var n=null===(e=t.apiResponse)||void 0===e?void 0:e.pingData;return{gpp:{cmpApi:o.a.STATIC,consentData:S(S({},n),{pingData:n})}}}function j(t){var e,n=null==t?void 0:t[O.a.GPP],r=null==t?void 0:t[O.a.TCF];return n||r?{consentManagement:S(S({},k(n)),(e=r,e?{gdpr:{cmpApi:o.a.STATIC,consentData:{getTCData:e.apiResponse}}}:{}))}:{}}function x(t,e){var n;return t.isAmp?t.domain:t.isApp&&(null===(n=t.appParams)||void 0===n?void 0:n.domain)?t.appParams.domain:e}var U=function(t,e,n){void 0===n&&(n=!1),t.que.push((function(){return t.setConfig(function(t,e){void 0===e&&(e=!1);var n=t.consentListener.getAvailableConsents(),r=c(t),i=r.domain,a=r.page,s=S(S(S({bidderTimeout:w},t.prebidConfig.config),j(n)),{ortb2:Object(o.g)(t,{domain:i,page:a}),pageUrl:x(t,a),minBidCacheTTL:0,eventHistoryTTL:60,enableTIDs:!0,performanceMetrics:!1});return(e||t.isApp)&&Object(o.r)(s,t),t.isApp&&Object(o.q)(t,s),s}(e,n))})),!1!==e.userIdentities&&t.que.push((function(){return t.refreshUserIds({submoduleNames:[]})})),n||t.que.push((function(){return e.prebidJS.configWasSet=!0}))},M=function(t,e,n){var r=(void 0===n?{}:n).pageUrl,i=c(e),a=i.domain,s=i.page,u=void 0===s?r:s;t.que.push((function(){return t.setConfig({ortb2:Object(o.g)(e,{domain:a,page:u}),pageUrl:x(e,u)})}))},V={},F=function(t,e){void 0===e&&(e=!1);var n=e?"prebidPBJS":"prebidJS",r=e?"loadingPBJSPromise":"loadingPromise",o=function(r){t[n].initialized=!0,r.expbjs.setConfig&&U(r.expbjs,t,e),e?T.b.emit(T.a.INTERNAL.PREBID.SERVER.LOADED):T.b.emit(T.a.INTERNAL.PREBID.LOADED)};if(t[n].initialized)return Promise.resolve(t[n]);if(V[r])return V[r];var a=e?t.prebidConfig.src.replace("expb","expb-ps"):t.prebidConfig.src;return V[r]=new Promise((function(e,r){Object(i.k)({src:a,target:t.rootDivElem,timeout:3,windowRefs:{expbjs:t[n],console:window.console}}).then((function(t){o(t),e(t.expbjs)})).catch((function(t){t.win&&t.win.expbjs?(o(t.win),e(t.win.expbjs)):r(null)}))})),V[r]};var B=function(t){Object.entries(t.params).forEach((function(e){var n=e[0],i=e[1];i&&r.a.str(i)&&(t.params[n]=String(i).trim())}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return c}));var r=n(9);function i(t,e){var n,r,i,o=e||document.createElement("video");return o.id="",o.preload=(null==t?void 0:t.preload)||"auto",o.muted=null===(n=null==t?void 0:t.muted)||void 0===n||n,o.volume=null!==(r=null==t?void 0:t.volume)&&void 0!==r?r:0,o.playsInline=null===(i=null==t?void 0:t.playsInline)||void 0===i||i,o}function o(t){var e=document.createElement("video");return e.muted=!0,e.volume=t.volume,e.playsInline=!0,e}function a(t){return t&&t.canvas}function s(t,e,n){e&&n&&(a(e)?e.setAttribute("src",n):e.src=Object(r.t)(t.protocol,n))}function c(t){var e=t.error,n="";switch(e.code){case e.MEDIA_ERR_ABORTED:n="Video playback aborted.";break;case e.MEDIA_ERR_NETWORK:n="A network error.";break;case e.MEDIA_ERR_DECODE:n="The video playback decode error.";break;case e.MEDIA_ERR_SRC_NOT_SUPPORTED:n="The video format is not supported.";break;default:n="An unknown error occurred."}return n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return void 0===t&&(t=0),!(t<0||t>100)&&100*Math.random()<t}},function(t,e,n){"use strict";n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"h",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return f})),n.d(e,"i",(function(){return A})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return b})),n.d(e,"c",(function(){return g}));var r=n(25),i=n(11),o=n(55),a=n(1),s=(n(69),function(t){return(t||"").toUpperCase()}),c=function(t){return e=t,!!(null==(n=r.c)?void 0:n.includes(s(e)));var e,n},u=function(t){return c(t.country)||d(t)},d=function(t){return l(t)||p(t)},l=function(t){return"US"===s(t.country)},p=function(t){return"CA"===t.country},h=function(t){var e,n;return((null===(n=null===(e=null==t?void 0:t.apiResponse)||void 0===e?void 0:e.pingData)||void 0===n?void 0:n.applicableSections)||[]).join(",")},f=function(t,e){var n,r,a=null===(r=null===(n=e.apiResponse)||void 0===n?void 0:n.vendor)||void 0===r?void 0:r.consents;return i.a.empty(a)?o.c.NOT_ACCEPTED:(null==a?void 0:a.hasOwnProperty(t))?a[t]?o.c.ACCEPTED:o.c.NOT_ACCEPTED:o.c.NOT_INCLUDED},v=function(t,e){var n=null==t?void 0:t[e];return!!n&&"function"==typeof n},m=function(t,e,n){a.a.log("Consent: ".concat(t," API loaded after ").concat(n," attempts"),{location:e,attemptCount:n})},A=function(t,e,n,r){if(v(t,n))return m(n,e,1),r();var i=function(t,e){var n=t.onTick,r=t.onLimitReached,i=e.intervalMs,o=e.maxAttempts,a=void 0===o?1/0:o;if(0!==a){var s=0,c=setInterval((function(){n(s+=1),s>=a&&(null==r||r(),u())}),i);return{stop:u}}function u(){clearInterval(c)}}({onTick:function(o){v(t,n)&&(m(n,e,o),r(),i.stop())},onLimitReached:function(){}},{intervalMs:200,maxAttempts:300})},y=function(t){var e=null==t?void 0:t.consentString;return!i.a.nullOrUndefined(e)&&!i.a.emptyString(e)},b=function(t){var e,n,r=null===(n=null===(e=null==t?void 0:t.apiResponse)||void 0===e?void 0:e.vendor)||void 0===n?void 0:n.consents;return y(t)&&!i.a.empty(r)},g=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.consent)||void 0===r?void 0:r.includeGamAndTam)||!1}},function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return S}));var r=n(5),i=n(11),o=function(t){return{prebid:60,rtb:60,vast:0,tam:0,gam:t.isPubDemand?0:60}},a=n(64),s=n(32),c=n(23),u=n(21),d=n(68),l=n(72),p=n(44),h=n(19),f=n(41),v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},m="publisher",A="network",y={MCD_SERVER_ERROR:"mcd_server_error",MCD_OPPORTUNITY_RETRY:"mcd_opportunity_retry",MCD_IVT_OPPORTUNITY:"mcd_ivt_opportunity",MCD_OPPORTUNITY:"mcd_opportunity",MCD_TCF_API_AVAILABLE:"mcd_tcf_api_available",MCD_GPP_API_AVAILABLE:"mcd_gpp_api_available",MCD_AMP_VIDEO_API_AVAILABLE:"mcd_amp_video_api_available",MCD_AMP_API_AVAILABLE:"mcd_amp_iframe_api_available",MCD_AUCTION:"mcd_auction",MCD_AD_CLICKED:"mcd_ad_clicked",MCD_AD_COMPLETE:"mcd_ad_complete",MCD_AD_ERROR:"mcd_ad_error",MCD_AD_REQUEST:"mcd_ad_request",MCD_AD_RESPONSE:"mcd_ad_response",MCD_AD_BLOCKED:"mcd_ad_blocked",MCD_INIT_AD:"mcd_init_ad",MCD_START_AD:"mcd_start_ad",MCD_AD_IMPRESSION:"mcd_player_ad_impression",MCD_VIEWABLE_AD_IMPRESSION:"mcd_viewable_ad_impression",MCD_AD_PROGRESS:"mcd_ad_progress",MCD_MONETIZED_PLAYER_LOAD:"mcd_monetized_player_load",MCD_PLAYER_AD_SKIPPED:"mcd_player_ad_skipped",MCD_SLOT_STARTED:"mcd_slot_started",MCD_CONSENT_RESPONSE:"mcd_consent_response",MCD_LIVE_INTENT:"mcd_live_intent"},b=[y.MCD_AD_REQUEST,y.MCD_AD_ERROR,y.MCD_SLOT_STARTED],g=["no <Ad> element","The VAST response document is empty."],E=function(t,e){return function(t){return t===y.MCD_AD_REQUEST}(t)?e.floorPrice:e.publishersAdType===d.a.HOUSE?0:e.cpm},_=function(t){return b.includes(t)};var T=function(t,e){var n,i,a,u=Object(r.w)(t),d=Object(r.z)(t),m=null==t?void 0:t.getCreativeId(),A=Object(c.d)(e),y={id:t.vastId,type:t.originalType||t.type,bidder:t.bidder,duration:t.duration,did:t.demandId,transactionId:t.transactionId,subTransactionId:t.subTransactionId,maxDuration:o(t)[t.type],flamingoScore:t.flamingoDemand,requestTimeRecords:t.requestTimeRecords,publisherAdType:t.publishersAdType,demandTtl:t.cacheTTL||null,plcmt:Object(h.c)(e).plcmt};if(u||d){y.video=v(v(v({},Object(c.f)(e,t).video),null===(i=null===(n=null==t?void 0:t.prebidConfig)||void 0===n?void 0:n.params)||void 0===i?void 0:i.video),{tmax:s.a}),e.isMlSession&&(y.randomParams=JSON.stringify(v(v({},null==e?void 0:e.mlRandomParams),{floor:t.floorPrice}))),A&&A.length&&(y.cat=A);var b=Object(f.e)(t);null!=b&&(y.skip=b);var g=Object(f.c)(t);null!=g&&(y.maxDuration=g)}return function(t,e){var n,i;return!!(null===(n=null==t?void 0:t.liveintentConfig)||void 0===n?void 0:n.enabled)&&(!(!Object(r.w)(e)&&!Object(r.z)(e))&&Object(l.d)(null==t?void 0:t.liveintentConfig,null===(i=null==e?void 0:e.prebidConfig)||void 0===i?void 0:i.bidder))}(e,t)&&(y.listatus=Object(l.e)(e),y.liveIntentExco=!!(null===(a=null==e?void 0:e.liveintentConfig)||void 0===a?void 0:a.isExcoId)),m&&(y.creativeId=m),Object(p.c)(e)&&(y.customReport=Object(p.a)(e,t)),y},I=function(t){return{slot:{type:t.adSlotCurrentType,pods:t.currentSlotMaxImps,index:t.currentSlotIndex}}},O=function(t,e,n){var i,o,a,s,c,u=Object(r.g)({demandId:t.demandId});return{demandId:u.demandId,supplyId:u.supplyId,demandIdX:u.demandIdX,supplyIdX:u.supplyIdX,demandIdDX:u.demandIdDX,supplyIdDX:u.supplyIdDX,adSubType:t.subType,cpm:E(n,t),adSourceOwner:t.isPubDemand?m:A,rollType:e.adSlotCurrentType,vb:e.isInView,mv:null===(i=null==e?void 0:e.flModel)||void 0===i?void 0:i.name,mcdContentId:"preRoll"===e.adSlotCurrentType?null===(a=null===(o=null==e?void 0:e.content)||void 0===o?void 0:o.getNextContent())||void 0===a?void 0:a.id:null===(c=null===(s=null==e?void 0:e.content)||void 0===s?void 0:s.currentItem)||void 0===c?void 0:c.id,muted:e.muted}},S=function(){function t(t){var e=this;this._config=t,this._externalEventDispatcher=t.overrides.eventDispatcher,Object(a.c)((function(t){var n,r;e._ids=t,e._externalEventDispatcher.updateBaseAttributes(((n={})[a.a.UID]=null===(r=e._ids)||void 0===r?void 0:r.excoCookie,n))}))}return t.prototype.send=function(t,e){void 0===e&&(e={}),_(t)&&function(t,e){void 0===t&&(t={}),t.extraData=v(v({},t.extraData),{sampling:Math.round(100/e)})}(e,this._config.reporting.eventSamplingRate),this.shouldSendEvent(t)&&this._externalEventDispatcher.send(t,e)},t.prototype.addBaseAttribute=function(t,e){i.a.fn(this._externalEventDispatcher.addBaseAttribute)&&this._externalEventDispatcher.addBaseAttribute(t,e)},t.prototype.addExtraData=function(t){i.a.fn(this._externalEventDispatcher.addExtraData)&&this._externalEventDispatcher.addExtraData(t)},t.prototype.sendSlotStartedEvent=function(t){this.send(y.MCD_SLOT_STARTED,{extraData:v({},I(t))})},t.prototype.sendRequestEvent=function(t,e){var n=function(t){var e,n=null===(e=t.consentListener)||void 0===e?void 0:e.getAvailableConsents(),r={gpp:!1,tcf:!1},i=null==n?void 0:n[u.a.TCF],o=null==n?void 0:n[u.a.GPP];return Object(u.f)(o)&&(r.gpp=!0),Object(u.g)(i)&&(r.tcf=!0),r}(e);this.sendDemandEvent(y.MCD_AD_REQUEST,t,e,{userConsent:n})},t.prototype.sendResponseEvent=function(t,e){this.sendDemandEvent(y.MCD_AD_RESPONSE,t,e)},t.prototype.sendAuctionStartEvent=function(t){this.send(y.MCD_AUCTION,{extraData:t})},t.prototype.sendErrorEvent=function(t,e,n){g.includes(e)||this.sendDemandEvent(y.MCD_AD_ERROR,t,n,{msg:e})},t.prototype.sendInitAdEvent=function(t,e){this.sendDemandEvent(y.MCD_INIT_AD,t,e)},t.prototype.sendStartAdEvent=function(t,e){this.sendDemandEvent(y.MCD_START_AD,t,e,v({},I(e)))},t.prototype.sendAdCompleteEvent=function(t,e){this.sendDemandEvent(y.MCD_AD_COMPLETE,t,e)},t.prototype.sendAdClickedEvent=function(t,e){this.sendDemandEvent(y.MCD_AD_CLICKED,t,e)},t.prototype.sendAdProgressEvent=function(t,e,n){this.sendDemandEvent(y.MCD_AD_PROGRESS,t,n,{progress:e})},t.prototype.sendAdImpressionEvent=function(t,e){this.sendDemandEvent(y.MCD_AD_IMPRESSION,t,e,v({},I(e)))},t.prototype.sendAdSkipEvent=function(t,e){this.sendDemandEvent(y.MCD_PLAYER_AD_SKIPPED,t,e)},t.prototype.sendViewableAdImpressionEvent=function(t,e){this.sendDemandEvent(y.MCD_VIEWABLE_AD_IMPRESSION,t,e,v({},I(e)))},t.prototype.getDemandExtraData=function(t,e,n){return void 0===e&&(e={}),v(v(v({},T(t,n)),function(t){return{cache:Object(r.o)(t),mediaType:t.adType,buyer:t.adSystems?t.adSystems.join(","):void 0,advertiserDomains:t.advertiserDomains,bidbird:!!(null==t?void 0:t.cachedBids)||void 0,ccs:t.isCcsEnabled?t.ccsModifications:void 0}}(t)),e)},t.prototype.shouldSendEvent=function(t){return!_(t)||this._config.reqSampled},t.prototype.sendDemandEvent=function(t,e,n,r){void 0===r&&(r={}),this.send(t,{extraData:this.getDemandExtraData(e,r,n),enrichedData:O(e,n,t)})},t.prototype.sendConsentAvailabilityEvent=function(t,e,n){void 0===n&&(n={}),this.send(t,{extraData:v({location:e},n)})},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var r,i,o=n(28),a=n(27),s=n(17),c=n(8),u=n(22),d=n(10),l=n(33),p=n(43),h=n(16),f=n(77),v=n(0),m=n(40),A=n(9),y=n(1),b=n(18),g=n(6),E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},_=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(t){t[t.ABORT=20]="ABORT",t[t.NETWORK_ERROR=9]="NETWORK_ERROR"}(r||(r={})),function(t){t.MEDIA_REMOVED="media was removed",t.BACKGROUND_PAUSED="background media was paused",t.NEW_LOAD_REQUEST="new load request",t.NEW_PAUSE_REQUEST="call to pause",t.ABORT="operation was aborted",t.ABORT_BY_UA="aborted by the user agent"}(i||(i={}));var T=function(t){return{id:t.id,title:t.title,url:t.url,fallbackUrl:t.fallbackUrl,fetchingErrorCount:t.fetchingErrorCount,formattedUrls:t.formattedUrls,duration:t.duration}},I=function(t,e){delete t.stack,y.a.error("Content: failed to load",t,{details:E({},e),category:{main:g.a.CONTENT}})},O=function(t){var e=t.message,n=t.hlsErrorData,r=t.extraData,i=n.error;delete i.stack;var o={details:{contentUrl:r.contentUrl,currentItem:r.currentItem,fatal:n.fatal,hlsErrorDetails:n.details||"",hlsErrorMessage:i.message,hlsErrorType:n.type||"",isHlsSupported:r.isHlsSupported,time:r.time},category:{main:g.a.CONTENT,sub:g.b.HLS}};n.fatal?y.a.error(e,i,o):y.a.warn(e,o)},S=function(t,e){y.a.remote("Content: time to load",{details:E({time:Object(b.f)(Date.now(),t)},e),category:{main:g.a.CONTENT}})},C=function(){function t(t,e){var n=this;this.list=[],this.currentVideoIndex=0,this.loop=!1,this.visible=!0,this.started=!1,this.paused=!1,this.unlocked=!1,this.playing=!1,this.playable=!1,this.completed=!1,this.variantsList=[],this.selectedVariant=0,this.variantSearchPattern=/(?=\.mp4$)/,this.waitForSchedule=!1,this.waitForAd=!1,this.hadAd=function(){return n.waitForAd=!1},this.blocked=function(){return n.waitForSchedule||n.waitForAd},this.videoChanged=!1,this.preloadedVideos=new Map,this.isRetry=!1,this.forcedPlayed=!1,this.quartileChange={old:0,new:0},this.playbackSpeed=1,this.selectedQualityLevel=null,this.hls=null,this.isLoaded=!1,this.players=t,this.selectedFormat="hls",this.init(e),this.create()}return Object.defineProperty(t.prototype,"relevantContentItem",{get:function(){return this._isContentAboutToChange()?this.getNextContent():this.getCurrentItem()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relevantContentItemIndex",{get:function(){return this._isContentAboutToChange()?this.getNextIndex():this.currentVideoIndex},enumerable:!1,configurable:!0}),t.prototype.getRelevantCustomParams=function(){var t;return null===(t=this.relevantContentItem)||void 0===t?void 0:t.customParams},t.prototype.getRelevantCategories=function(){var t;return null===(t=this.relevantContentItem)||void 0===t?void 0:t.categories},t.prototype.getRelevantKeywords=function(){var t;return null===(t=this.relevantContentItem)||void 0===t?void 0:t.keywords},t.prototype.getRelevantTags=function(){var t;return null===(t=this.relevantContentItem)||void 0===t?void 0:t.tags},t.prototype.getNextContent=function(){return this.list[this.getNextIndex()]||this.list[0]},t.prototype._isContentAboutToChange=function(){var t=this.getProgress(),e=t.time,n=t.duration;return!(!n||!e)&&n-e<=8},t.prototype.getNextIndex=function(t){return void 0===t&&(t=this.currentVideoIndex),t<this.list.length-1?t+1:this.loop?0:null},t.prototype.getPreviousIndex=function(t){return void 0===t&&(t=this.currentVideoIndex),t>0?t-1:this.loop?this.list.length-1:null},Object.defineProperty(t.prototype,"isLiveStream",{get:function(){var t;return(null===(t=this.hls)||void 0===t?void 0:t.isLiveStream)&&!!this.hls.getLiveSyncPosition()||!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHlsSource",{get:function(){return Object(A.k)(this.currentVideoSrc)&&!!this.hls},enumerable:!1,configurable:!0}),t.prototype.init=function(t){null!=t.video.shuffle&&(this.shuffle=t.video.shuffle),null!=t.video.loop&&(this.loop=t.video.loop),this.list=this.getList(t.video),this.clickUrl=t.video.clickUrl,t.variants&&!this.players.usejsv&&(this.variantsList=t.variants.list||this.variantsList,this.selectedVariant=t.variants.selected||this.selectedVariant,this.variantSearchPattern=t.variants.searchPattern||this.variantSearchPattern),this.waitForAd=t.wait,this.list.length>0?this.videoChanged=!0:this.completed=!0,this.players.schedule.content.skipContent&&this.setMasPerContent(this.players,this.list)},t.getListFromUrls=function(t){return("string"==typeof t?t.split(","):t).map((function(t){return{url:t}}))},t.prototype.getList=function(e){var n=[];e.list?n=e.list:e.url&&(n=t.getListFromUrls(e.url)),this.initFetchingErrorCount(n);var r=null!=e.startIndex&&e.startIndex<n.length?e.startIndex:0;if(this.shuffle)if(null!=e.startIndex){var i=n[r];n.splice(r,1),(n=Object(d.q)(n)).splice(r,0,i)}else n=Object(d.q)(n);return this.currentVideoIndex=r,n},t.prototype.initFetchingErrorCount=function(t){t.forEach((function(t){t.fetchingErrorCount=0}))},t.prototype.create=function(){this.container=this.createContainer(),this.players.divElem&&this.players.divElem.appendChild(this.container),Object(u.a)(this.container,"contentClick",{players:this.players},[{type:"click",action:this.onClick.bind(this)}]);var t=this.players.playbackMode===m.a.CLICK_TO_PLAY?"none":"metadata";this.video=this.createVideoEl(t,this.players.muted),this.addVideoElementToContainer(this.video),this.setCurrentVideoSrc(),this.preloadVideos(),this.videoChanged=!1,"none"!==t&&this.load(),this._updateCustomParams()},t.prototype.createContainer=function(){var t=document.querySelector("#".concat(this.players.divId," .").concat(Object(a.c)("content_container")));return t||(t=document.createElement("div")),Object(a.a)(t,"content_container"),t},t.prototype.createVideoEl=function(t,e){var n=document.querySelector("#".concat(this.players.divId," .").concat(Object(a.c)("content_video"))),r=Object(l.b)({volume:this.players.volume,preload:t},n);return r.controls=!1,r.autoplay=!1,r.loop=!1,r.muted=e,r},t.prototype.addVideoElementToContainer=function(t){(t.id||"").includes("content_video")||(Object(a.b)(t,"content_video"),Object(u.a)(t,"content video event",{players:this.players},[{type:"loadstart",action:this.onLoadStart.bind(this)},{type:"loadedmetadata",action:this.onLoadedMetaData.bind(this)},{type:"canplay",action:this.onCanplay.bind(this)},{type:"play",action:this.onPlay.bind(this)},{type:"playing",action:this.onPlaying.bind(this)},{type:"pause",action:this.onPause.bind(this)},{type:"ended",action:this.onEnded.bind(this)},{type:"error",action:this.onError.bind(this)},{type:"seeked",action:this.onSeeked.bind(this)},{type:"volumechange",action:this.onVolumeChange.bind(this)},{type:"timeupdate",action:this.onTimeUpdate.bind(this)},{type:"durationchange",action:this.onDurationChange.bind(this)}])),t.muted=this.players.muted,t.volume=this.players.volume,this.container&&this.container.appendChild(t)},t.prototype.preloadVideos=function(){var t,e=this;if(null===(t=this.players.hlsConfig)||void 0===t?void 0:t.preload){var n=this.getNextIndex(),r=this.list[n],i=this.getPreviousIndex(),o=this.list[i];r&&!this.preloadedVideos.has(n)&&setTimeout((function(){if(n===e.getNextIndex()){var t=e.createVideoEl("auto",!0);e.preloadedVideos.set(n,{el:t,hls:null}),e.setPreloadedVideoSrc(r,n)}}),1e3),o&&!this.preloadedVideos.has(i)&&setTimeout((function(){if(i===e.getPreviousIndex()){var t=e.createVideoEl("auto",!0);e.preloadedVideos.set(i,{el:t,hls:null}),e.setPreloadedVideoSrc(o,i)}}),2e3)}},t.prototype.setMasPerContent=function(t,e){e.length>0&&(this.setDefaultMas(e),this.setMasForFirstContent(e,t),this.setMasForMidContent(t,e))},t.prototype.setMasForMidContent=function(t,e){for(var n=t.schedule.content.skipContent;n<e.length;)e[n].mas=t.schedule.content.midContentImp,n+=t.schedule.content.skipContent},t.prototype.setMasForFirstContent=function(t,e){t[0].mas=e.schedule.content.firstContentImp},t.prototype.setCurrentVideoSrc=function(t){var e=this;void 0===t&&(t=this.currentVideoIndex),this.currentVideoIndex=t;var n=this.getCurrentItem(),r=this.variantsList[this.selectedVariant];if(n){var i=this.getVideoSrc(n);i?(this._startLoadingTS=Date.now(),this.currentItem=n,this.currentVariant=r,this.setVideoSrc(this.video,i,(function(){return e.setHLSVideoSrc()}),(function(){return e.setMP4VideoSrc(!0)}))):(this.currentItem=null,this.currentVariant=null)}},t.prototype.setPreloadedVideoSrc=function(t,e){var n=this,r=this.getVideoSrc(t);r&&this.setVideoSrc(this.preloadedVideos.get(e).el,r,(function(){return n.setPreloadedVideoHLSSrc(e,r)}),(function(){return n.preloadedVideos.delete(e)}))},t.prototype.setVideoSrc=function(t,e,n,r){if(Object(A.k)(e)){if(Object(p.b)())return n();Object(p.d)(this.players.hlsConfig).then((function(){return n()}))}else r()},t.prototype.setPreloadedVideoHLSSrc=function(t,e){var n=this.preloadedVideos.get(t);n.hls=n.hls||this.createHLSManager(e),n.hls?n.hls.init(n.el,e):this.preloadedVideos.delete(t)},t.prototype.getVideoSrc=function(t){return t.url||t.fallbackUrl||this.getHLSVideoSrc()||this.getMP4VideoSrc()},t.prototype.getHLSVideoSrc=function(){var t,e,n=this.currentItem;return[n.url,n.fallbackUrl,null===(t=n.formattedUrls)||void 0===t?void 0:t.hls,null===(e=n.formattedUrls)||void 0===e?void 0:e.mp4].find((function(t){return Object(A.k)(t)}))||null},t.prototype.getMP4VideoSrc=function(){var t,e,n,r=this,i=this.currentItem,o=[i.url,i.fallbackUrl,null===(t=i.formattedUrls)||void 0===t?void 0:t.mp4,null===(e=i.formattedUrls)||void 0===e?void 0:e.hls].find((function(t){return Object(A.l)(t)}))||null;if(this.selectedQualityLevel&&(null===(n=i.mp4Resolutions)||void 0===n?void 0:n.length)>0){var a=i.mp4Resolutions.find((function(t){return t.height===r.selectedQualityLevel}));if(a)return a.src||o}return o},t.prototype.setHLSVideoSrc=function(){var t=this.getHLSVideoSrc();this.hls=this.hls||this.createHLSManager(t),this.hls?this.hls.init(this.video,t):(this.setMP4VideoSrc(),Object(c.b)(this.players,null,"content.error",{src:t,errorMsg:"hls is not supported"})),this.currentVideoSrc=t,Object(c.b)(this.players,null,"content.changed",{url:t,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0},t.prototype.createHLSManager=function(t){var e=this,n=null;if(Object(p.b)()){var r=this.players.hlsConfig,i=E(E({autoStartLoad:!0===this.players.started},r),{hlsFixedResolutionLevels:Object(o.j)(this.players)});n=new p.a(i)}return null==n||n.onError((function(n,r){return e.onHLSError(n,t,r)})),null==n||n.onLogError((function(t,n){return e.onLogHLSError(t,n)})),n},t.prototype.onHLSError=function(t,e,n){if(!Object(A.l)(this.currentItem.url)){var r=this.isLiveStream,i={currentItem:T(this.currentItem),contentUrl:this.currentVideoSrc,isHlsSupported:Object(p.c)(),time:Object(b.f)(Date.now(),this._startLoadingTS)};O({message:t,hlsErrorData:n,extraData:i}),Object(c.b)(this.players,null,"content.error",{data:n,src:e,errorMsg:t}),(null==n?void 0:n.networkError)&&I(n.error,i),!this.currentItem.fallbackUrl&&(this.currentItem.fetchingErrorCount+=1,this.sendContentErrorEvents(),this.isErrorCountReached()&&(this.removeContentFromList(),this.isListEmpty()))||(this.destroyHls(),this.useFallback(r))}},t.prototype.onLogHLSError=function(t,e){O({message:t,hlsErrorData:e,extraData:{contentUrl:this.currentVideoSrc,currentItem:T(this.currentItem),isHlsSupported:Object(p.c)(),time:Object(b.f)(Date.now(),this._startLoadingTS)}})},t.prototype.removeContentFromList=function(){this.removeAt(this.currentVideoIndex),this.currentVideoIndex=0===this.currentVideoIndex?this.list.length:this.currentVideoIndex-1},t.prototype.isErrorCountReached=function(){return 3===this.currentItem.fetchingErrorCount},t.prototype.setMP4VideoSrc=function(t){void 0===t&&(t=!1);var e=this.getMP4VideoSrc();t&&!e&&(Object(c.b)(this.players,null,"content.error",{src:this.currentVideoSrc,errorMsg:"no mp4 url found"}),this.removeContentFromList(),this.currentVideoIndex=this.getNextIndex(this.currentVideoIndex)||0,this.currentItem=this.getCurrentItem(),this.setCurrentVideoSrc(this.currentVideoIndex)),this.destroyHls(),Object(l.d)(this.players,this.video,e),this.currentVideoSrc=e,Object(c.b)(this.players,null,"content.changed",{url:e,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0},t.prototype.nativeControlsVisible=function(){return this.visible&&this.video.controls},t.prototype.onLoadStart=function(){v.b.emit(v.a.INTERNAL.CONTENT.LOAD_START)},t.prototype.onLoadedMetaData=function(){this.isLoaded=!0,v.b.emit(v.a.INTERNAL.CONTENT.LOAD_END),this.savedTime&&(this.video.currentTime=this.savedTime,this.savedTime=null)},t.prototype.onCanplay=function(){this.playable=!0,v.b.emit(v.a.INTERNAL.CONTENT.LOAD_END),this.blocked()||(this.videoChanged=!1);var t=Object(l.c)(this.video);return t&&(t.style.width="100%",t.style.height="0",setTimeout((function(){t.style.height="100%"}),0),this.paused&&this.pause()),!0},t.prototype.onPlaying=function(){this.resetFetchingErrorCount();var t=this.currentVideoSrc,e=this.currentVideoIndex;if(this.playing)this.players.emit(s.a.CONTENT_RESUMED,this.currentItem),Object(c.b)(this.players,null,"content.resumed",{source:t,index:e});else{var n=this.getProgress().duration;v.b.emit(v.a.INTERNAL.CONTENT.STARTED,{data:{source:t,index:e,isLiveStream:this.isLiveStream,contentData:this.currentItem,duration:n}}),Object(c.b)(this.players,null,"content.started",{source:t,index:e})}this.videoChanged=!1,this.playing=!0},t.prototype.resetFetchingErrorCount=function(){this.currentItem.fetchingErrorCount=0},t.prototype.onPlay=function(){Object(c.g)(this.players,"content"),this._updateCustomParams(),this.players.beingVpaid&&this.players.vpaidContent&&!this.started&&(this.video.duration&&Object(h.a)(this.players,"jsAdDurationChange",{duration:this.video.duration}),Object(h.a)(this.players,"jsAdSkippableStateChange",{skippableState:!0}),this.onTimeUpdate()),this.started?this.paused&&(this.paused=!1):(this.started=!0,this.paused=!1)},t.prototype.onEnded=function(){var t;null===(t=this.hls)||void 0===t||t.setEnded(),this.playNextVideo(null)},t.prototype.playNextVideo=function(t){if(!this.isListEmpty()){var e=this.getCurrentItem(),n=this.isAdContent(),r=this.video,i=r.currentTime,o=r.duration,a=Number.isFinite(t)?t:this.getNextIndex();"promo-video"===e.type&&(this.removeAt(this.currentVideoIndex),a--),n&&(a=this.removeAdContent(e,a));var c=null==a,u=null!=a&&this.list[a];if(this.isRetry=!1,i>0&&(Math.round(i)===Math.round(o)?(this.players.emit(s.a.CONTENT_COMPLETED,E(E({},this.currentItem),{loopCompleted:c})),v.b.emit(v.a.INTERNAL.CONTENT.ENDED,{contentData:this.currentItem})):this.players.emit(s.a.CONTENT_SKIPPED,E(E({},this.currentItem),{loopCompleted:c})),c&&this.currentVideoIndex===this.list.length-1&&v.b.emit(v.a.PLAYLIST.COMPLETED,{})),a=a||0,v.b.emit(v.a.CONTENT.CHANGED_BY_INDEX,{currentIndex:a,prevIndex:this.currentVideoIndex}),this.nextVideo(a),this.completed=c,this.playing=!1,!(null==u?void 0:u.adContent)&&this.adContentInterrupt){var d=this.adContentInterrupt,l=d.item,p=d.wasPlaying,h=d.timestamp,f=d.done;l!=u||f?this.adContentInterrupt=null:(this.playing=p,this.playing&&this.seekContent(h),this.adContentInterrupt.done=!0)}this.start()}},t.prototype.isListEmpty=function(){return 0===this.list.length},t.prototype._updateCustomParams=function(){if(this.players.reporting.sendCustomParamsOnEvents){var t=this.players.customParams,e=E(E({},void 0===t?{}:t),this.getRelevantCustomParams()||{});this.players.eventDispatcher.addExtraData({customParams:e})}},t.prototype.removeAdContent=function(t,e){var n=this.list.indexOf(t);return n>-1&&e!=n&&(this.removeAt(n),n<e&&(e-=1)),e},t.prototype.onError=function(){this.currentItem.fetchingErrorCount+=1,this.sendContentErrorEvents(),this.isErrorCountReached()&&(this.removeContentFromList(),this.isListEmpty())||(!this.playable&&!this.isLoaded&&!this.playing&&this.currentItem.fetchingErrorCount<3?this.playNextVideo(this.currentVideoIndex):this.next())},t.prototype.sendContentErrorEvents=function(){this.players.emit(s.a.CONTENT_ERROR,this.currentItem),v.b.emit(v.a.INTERNAL.CONTENT.ERROR,{contentData:this.currentItem})},t.prototype.onPause=function(){this.video.readyState>0&&!(this.video.duration>0&&this.video.duration>this.video.currentTime)||this.paused||(Object(c.b)(this.players,null,"content.paused"),v.b.emit(v.a.INTERNAL.CONTENT.PAUSED),this.paused=!0)},t.prototype.onVolumeChange=function(){this.nativeControlsVisible()&&Object(c.j)(this.players,this.video.volume,this.video.muted)},t.prototype.onTimeUpdate=function(){this.players.beingVpaid&&this.players.vpaidContent&&!this.paused&&Object(h.a)(this.players,"jsAdRemainingTimeChange",{remainingTime:this.video.duration-this.video.currentTime});var t=this.getProgress(),e=t.time,n=t.duration,r={currentTime:e,duration:n,isLiveStream:this.isLiveStream};v.b.emit(v.a.INTERNAL.CONTENT.TIME,{contentProgress:r,contentData:this.currentItem}),this.quartileChange.new=this.isLiveStream?0:Object(o.h)(e,n),!this.isLiveStream&&this.quartileChange.old!==this.quartileChange.new&&this.isInProgressRange()&&(v.b.emit(v.a.INTERNAL.CONTENT.PROGRESS,{contentProgress:r,contentData:this.currentItem,progress:this.quartileChange.new}),this.quartileChange.old=this.quartileChange.new)},t.prototype.isInProgressRange=function(){return this.quartileChange.new>0&&this.quartileChange.new<100},t.prototype.onDurationChange=function(){this.players.beingVpaid&&this.players.vpaidContent&&!this.paused&&Object(h.a)(this.players,"jsAdDurationChange",{duration:this.video.duration})},t.prototype.onSeeked=function(){0==this.video.currentTime||Object(l.c)(this.video)||Object(c.b)(this.players,null,"content.seeked",{time:this.video.currentTime})},t.prototype.onClick=function(){var t=this.getClickData(),e=t.targetUrl,n=t.clickUrl;Object(c.b)(this.players,null,"ui.contentClick",{url:e,clickUrl:n,variant:this.selectedVariant,index:this.currentVideoIndex,time:this.video.currentTime}),n&&(Object(c.b)(this.players,null,"click",{url:n}),window.open(n,"_blank"))},t.prototype.getCurrentTime=function(){if(this.video)return+(this.video.currentTime||0).toFixed(2)},t.prototype.getDuration=function(){if(this.video)return+this.video.duration.toFixed(2)},t.prototype.getClickData=function(){var t=this.list[this.currentVideoIndex],e=t&&t.clickUrl||this.clickUrl;return"function"==typeof e&&(e=e()),{targetUrl:this.video.src,clickUrl:e}},t.prototype.destroyHls=function(){try{this.hls&&(this.hls.destroy(),this.hls=null)}catch(t){}},t.prototype.restartVideo=function(){this.video.currentTime=0},t.prototype.nextVideo=function(t){var e=this;this.started=!1;var n=this.preloadedVideos.has(t),r=this.currentVideoIndex,i=Number.isFinite(t)?t:this.getNextIndex();null!=i&&(this.currentVideoIndex=i,e.loop&&1==e.list.length?this.restartVideo():n?(this.takePreloadedVideo(r),this.preloadVideos()):(this.setCurrentVideoSrc(i),this.clearRedundantPreloadedVideos(),this.preloadVideos()),this.isRetry=!1)},t.prototype.takePreloadedVideo=function(t){var e=this.preloadedVideos.get(this.currentVideoIndex);t!==this.getNextIndex()&&t!==this.getPreviousIndex()||this.preloadedVideos.set(t,{el:this.video,hls:this.hls}),this.video.muted=!0,this.addVideoElementToContainer(e.el),this.container&&this.container.removeChild(this.video),this.video=e.el,this.hls=e.hls,this.restartVideo(),this.currentItem=this.getCurrentItem(),this.currentVariant=this.variantsList[this.selectedVariant],this.currentVideoSrc=this.getHLSVideoSrc(),v.b.emit(v.a.INTERNAL.CONTENT.VIDEO_ELEMENT_CHANGED,{video:this.video}),Object(c.b)(this.players,null,"content.changed",{url:this.currentVideoSrc,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0,this.clearRedundantPreloadedVideos()},t.prototype.clearRedundantPreloadedVideos=function(){var t=this;this.preloadedVideos.forEach((function(e,n){n!==t.getNextIndex()&&n!==t.getPreviousIndex()&&t.preloadedVideos.delete(n)}))},t.prototype.next=function(){this.playNextVideo(this.getNextIndex())},t.prototype.prev=function(){this.playNextVideo(this.getPreviousIndex())},t.prototype.load=function(){this.isLoaded||this.video.load()},t.prototype.play=function(){var t,e=this;if(this.playPromise=null,this._startLoadingTS=Date.now(),(!Object(A.k)(e.currentVideoSrc)||Object(p.c)())&&this.video&&this.video.parentNode){this.completed=!1,null===(t=this.hls)||void 0===t||t.play();var n={contentUrl:this.currentVideoSrc,isHlsSupported:Object(p.c)()};this.forcedPlayed?this.playPromise=this.video.play().then((function(){S(e._startLoadingTS,n),e.video.playbackRate=e.playbackSpeed})).catch((function(t){return e._handleContentError(t)})):(this.forcedPlayed=!0,this.playPromise=Object(f.b)(this.video).then((function(){S(e._startLoadingTS,n),e.video.playbackRate=e.playbackSpeed,v.b.emit(v.a.INTERNAL.CONTENT.PLAYING)})))}},t.prototype.getCurrentItem=function(){return this.list[this.currentVideoIndex]},t.prototype.isAdContent=function(){return(this.getCurrentItem()||{}).adContent},t.prototype.shouldMonetize=function(){return!this.currentItem||!this.currentItem.adContent},t.prototype.insertAdContent=function(t){var e;this.adContentInterrupt={item:this.getCurrentItem(),timestamp:this.getCurrentTime(),adContentItem:E(E({},t),{adContent:!0}),wasPlaying:this.playing},this.setWait(!1),this.insertAdContentAt(this.currentVideoIndex,this.adContentInterrupt.adContentItem),this.currentVideoIndex+=1,null===(e=this.hls)||void 0===e||e.detachMedia(),this.playNextVideo(this.currentVideoIndex-1)},t.prototype.insertAdContentAt=function(t,e){this.list.splice(t,0,E(E({},e),{adContent:!0})),Object(c.b)(this.players,null,"content.listUpdated",{list:this.list})},t.prototype.insertAt=function(t,e){var n;(n=this.list).splice.apply(n,_([t,0],e,!1)),Object(c.b)(this.players,null,"content.listUpdated",{list:this.list})},t.prototype.updateItem=function(t,e){var n=this.list.find((function(e){return e.id===t}));return n?(e.id=null,e.url=null,e.formattedUrls=null,e.duration=null,e.fallbackUrl=null,Object(d.c)(n,e)):null},t.prototype.removeAt=function(t){this.list.splice(t,1),Object(c.b)(this.players,null,"content.listUpdated",{list:this.list})},t.prototype.pause=function(){var t=this;this.video&&this.video.parentNode&&this.playPromise&&this.playPromise.then((function(){return t.video.pause()}))},t.prototype.showContent=function(){this.container&&!this.visible&&(this.visible=!0,this.container.style.zIndex="10001",this.container.style.display="")},t.prototype.hideContent=function(){var t=this;this.container&&this.visible&&(this.visible=!1,this.container.style.zIndex="1",this.container.style.display="none"),(void 0===document.fullscreenElement&&this.video.webkitDisplayingFullscreen||document.fullscreenElement==this.video)&&(document.exitFullscreen?document.exitFullscreen():this.video.webkitExitFullScreen&&this.video.webkitExitFullScreen(),setTimeout((function(){return Object(c.e)(t.players,"normal")}),250))},t.prototype.setContent=function(t){this.init(t),this.video&&this.setCurrentVideoSrc(0),this.start()},t.prototype.setVideoVariant=function(t){null!=t&&this.selectedVariant!==t&&(this.savedTime=this.video.currentTime,this.selectedVariant=t,this.setCurrentVideoSrc(this.currentVideoIndex),this.start())},t.prototype.setVideoFormat=function(t){this.selectedFormat=t,this.savedTime=this.video.currentTime,this.setCurrentVideoSrc(),this.start()},t.prototype.seekContent=function(t){this.video&&Number.isFinite(t)&&(this.video.currentTime=t)},t.prototype.seekToLive=function(){var t;if(this.isLiveStream){var e=(null===(t=this.hls)||void 0===t?void 0:t.getLiveSyncPosition())||this.video.duration;this.seekContent(e)}},t.prototype.setPlaybackSpeed=function(t){this.video&&t>0&&this.video.playbackRate!==t&&(this.playbackSpeed=t,this.video.playbackRate=t)},t.prototype.setQualityLevel=function(t){var e="auto"===t?-1:parseInt(t,10);!e||e===this.selectedQualityLevel||e<0&&!this.selectedQualityLevel||(this.selectedQualityLevel=e<0?null:e,this.isHlsSource?(this.hls.setSelectedResolutionLevel(e),this.preloadedVideos.forEach((function(t){var n=t.hls;n&&n.setSelectedResolutionLevel(e)}))):(this.savedTime=this.video.currentTime,this.setCurrentVideoSrc(),this.start()))},t.prototype.setCurrentVideo=function(t){null!=t.index&&(this.playNextVideo(t.index),t.allowAdBreak&&Object(c.l)())},t.prototype.isVisible=function(){return this.visible},t.prototype.setVolume=function(t,e){this.video&&(void 0!==e&&this.video.muted!==e&&(this.video.muted=e),this.video.volume!==t&&(this.video.volume=t))},t.prototype.shouldPlay=function(){return this.isRetry?!this.paused:this.isAdContent()||!0===this.players.started&&!this.blocked()},t.prototype.start=function(){var t=this;this.players.closed||Object(u.c)("startContent",{players:this.players,log:!0},(function(){t.players.anyPlaying||(t.players.paused||!t.shouldPlay()||t.completed?t.videoChanged?t.load():t.pause():t.play())}))},t.prototype.hide=function(){this.hideContent()},t.prototype.show=function(){this.showContent()},t.prototype.pauseContent=function(){this.pause()},t.prototype.setWait=function(t){this.waitForSchedule=t},t.prototype.unlockSlot=function(){!this.unlocked&&this.video&&(this.unlocked=!0,this.started||this.load())},t.prototype.getUrl=function(){return this.list.length>0?this.list[this.currentVideoIndex]&&this.list[this.currentVideoIndex].url:""},t.prototype.getHTMLVideoElement=function(){return this.video&&!Object(l.c)(this.video)?this.video:null},t.prototype.getProgress=function(){var t,e=this.isLiveStream?(null===(t=this.hls)||void 0===t?void 0:t.getLiveSyncPosition())||this.video.duration||0:this.video.duration||0,n=Math.min(this.video.currentTime,e)||0,r=this.isHlsSource,i=r?this.hls.isAutoLevelEnabled():!this.selectedQualityLevel;return{duration:e,time:n,currentQualityLevel:this.getCurrentQualityLevel(),isAutoLevelEnabled:i,isHlsSource:r,isLiveStream:this.isLiveStream,playbackSpeed:this.video.playbackRate}},t.prototype.getCurrentQualityLevel=function(){var t,e,n,r,i=this,o=null;if(this.isHlsSource){var a=this.hls.getLevel(),s=this.hls.getLevelList();Number.isFinite(a)&&a>=0&&(o=(null===(t=s[a])||void 0===t?void 0:t.bitrate)||(null===(e=s[a])||void 0===e?void 0:e.height)||null)}else if(Object(A.l)(this.currentVideoSrc)&&(null===(r=null===(n=this.currentItem)||void 0===n?void 0:n.mp4Resolutions)||void 0===r?void 0:r.length)>0){var c=this.currentItem.mp4Resolutions.find((function(t){return i.currentVideoSrc.endsWith("".concat(t.height,"p.mp4"))}));o=(null==c?void 0:c.height)||null}return o},t.prototype.getQualityLevels=function(){var t;if(this.isHlsSource){var e=[];return this.hls.getLevelList().forEach((function(t){t&&t.height&&e.push({id:(null==t?void 0:t.bitrate)||t.height,height:t.height,width:t.width})})),e}return(null===(t=this.currentItem)||void 0===t?void 0:t.mp4Resolutions)||[]},t.prototype.useFallback=function(t){var e=this;void 0===t&&(t=!1);var n=function(){!t&&O({message:"Failed to play HLS content. The content might be a live stream.",hlsErrorData:{error:new Error("Failed to play HLS content"),fatal:!0},extraData:{contentUrl:e.currentVideoSrc,currentItem:T(e.currentItem),isHlsSupported:Object(p.c)(),time:Object(b.f)(Date.now(),e._startLoadingTS)}})};this.isRetry?1===this.list.length?(n(),this.completePlaylistWithError()):(n(),this.fallbackToNextContent()):(this.isRetry=!0,this.getMP4VideoSrc()&&!t?this.setMP4VideoSrc():this.setHLSVideoSrc(),this.start())},t.prototype.fallbackToNextContent=function(){v.b.emit(v.a.INTERNAL.CONTENT.ENDED,{contentData:this.currentItem,withErrors:!0}),this.next()},t.prototype.setDefaultMas=function(t){t.forEach((function(t){t.mas=-1}))},t.prototype.completePlaylistWithError=function(){this.pause(),this.completed=!0,this.playing=!1,this.players.emit(s.a.CONTENT_COMPLETED,E(E({},this.currentItem),{loopCompleted:!0})),v.b.emit(v.a.INTERNAL.CONTENT.ENDED,{contentData:this.currentItem,withErrors:!0}),v.b.emit(v.a.PLAYLIST.COMPLETED,{completedWithError:!0})},t.prototype._handleContentError=function(t){var e={currentItem:T(this.currentItem),contentUrl:this.currentVideoSrc,isHlsSupported:Object(p.c)(),time:Object(b.f)(Date.now(),this._startLoadingTS)};t.code===r.ABORT&&(function(t){return[i.MEDIA_REMOVED,i.NEW_PAUSE_REQUEST,i.ABORT,i.ABORT_BY_UA].includes(t)}(this._preDetectPlayPromiseErrorType(t))&&function(t,e){var n=t.message,r=t.code,i=t.name,o=(n||"").replace(" https://goo.gl/LdLk22","");y.a.error("Content: Play Promise Error. ".concat(o),t,{details:E({},e),error:{code:r,type:i,message:o},category:{main:g.a.CONTENT}})}(t,e));t.code===r.NETWORK_ERROR&&I(t,e)},t.prototype._preDetectPlayPromiseErrorType=function(t){var e=t.message;switch(!0){case e.includes(i.ABORT):return i.ABORT;case e.includes(i.ABORT_BY_UA):return i.ABORT_BY_UA;case e.includes(i.MEDIA_REMOVED):return i.MEDIA_REMOVED;case e.includes(i.BACKGROUND_PAUSED):return i.BACKGROUND_PAUSED;case e.includes(i.NEW_LOAD_REQUEST):return i.NEW_LOAD_REQUEST;case e.includes(i.NEW_PAUSE_REQUEST):return i.NEW_PAUSE_REQUEST}return null},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return D}));var r,i=n(17),o=n(2),a=n(13),s=n(48),c=n(3),u=n(16),d=n(8),l=n(59),p=n(30),h=n(12),f=n(20),v=n(75),m=n(32),A=n(49),y=n(15),b=n(4),g=n(46),E=n(0),_=n(11),T=n(10),I=n(60),O=n(34),S=n(21),C=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),P=function(){return(P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},w=function(t){function e(e,n){var r,i,a,s=this;if((s=t.call(this)||this)._emitter=new g.EventEmitter2,s.requireViewability=!1,s.maxFailedVastRetries=0,s.maxAdStarts=0,s.vastErrorWasReported=!1,s.adType=null,s.publishersAdType=null,s.curAdStarts=0,s.errorCount=0,s.totalRoundNo=0,s.retryCount=0,s.rotationNo=0,s.durationKnown=!1,s.viewable=!1,s.adSlotTarget={enable:!1,list:[]},s.requestTimeRecords={},s.googleOutstream=!1,s.adSystems=[],s.retriedMediaFile=!1,s.ccsModifications=null,s.priority=0,s.priorityTieBreaker=0,s.requireSound=!1,s.requireVisibility=!1,s.fill={rate:1,offset:0},s.video=null,s.initVpaidOnStartDone=!1,s.clickTextEnabled=!1,s.prebidMaxDuration=0,s.logStartWasDone=!1,s.logLoadWasDone=!1,s.vastResponseXML=null,s.delay={},s.skippable=!1,s.unlocked=!1,s.firedEvents={},s.impressionData={},s.apiImpressionData={},s.macros={enable:!1,percentage:0},s.finishPromiseResolve=function(){},s.finishPromise=new Promise((function(t){s.finishPromiseResolve=t})),s.timers=null,s.flowTimeout=new p.a,s.impressionAfterStartTimeout=new p.a,s.requeryTimeout=null,s.callPauseTimer=new p.a(100),s.viewabilityTimer=new p.a(2e3),s.failSkipTimer=new p.a(300),s.keepAliveTimer=new p.a(500),s.nonLinearCompleteTimer=new p.a,s.demandCap={enabled:!1,maxImpressions:0},s.demandCapImpressions=0,s._state=b.a.None,s.videoElement=null,s.companionsElementDiv=null,s.moatAPI=null,s._adStartListeneres=[],s.schainOverride={enabled:!1,asi:"",sid:""},s.gpvDemand=e,s.applyPubDemandFields(e),Object(c.d)(c.a,s,{cxvid:Object(c.i)(e.cxvid),cxpid:Object(c.i)(e.cxpid),demandId:Object(c.j)(e.dmid),group:Object(c.i)(e.group,1),vastId:Object(c.i)(e.id,NaN),vastURL:Object(c.j)(e.url),playerId:Object(c.i)(e.pid,o.b.playerId),bidder:Object(c.j)(e.dp),maxAdStarts:Object(c.i)(e.mas),priority:Object(c.i)(e.priority),requireVisibility:Object(c.e)(e.rv),video:e.video,prebidMaxDuration:e.maxduration,vastXml:e.vastXml,apiImpressionData:e.impressionData,skipNext:Object(c.e)(e.skipNext),cookie:Object(c.j)(e.ck),cookieJson:e.cookieJson,delay:e.delay,demandAdSlots:e.adSlots,tam:e.tam,ivtBlock:Object(c.e)(e.ivtb),extraData:e.extraData,title:e.title,flamingoDemand:e.fl,capping:e.capping,schainDisabled:Object(c.e)(e.dntssch),schainOverride:e.scho,maxImpCapping:Object(c.i)(e.maxImp),maxRequestCapping:Object(c.i)(e.maxReq),playCappingInSlot:Object(c.i)(e.playCapInSlot),priceFactor:Object(c.i)(e.priceFactor),adSlotTarget:e.slotTypeTargeting,macros:e.macros,shouldApplyGoogleMacros:e.shouldApplyGoogleMacros,cachedBids:e.cachedBids,demandCap:e.demandCap,pbserver:e.pbserver,googleOutstream:e.googleOutstream,googleSlotId:e.googleSlotId,googleSlotDimensions:e.googleSlotDimensions,subType:e.demand_sub_type,displayFallback:e.demand_display_fallback,vastWrapperLimit:Object(c.i)(e.vastWrapperLimit),isPlaylist:e.ima_playlist,allowAlternateBidderCodes:e.allowAlternateBidderCodes,allowedAlternateBidderCodes:e.allowedAlternateBidderCodes,fetchAdditionalCreativeInfo:e.fetchAdditionalCreativeInfo,excludeMA:e.excludeMA,ignoreMLRecommendation:e.ignoreMLRecommendation,ars:e.ars,disableSkip:Object(c.e)(e.disableSkip),externalDynamicVast:e.externalDynamicVast,isCcsEnabled:e.isCcsEnabled||!1,ccs:e.ccs,type:e.type||"vast",takePriceFromNode:Object(c.e)(e.takePriceFromNode)}),s.vastXml&&(s.vastURL=""),e.cacheTTL&&(s.cacheTTL=Object(c.i)(e.cacheTTL)),s.requireSound=null!=o.b.requireSound?o.b.requireSound:Object(c.e)(e.rs),null!=e.fill&&(s.fill=Object(c.c)(s.fill,e.fill)),s.macros&&s.macros.enable&&_.a.nullOrUndefined(s.shouldApplyGoogleMacros)&&(s.shouldApplyGoogleMacros=Object(O.a)(s.macros.percentage),e.shouldApplyGoogleMacros=s.shouldApplyGoogleMacros),s.uniqId=++o.b.curUniq,Object(v.b)(o.b,s,e),s.timers=Object(c.c)({},o.b.timers,e.timers),s.impressionAfterStartTimeout.Seconds(s.timers.impressionAfterStart),e.mvr&&(s.maxFailedVastRetries=Object(c.i)(e.mvr),s.maxFailedVastRetries>1&&s.maxFailedVastRetries<50&&(s.maxFailedVastRetries=2*s.maxFailedVastRetries)),s.customVars={rpm:e.rpm,cxrpm:e.cxrpm},e.prebid)try{if(null==e.prebid.params._comment&&(s.prebidConfig=e.prebid,delete s.prebidConfig.params.video,!o.b.prebidConfig)){var u=o.b.consentListener.getAvailableConsents(),d=(null===(i=null===(r=u[S.a.TCF])||void 0===r?void 0:r.apiResponse)||void 0===i?void 0:i.gdprApplies)||!1,l={consentString:(null===(a=u[S.a.TCF])||void 0===a?void 0:a.consentString)||"",gdprApplies:d};s.prefetch=function(t){return Object(m.d)(o.b,t,l)}}}catch(t){}return Object(T.n)(e.video)&&"prebid"===s.type&&(s.prebidConfig.params.video=e.video),s.pbserver&&Object(T.n)(e.pbserverParams)&&(s.prebidConfig.params=P(P({},s.prebidConfig.params),e.pbserverParams)),e.keepHardCodedSchain||s.updateSupplyChain(),s._applyCloneParams(n),s}return C(e,t),Object.defineProperty(e.prototype,"viewability",{get:function(){return(null===o.b||void 0===o.b?void 0:o.b.isInView)?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,this._emitter.emit("state-change",t)},enumerable:!1,configurable:!0}),e.prototype.onStateChange=function(t){this._emitter.on("state-change",t)},Object.defineProperty(e.prototype,"progress",{get:function(){return null==this?void 0:this.getProgress()},enumerable:!1,configurable:!0}),e.prototype.updateSupplyChain=function(){this.vastURL&&this.vastURL.includes("schain")&&(o.b.isNetwork?o.b.networkParams.schain&&(this.vastURL=decodeURIComponent(Object(T.p)(this.vastURL,"schain",o.b.networkParams.schain))):this.vastURL=decodeURIComponent(Object(T.p)(this.vastURL,"schain",Object(I.c)(o.b,{isPubDemand:this.isPubDemand,schainDisabled:this.schainDisabled,schainOverride:this.schainOverride}))))},e.prototype.addAddSystem=function(t){var e;(e=this.adSystems).push.apply(e,t)},e.prototype.triggerAdPlayingCallback=function(){this._adStartListeneres.forEach((function(t){return t()}))},e.prototype.setCPM=function(t){var e,n;(null===(e=this.impressionData)||void 0===e?void 0:e.pricing)?this.impressionData=P(P({},this.impressionData),{pricing:t}):(null===(n=this.apiImpressionData)||void 0===n?void 0:n.price)&&(this.apiImpressionData=P(P({},this.apiImpressionData),{price:t}))},Object.defineProperty(e.prototype,"cpm",{get:function(){var t,e;return(null===(t=this.impressionData)||void 0===t?void 0:t.pricing)||(null===(e=this.apiImpressionData)||void 0===e?void 0:e.price)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionPrice",{get:function(){return this.ars.cpm||this.cpm},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalCPM",{get:function(){var t;return(null===(t=this.ars)||void 0===t?void 0:t.originalCPM)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"floorPrice",{get:function(){return this._floorPrice},set:function(t){this._floorPrice=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyValueEnabled",{get:function(){var t;return!0===(null===(t=this.gpvDemand)||void 0===t?void 0:t.gkv)},enumerable:!1,configurable:!0}),e.prototype.applyPubDemandFields=function(t){Object(c.d)(c.a,this,{isPubDemand:Object(c.e)(t.gtag)}),this.utag=this.isPubDemand?"true":null},e.prototype.getDemandMaxAdStarts=function(){var t,e;return null!==(e=null!==(t=this.demandMaxAdStarts)&&void 0!==t?t:this.getDefaultDmasByType())&&void 0!==e?e:null},e.prototype.getDefaultDmasByType=function(){return this.isPubDemand?null:{gam:4}[this.type]||null},e.prototype.isNonLinear=function(){return!1},e.prototype.initNonLinearCompleter=function(){},e.prototype.unlockAdSlot=function(){!this.unlocked&&this.videoElement&&this.state<b.a.Started&&(this.unlocked=!0,this.videoElement.load())},e.prototype.allowedDueToSound=function(t){return!this.requireSound||!o.b.started||t&&!o.b.muted&&o.b.volume},e.prototype.fetchAdUrl=function(t,e){},e.prototype.initCompanion=function(t){if(void 0===t&&(t=document),this.companionHTML)try{this.companionsElementDiv||(this.companionsElementDiv=t.createElement("div"),this.companionsElementDiv.setAttribute("style","width:100%;height:100%;position:relative;top:-"+o.b.height+"px;z-index:0;"),this.insertCompanion()),this.companionsElementDiv&&(this.companionsElementDiv.innerHTML=this.companionHTML)}catch(t){}},e.prototype.insertCompanion=function(){o.b.divElem.appendChild(this.companionsElementDiv)},e.prototype.initMedia=function(){return this.state=b.a.Loading,o.b.eventDispatcher.sendInitAdEvent(this,o.b),E.b.emit(E.a.AD.INIT,Object(y.c)(this)),this.adContainersReady.then((function(){}))},e.prototype.onAdResponse=function(){return Object(s.a)(o.b,this),!Object(A.c)(this)},e.prototype.getAdId=function(){return null},e.prototype.getCreativeId=function(){return null},e.prototype.getNetworkId=function(){return null},e.prototype.syncVolume=function(){this.setAdVolume&&this.setAdVolume(o.b.volume,o.b.muted)},e.prototype.getAdSkippableState=function(){return this.skippable},e.prototype.isSkippable=function(){return this.getAdSkippableState()},e.prototype.skipAd=function(){this.onSkip()},e.prototype.onSkip=function(){Object(d.b)(o.b,this,"ad.skipped",{progress:this.getProgress()}),o.b.serverEvents.demandEvent(this,{name:"AdSkipped"}),Object(s.b)(o.b,f.a.E_AD_SKIPPED,this,{}),!this.skipVastTracker&&this.vastTracker&&this.vastTracker.skip(),o.b.beingVpaid&&Object(u.a)(o.b,"jsAdSkipped",{}),this.failSkipTimer.cancel(),o.b.emit(i.a.AD_SKIPPED,this),o.b.eventDispatcher.sendAdSkipEvent(this,o.b),E.b.emit(E.a.AD.SKIPPED,Object(y.c)(this)),o.b.anyPlaying=!1,Object(h.b)(o.b,this,2)},e.prototype.getVastXmlString=function(){return this.vastResponseXML instanceof Node?Object(T.b)(this.vastResponseXML):this.vastResponseXML},e.prototype.showAdUI=function(){return null==this.enableAdUI||this.enableAdUI},e.prototype.showAd=function(){this.adContainer&&(this.adContainer.style.zIndex="10000",this.adContainer.style.position="absolute")},e.prototype.hideAd=function(){this.adContainer&&(this.adContainer.style.zIndex=(-this.uniqId).toString())},e.prototype.destroyAd=function(){this.adContainer&&this.adContainer.parentNode&&(this.adContainer.parentNode.removeChild(this.adContainer),this.adContainer=null)},e.prototype.verifyVastTrackerProgress=function(t){this.skipVastTracker||this.vastTracker&&(Object(a.k)(t,o.b,this),t==a.b.COMPLETE&&this.vastTracker.complete())},e.prototype.onQuartile=function(t){if(this.state==b.a.Playing){var e=a.a[t];this.verifyVastTrackerProgress(t),o.b.beingVpaid&&Object(u.a)(o.b,"jsAd".concat(e&&e[0].toUpperCase()+e.slice(1)),{}),Object(s.d)(o.b,this,t),Object(d.b)(o.b,this,"ad.".concat(e),{listCompleted:o.b.frozen})}},e.prototype.onComplete=function(){this.verifyVastTrackerProgress(a.b.COMPLETE),Object(s.d)(o.b,this,a.b.COMPLETE),Object(l.b)(o.b,this,"adcomplete"),this.skippable=!1,o.b.emit(i.a.AD_COMPLETE)},e.prototype.viewableForSeconds=function(){return this.viewable&&this.viewableAt?(Date.now()-this.viewableAt)/1e3:-1},e.prototype.playsForSeconds=function(){return this.playedAt?(Date.now()-this.playedAt)/1e3:-1},e.prototype.setSkippableState=function(){var t,e,n=this,r=null===(t=o.b.skipConfig)||void 0===t?void 0:t.offset,i=function(t){return!n.disableSkip&&t!==n.skippable};if(r>0){var a=this.getProgress()||{},s=a.time,c=a.duration;if(s===c)return;var u=Math.floor(s||this.playsForSeconds());if(c||i(e=u>=r)&&(this.skippable=e,this.googleSkip||E.b.emit("ad.skippableStateChanged",{skippable:e})),u>0&&c>=7)return void(i(e=c-r>=2&&u>=r)&&(this.skippable=e,this.googleSkip||E.b.emit("ad.skippableStateChanged",{skippable:e})))}this.skippable=!1},e.prototype.getErrorEvent=function(t){var e={name:"AdError",errorCode:10,message:t.message},n=!1;return this.state==b.a.Prefetching?(e=P({name:"VastPrefetchError",errorCode:t.code,message:t.message,retryCount:t.retryCount},this.impressionData&&{pricing:this.impressionData.pricing,currency:this.impressionData.currency}),n=!0):this.state==b.a.Started?71==t.code||70==t.code?e={name:"AdParallelStartedError",errorCode:t.code,message:t.message}:41==t.code?(e={name:"AdImpressionError",errorCode:t.code,message:t.message,timeout:!0},n=!0):(e={name:"AdImpressionError",errorCode:10==t.code?40:t.code,message:t.message},n=!0):this.state==b.a.Playing&&(60==t.code?(e={name:"AdLongImpressionError",errorCode:t.code,message:t.message,timeout:!0},n=!0):(e={name:"AdImpressionError",errorCode:t.code,message:t.message},n=!0)),{event:e,timed:n}},e.prototype._applyCloneParams=function(t){void 0===t&&(t={}),t.demandCapImpressions&&(this.demandCapImpressions=t.demandCapImpressions)},e.prototype.uniqAuctionId=function(){return"".concat(this.transactionId,"-").concat(this.subTransactionId,"-").concat(this.vastId)},e.prototype.arrangeDuration=function(){if(this.creative){var t=this.creative.duration;this.duration=t}},e}(v.a);function R(){console.error("Abstract function call",(new Error).stack)}var D=function(t){function e(e,n){return t.call(this,e,n)||this}return C(e,t),e.prototype.initAd=function(){R()},e.prototype.pauseAd=function(){R()},e.prototype.resumeAd=function(){R()},e.prototype.showAd=function(){R()},e.prototype.hideAd=function(){},e.prototype.startAd=function(){R()},e.prototype.stopAd=function(){},e.prototype.clearAd=function(){},e.prototype.destroyAd=function(){},e.prototype.resizeAd=function(t,e,n){},e.prototype.setAdVolume=function(t,e){},e.prototype.getAdVolume=function(){return null},e.prototype.getProgress=function(){return null},e.prototype.getAdRemainingTime=function(){return null},e.prototype.showControlBar=function(){return!0},e.prototype.showAdUI=function(){return!0},e}(w)},function(t,e,n){"use strict";n.d(e,"b",(function(){return L})),n.d(e,"a",(function(){return k}));var r=n(88),i=n(5),o=n(1),a=n(80),s=n(89),c=n(40),u=n(19),d=n(11),l=n(67),p=n(18),h=n(65),f=n(9),v=n(29),m=n(71),A=n(21),y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},b={"-GPV_GDPR-":"0","-GPV_GDPR_CONSENT-":"","[GDPR]":"0","[GDPR_CONSENT]":""},g={GPP_SID:"",GPP:""},E=function(t){return t?y(y({},(e=t[A.a.GPP])?((n={}).GPP_SID=Object(A.c)(e),n.GPP=e.consentString,n):g),function(t){var e,n;if(!t)return b;var r=(null===(n=t.apiResponse)||void 0===n?void 0:n.gdprApplies)?"1":"0",i=t.consentString||"";return(e={})["-GPV_GDPR-"]=r,e["-GPV_GDPR_CONSENT-"]=i,e["[GDPR]"]=r,e["[GDPR_CONSENT]"]=i,e}(t[A.a.TCF])):y(y({},g),b);var e,n},_=n(92),T=n(76),I=n(6),O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var S={vpa:"[VPA]",plcmt:"[PLCMT]",vpmute:"[VPMUTE]",ad_type:"[AD_TYPE]"},C={an:"[AN]",msid:"[MSID]",rdid:"[RDID]",idtype:"[IDTYPE]",url:"[URL]",wta:"[WTA]"},P={android:"adid",amazon:"afai",ios:"idfa",lg:"lgudid",xbox:"msai",roku:"rida",samsung:"tifa",appletv:"tvOS",vidaa:"vaid",vizio:"vida"};var w=function(t,e){try{var n=new URL(t).searchParams;return Object.entries(e).forEach((function(e){var r=e[0],i=e[1],o=n.get(r);o?o.includes("[EX_")||(t=t.replace(new RegExp("&".concat(r,"=[^&]*")),"&".concat(r,"=").concat(i))):t+="&".concat(r,"=").concat(i)})),t}catch(e){return o.a.error("Error adding Google macros placeholders",e,{category:{main:I.a.MONETIZATION,sub:I.b.MACROS}}),t}};function R(t,e,n){return t.macros.enable?(t.shouldApplyGoogleMacros&&(e=w(e,S)),e):((t.isPubDemand||Object(i.k)(t)||Object(i.C)(t)||n.applyGoogleMacrosAndNoFactor&&Object(i.n)(t))&&(e=w(e,S)),Object(i.p)(t)&&(n.isAmp&&(e=function(t){return w(t,{url:"[URL]"})}(e)),n.isApp&&(e=function(t,e){return(Object(m.a)(t)||Object(m.c)(t))&&(C.is_lat="[ISLAT]"),w(e,C)}(n,e))),e)}function D(t,e,n){var r,o,a,s,d,l;return(Object(i.p)(e)||Object(i.D)(e))&&(t=(t=function(t,e){var n,r,i=Object(_.a)(null==e?void 0:e.excoUserIdentityConfig),o=t;return e.iiqEnabled&&e.iiqPassPPIDToGoogle&&(i=Object(h.a)(null===(r=null===(n=e.eids)||void 0===n?void 0:n.iiq)||void 0===r?void 0:r.eids)||i),i&&(o=w(t,{ppid:"[PPID]"})),o.replace(/\[PPID\]/g,encodeURIComponent(i))}(t=R(e,t,n),n)).replace(/\[AD_SLOT\]/g,encodeURIComponent(n.preRollOrMidRoll)).replace(/\[VPMUTE\]/g,encodeURIComponent(Object(v.d)()&&!n.muted?"0":"1")).replace(/\[VPA\]/g,encodeURIComponent(function(t){return t.playbackMode===c.a.CLICK_TO_PLAY?"click":"auto"}(n))).replace(/\[PLCMT\]/g,encodeURIComponent(Object(u.c)({forceInstream:n.isInStream,isOutstream:n.isOutstream,userInteraction:n.userInteraction}).plcmt)).replace(/\[URL\]/g,encodeURIComponent(n.domain)).replace(/\[AD_TYPE\]/g,encodeURIComponent("video"))),e.impressionData&&(t=t.replace(/\[PRICE\]/g,(null!==(r=e.impressionData.pricing)&&void 0!==r?r:"")+"").replace(/\[CURRENCY\]/g,null!==(o=e.impressionData.currency)&&void 0!==o?o:"")),n.isApp&&(t=t.replace(/\[MSID]/g,encodeURIComponent((null===(a=n.appParams)||void 0===a?void 0:a.id)||(null===(s=n.appParams)||void 0===s?void 0:s.bundle))).replace(/\[AN\]/g,encodeURIComponent(null===(d=n.appParams)||void 0===d?void 0:d.name)).replace(/\[RDID\]/g,encodeURIComponent(null===(l=n.appParams)||void 0===l?void 0:l.ifa)).replace(/\[IDTYPE\]/g,encodeURIComponent(function(t){var e,n;return P[null===(n=null===(e=t.info)||void 0===e?void 0:e.os)||void 0===n?void 0:n.toLowerCase()]||"idfa"}(n))).replace(/\[ISLAT\]/g,encodeURIComponent(function(t){var e;return"00000000-0000-0000-0000-000000000000"!==(null===(e=t.appParams)||void 0===e?void 0:e.ifa)?"0":"1"}(n))).replace(/\[URL\]/g,encodeURIComponent(n.appParams.bundle)).replace(/\[WTA\]/g,encodeURIComponent(1))),t}function L(t,e,n){return function(i){var c,u,h,v,m=(new Date).getTime().toFixed(0),A=function(t,e){var n=((null==e?void 0:e.currentItem)||{}).id,r=(null==e?void 0:e.getUrl())||"",i=(null==e?void 0:e.getRelevantCategories())||[],o=(null==e?void 0:e.getRelevantKeywords())||[],a=(null==e?void 0:e.getRelevantTags())||[];return t.replace(/\[EX_VIDEO_ID\]/g,n).replace(/\[VIDEO_CATEGORIES\]/g,encodeURIComponent(null==i?void 0:i.join(","))).replace(/\[EX_CNT_TAGS\]/g,encodeURIComponent(null==i?void 0:i.join(","))).replace(/\[VIDEO_KEYWORDS\]/g,encodeURIComponent(null==o?void 0:o.join(","))).replace(/\[VIDEO_TAGS\]/g,encodeURIComponent(null==a?void 0:a.join(","))).replace(/\[VIDEO_FILE_URL\]/g,encodeURIComponent(r))}(i,t.content);A=N(A,/\[(CB|CACHE_BUSTER|CACHEBUSTING)\]/g,m),A=N(A,/\[(WIDTH|CONTAINER_WIDTH|PLAYER_WIDTH)\]/g,t.width?t.width.toFixed():"",!0),A=N(A,/\[(HEIGHT|CONTAINER_HEIGHT|PLAYER_HEIGHT)\]/g,t.height?t.height.toFixed():"",!0),A=N(A,/\[DEVICE_WIDTH\]/g,Math.round((null===(c=null===window||void 0===window?void 0:window.screen)||void 0===c?void 0:c.width)||window.innerWidth)||"",!0),A=N(A,/\[DEVICE_HEIGHT\]/g,Math.round((null===(u=null===window||void 0===window?void 0:window.screen)||void 0===u?void 0:u.height)||window.innerHeight)||"",!0),A=N(A,/\[UA\]/g,navigator.userAgent),A=N(A,/\[SUBID\]/g,t.subid),A=N(A,/\[URL\]/g,t.domain),A=N(A,/\[URL_DETECTED\]/g,t.domainDetected),A=N(A,/\[GPD_ID\]/g,(null===(h=t.publisher)||void 0===h?void 0:h.googlePublisherId)||""),A=N(A,/\[PERMUTIVE\]/g,function(){if(!T.a(window))return"";try{var t=T.b("_pdfps")||[];return encodeURIComponent(t.slice(0,250).join(","))}catch(t){return o.a.error("Error parsing permutive data",t,{category:{main:I.a.MONETIZATION,sub:I.b.MACROS}}),""}}()),A=N(A,/\[TIMESTAMP\]/g,Object(p.a)()),A=N(A,/\[PAGEURL\]/g,t.domain),A=N(A,/\[OMIDPARTNER\]/g,l.a),A=N(A,/\[APIFRAMEWORKS\]/g,"1,2"),A=N(A,/\[PLAYER_VERSION\]/g,t.version||"",!0),A=N(A,/\[SERVERSIDE\]/g,"1");var y=null===(v=t.consentListener)||void 0===v?void 0:v.getAvailableConsents();return A=function(t,e){var n=Object(f.o)(t,["gdpr","gdpr_consent"]);return Object.entries(e).forEach((function(e){var r=e[0],i=e[1];t.includes(r)?t=t.replaceAll(r,i):"[GDPR]"===r&&i&&i!==n.gdpr?t=t.replace(/([?&]gdpr=)[^&]*/,"$1".concat(i)):"[GDPR_CONSENT]"===r&&i&&i!==n.gdpr_consent&&(t=t.replace(/([?&]gdpr_consent=)[^&]*/,"$1".concat(i)))})),t}(A,E(y)),t.info&&(A=function(t,e){return(t=(t=(t=t.replace(/\[DEVICEOS\]/gi,encodeURIComponent(e.info.os))).replace(/\[DEVICEOSV\]/gi,encodeURIComponent(e.info.osv))).replace(/\[DEVICEMAKE\]/gi,encodeURIComponent(e.info.make))).replace(/\[DEVICEMODEL\]/gi,encodeURIComponent(e.info.model))}(A,t)),t.isApp&&(A=Object(r.b)(A,t)),t.isNetwork&&(A=Object(s.b)(A,t.networkParams)),A=l.c.replaceOmidMacros(A),n&&(A=A.replace(/\[CLICK_URL\]/g,encodeURIComponent(n.clickUrl))),e&&(A=D(A,e,t)),t.customVars&&(A=function(t,e){for(var n in t.customVars)t.customVars.hasOwnProperty(n)&&(e=e.replace(new RegExp("\\["+n+"\\]","g"),encodeURIComponent(t.customVars[n])));return e}(t,A)),A=function(t,e){var n="";try{if(e.prebidJS&&e.prebidJS.getUserIdsAsEids){var r=e.prebidJS.getUserIdsAsEids();r&&r.length&&(r.forEach((function(t){(t.uids||[]).forEach((function(t){t.atype&&t.atype.toString&&(t.atype=t.atype.toString())}))})),n=JSON.stringify(r))}}catch(t){}return N(t,/\[EIDS\]/g,n)}(A,t),A=function(t,e){var n=t.content,r=t.customParams,i=void 0===r?{}:r,o=(null==n?void 0:n.getRelevantCustomParams())||{},s=Object(a.b)(O(O({},i),o));return s.DESCRIPTION_URL&&(s.DESCRIPTION_URL=Object(f.f)(s.DESCRIPTION_URL)),Object.entries(s).forEach((function(t){var n=t[0],r=t[1],i=d.a.nullOrUndefined(n)?"":n.toUpperCase(),o=d.a.nullOrUndefined(r)?"":encodeURIComponent(r.toString());e=e.replace("[EX_".concat(i,"]"),o)})),e=e.replace(/\[EX_([A-Za-z0-9_]+)\]/g,"")}(t,A)}}function N(t,e,n,r){void 0===r&&(r=!1);var i="string"==typeof e?new RegExp("\\[".concat(e,"\\]"),"g"):e,a=t.replace(i,encodeURIComponent(n||""));return r&&t.includes("v.ex.co")&&(!n||i.test(a))&&o.a.warn("Missing macro value",{data:{input:t,result:a,macro:e.toString(),value:n},category:{main:I.a.MONETIZATION,sub:I.b.MACROS}}),a}function k(t,e){if(t.customMacros)return t.customMacros[e]||null}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return d}));var r,i=n(17),o=n(19),a=n(77),s=n(0),c=n(91),u=n(1);function d(t){var e,n=t.players.playbackMode;u.a.info("Starting Playback: ".concat(n));var i=((e={})[r.AUTO_PLAY]=f,e[r.AD_TO_PLAY]=f,e[r.CLICK_TO_PLAY]=v,e[r.AD_TO_CONTENT]=v,e[r.AUTO_PLAY_IN_VIEW]=A,e[r.AUTO_PLAY_PAUSE_OUT_OF_VIEW]=y,e[r.PLAY_IN_VIEW_PAUSE_OUT_OF_VIEW]=b,e),o=i[n];o?o(t):i[r.AUTO_PLAY](t)}function l(t){setTimeout((function(){t.pause()}),10)}function p(t){t.hide()}function h(t,e){setTimeout((function(){e&&e.isAdPlaying||(t.play(),t.isLiveStream&&t.seekToLive(),t.show())}),10)}function f(t){var e=t.players,n=t.content;if(!e.monetize)return h(n),void _(n);Object(a.a)().then((function(){g(t)}))}function v(t){var e=t.players,n=t.content,i=t.ads;if(e.autoplay=!1,e.content.paused=!0,e.state.set({content:c.a.PAUSED}),!e.monetize)return l(n),void _(n);e.playbackMode===r.AD_TO_CONTENT&&i.start(),s.b.once(s.a.PLAYER.ACTION.PLAY,(function(){g({players:e,content:n,ads:i,ignoreAdsStart:e.playbackMode===r.AD_TO_CONTENT})}))}function m(t,e,n){t.wasInView?h(e.content):t.once(i.a.PLAYER_FIRST_VIEW,(function(){h(e.content)})),s.b.on(s.a.PLAYER.ACTION.PLAY,(function(){h(n)})),s.b.on(s.a.PLAYER.ACTION.PAUSE,(function(){l(n)}))}function A(t){var e=t.players,n=t.content;l(n),e.monetize?e.wasInView?g(t):e.once(i.a.PLAYER_FIRST_VIEW,(function(){g(t)})):m(e,t,n)}function y(t){var e=t.players;e.monetize?(g(t,{handleSlotEnd:!1}),e.wasInView?E(t):e.once(i.a.PLAYER_FIRST_VIEW,(function(){E(t)}))):m(e,t,t.content)}function b(t){var e=t.players;e.monetize?(t.ads.holdAdPlayback(),t.ads.resumeSchedule(),p(t.content),s.b.on(s.a.INTERNAL.PLAYER.UPCOMING_VIEW,(function(){t.ads.forceAuctionEnd()})),e.wasInView?(g(t,{handleSlotEnd:!1}),E(t)):e.once(i.a.PLAYER_FIRST_VIEW,(function(){g(t,{handleSlotEnd:!1}),E(t)}))):m(e,t,t.content)}function g(t,e){var n=t.players,r=t.content,a=t.ads,c=t.ignoreAdsStart,u=!1!==(null==e?void 0:e.handleSlotEnd),d=!1;c?h(r,a):(a.start(),l(r)),n.on(i.a.SLOT_START,(function(t){t.slotType===o.a.PRE_ROLL&&(l(r),p(r))})),n.on(i.a.AD_STARTED,(function(){l(r),p(r)})),u&&n.on(i.a.SLOT_END,(function(){h(r,a)})),n.on(i.a.AD_SKIPPED,(function(){a.resumeSchedule()})),s.b.on(s.a.PLAYER.ACTION.PLAY,(function(){d||a.isAdPlaying||(h(r,a),a.allowAdPlayback()),a.resumeSchedule(),d=!1})),s.b.on(s.a.PLAYER.ACTION.PAUSE,(function(){l(r),a.pauseSchedule(),a.isAdStarted||a.holdAdPlayback()})),s.b.on(s.a.PLAYER.AUTOPLAY_BLOCKED,(function(){l(r),a.pauseSchedule()})),s.b.on(s.a.PLAYER.AUTOPLAY_UNBLOCKED,(function(){l(r),a.resumeSchedule()})),s.b.on(s.a.PLAYLIST.COMPLETED,(function(){d=!0,l(r),a.pauseSchedule()})),s.b.on(s.a.INTERNAL.AD.SLOT_HAS_NOT_STARTED,(function(){h(r,a)}))}function E(t){var e=t.players,n=t.content,r=t.ads,o=!1,a=!1,c=function(){r.pauseSchedule()},u=function(){!r.started||r.isAdPlaying||r.isActiveSlot||(!function(t){t.show()}(n),e.isInView&&h(n))},d=function(){r.allowAdPlayback(),r.resumeSchedule(),u(),s.b.emit(s.a.PLAYER.PLAYING,{reason:"viewability"})};e.on(i.a.PLAYER_OUT_OF_VIEW,(function(){e.paused||(r.holdAdPlayback(),o&&(o=!1,s.b.once(s.a.INTERNAL.AUCTION.END,c)),l(n),s.b.emit(s.a.PLAYER.PAUSED,{reason:"viewability"}))})),e.on(i.a.PLAYER_IN_VIEW,(function(){a||(s.b.off(s.a.INTERNAL.AUCTION.END,c),o=!0,d())})),e.on(i.a.SLOT_END,(function(){u()})),s.b.on(s.a.PLAYLIST.COMPLETED,(function(){a=!0})),s.b.on(s.a.PLAYER.ACTION.PLAY,(function(){a=!1})),e.isInView&&d()}function _(t){s.b.on(s.a.PLAYER.ACTION.PLAY,(function(){h(t)})),s.b.on(s.a.PLAYER.ACTION.PAUSE,(function(){l(t)}))}!function(t){t.AUTO_PLAY="auto-play",t.AD_TO_PLAY="ad-to-play",t.CLICK_TO_PLAY="click-to-play",t.AD_TO_CONTENT="ad-to-content",t.AUTO_PLAY_IN_VIEW="auto-play-in-view",t.AUTO_PLAY_PAUSE_OUT_OF_VIEW="auto-play-pause-out",t.PLAY_IN_VIEW_PAUSE_OUT_OF_VIEW="play-in-view-pause"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return c}));var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){if(u(t,e.auctionId)){var n=function(t,e){if(!t||!e||!u(t,e.auctionId))return null;return t.ccs.find((function(t){return t&&t.auction_id===e.auctionId}))||null}(t,e);t.ccsModifications=n?r({ccs_name:e.ccsModelName},n):null}}function o(t){var e;return t&&t.isCcsEnabled&&t.ccsModifications&&null!==(e=t.ccsModifications.bidfloor)&&void 0!==e?e:null}function a(t){var e;return t&&t.isCcsEnabled&&t.ccsModifications&&t.ccsModifications.auction_configuration&&null!==(e=t.ccsModifications.auction_configuration.maxduration)&&void 0!==e?e:null}function s(t){var e;return t&&t.isCcsEnabled&&t.ccsModifications&&t.ccsModifications.auction_configuration&&null!==(e=t.ccsModifications.auction_configuration.skip)&&void 0!==e?e:null}function c(t){if(t&&t.isCcsEnabled){var e={},n=a(t),r=s(t);return null!==n&&(e.maxduration=n),null!==r&&(e.skip=r),e}return null}function u(t,e){return!(!t||"number"!=typeof e||e<1)&&(!!(t.isCcsEnabled&&t.ccs&&Array.isArray(t.ccs))&&t.ccs.some((function(t){return t&&t.auction_id===e})))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},o=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=new(function(){function t(t){void 0===t&&(t={}),this._serviceEnabled=!1,this._slots=[],this._shownSlots=new Set,this._adunitEventsMap=new Map,this._params=t}return Object.defineProperty(t.prototype,"googletag",{get:function(){return window.googletag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.googletag&&this.googletag.apiReady&&this.googletag.pubadsReady},enumerable:!1,configurable:!0}),t.prototype.updateParams=function(t){void 0===t&&(t={}),this._params=i(i({},this._params),t)},t.prototype.loadSDK=function(){if(!this.isLoaded){var t=document.createElement("script");t.src="//securepubads.g.doubleclick.net/tag/js/gpt.js",t.async=!0,document.body.appendChild(t),window.googletag=window.googletag||{cmd:[]}}this._serviceEnabled||this.enableServices(),this.enableServices()},t.prototype.setGlobalTargeting=function(t){var e=this;this.googletag.cmd.push((function(){Object.keys(t).forEach((function(n){e.googletag.pubads().setTargeting(n,t[n])}),e)}))},t.prototype.isOurSlot=function(t,e){var n=t.slot.getSlotId().getDomId();return e?e===n:this._slots.some((function(t){return t.getSlotId().getDomId()===n}))},t.prototype.isShown=function(t){return this._shownSlots.has(t)},t.prototype.handleEvent=function(t,e,n){var i=this;void 0===n&&(n={});var o="".concat(e,"_").concat(t);if(this._adunitEventsMap.has(o))return this._adunitEventsMap.get(o);var a=new Promise((function(a){var s=function(c){i.isOurSlot(c,t)&&(n.once&&(i._adunitEventsMap.delete(o),r.b.removeListener(e,s)),a(c))};r.b.on(e,s)}));return this._adunitEventsMap.set(o,a),a},t.prototype.enableServices=function(){var t=this;this._serviceEnabled=!0,this.googletag.cmd.push((function(){t.googletag.enableServices(),t.googletag.pubads().addEventListener("slotRenderEnded",(function(e){t.isOurSlot(e)&&r.b.emit(r.a.INTERNAL.GOOGLE_TAG.SLOT_RENDER_ENDED,e)})),t.googletag.pubads().addEventListener("slotOnload",(function(e){t.isOurSlot(e)&&r.b.emit(r.a.INTERNAL.GOOGLE_TAG.SLOT_ONLOAD,e)})),t.googletag.pubads().addEventListener("impressionViewable",(function(e){t.isOurSlot(e)&&r.b.emit(r.a.INTERNAL.GOOGLE_TAG.SLOT_IMPRESSION_VIEWABLE,e)})),t.googletag.pubads().addEventListener("slotResponseReceived",(function(e){t.isOurSlot(e)&&r.b.emit(r.a.INTERNAL.GOOGLE_TAG.SLOT_RESPONSE_RECIEVED,e)}))}))},t.prototype.createAd=function(t){var e=t.adUnit,n=t.adUnitId,r=t.dimensions,i=void 0===r?[]:r,s=t.targeting,c=void 0===s?{}:s,u=t.isOutstream;return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(r){return[2,new Promise((function(r){t.googletag.cmd.push((function(){var o=t.googletag.defineSlot(e,i,n).addService(window.googletag.pubads());t._params.pageUrl&&(o.set("page_url",t._params.pageUrl),t.googletag.pubads().set("page_url",t._params.pageUrl)),u&&o.setConfig({outstream:{exposeVast:!0}}),t.setSlotTargeting(o,c),t.googletag.enableServices(),t._slots.push(o),r(o)}))}))]}))}))},t.prototype.show=function(t){return o(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){return this._shownSlots.add(t),this.googletag.cmd.push((function(){if(window.googletag.pubads().isInitialLoadDisabled()){var n=e.getSlotById(t);e.googletag.pubads().refresh([n])}else e.googletag.display(t)})),[2,this.onSlotRenderEnded(t,{once:!0})]}))}))},t.prototype.onSlotResponseReceived=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.handleEvent(t,r.a.INTERNAL.GOOGLE_TAG.SLOT_RESPONSE_RECIEVED,e)]}))}))},t.prototype.onSlotLoad=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.handleEvent(t,r.a.INTERNAL.GOOGLE_TAG.SLOT_ONLOAD,e)]}))}))},t.prototype.onSlotRenderEnded=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.handleEvent(t,r.a.INTERNAL.GOOGLE_TAG.SLOT_RENDER_ENDED,e)]}))}))},t.prototype.onImpressionViewable=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.handleEvent(t,r.a.INTERNAL.GOOGLE_TAG.SLOT_IMPRESSION_VIEWABLE,e)]}))}))},t.prototype.clear=function(t){var e=this,n=Array.isArray(t)?t:[t];window.googletag.pubads().clear(n.map((function(t){return"string"==typeof t?e.getSlotById(t):t})))},t.prototype.destroySlots=function(t){var e=this,n=Array.isArray(t)?t:[t];window.googletag.destroySlots(n.map((function(t){return"string"==typeof t?e.getSlotById(t):t})))},t.prototype.refresh=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){return window.googletag.pubads().refresh(["string"==typeof t?this.getSlotById(t):t]),e="string"==typeof t?t:t.getSlotId().getDomId(),[2,this.onSlotRenderEnded(e,{once:!0})]}))}))},t.prototype.display=function(t){window.googletag.display(t)},t.prototype.getSlotById=function(t){return this._slots.find((function(e){return e.getSlotId().getDomId()===t}))},t.prototype.getGlobalSlotByAdUnitName=function(t){return window.googletag.pubads().getSlots().find((function(e){return e.getAdUnitPath()===t}))},t.prototype.getSlotTargeting=function(t){return t.getTargetingKeys().reduce((function(e,n){return e[n]=t.getTargeting(n),e}),{})},t.prototype.setSlotTargeting=function(t,e){Object.keys(e).forEach((function(n){t.setTargeting(n,e[n])}),this)},t}())},function(t,e,n){"use strict";n.d(e,"d",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return b}));var r,i=n(50),o=n(2),a=n(0),s=n(84),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},d=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},p="en",h="captions",f=null;function v(t){var e=void 0===t?{}:t,n=e.supportCC,r=void 0!==n&&n,i=e.cdnPrefix,a=void 0===i?"cdn":i;return f||(f=new Promise((function(t,e){var n,i,s=(n=o.b,(i=function(t){var e,n;return(null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.publisher)||void 0===n?void 0:n.cdnDomain)||{}}(n)).enabled&&i.proxy?i.proxy:null),c=r?"1.6.2.ST":"1.6.2",u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.src=s?"https://".concat(s,"/cdn/hls/").concat(c,"-exco/hls.min.js"):"https://".concat(a,".ex.co/player/hls/").concat(c,"-exco/hls.min.js"),d.setAttribute("crossorigin",""),d.onload=function(){return t()},d.onerror=function(t){return e(t)},u.appendChild(d)})))}function m(){try{if(Hls&&Hls.isSupported())return function(){try{for(var t=Hls.version.split("."),e="1.6.2".split("."),n=!0,r=0;r<t.length;r++)n&&(n=parseInt(t[r],10)>=parseInt(e[r],10));return n}catch(t){}return!1}()}catch(t){}return!1}function A(t,e){void 0===e&&(e=[]);var n=Object(i.a)(e.map((function(t){return t.width})),t);return e.findIndex((function(t){return t.width===n}))}function y(){return!!m()||(document.createElement("video").canPlayType("application/vnd.apple.mpegURL")||!1)}var b=function(){function t(t){var e,n=this;this.subscriber={},this.started=!1,this.isLiveStream=!1,this.baseUrl="",this.selectedResolutionLevel=null,this.getSubtitleList=function(){return n.hls.subtitleTracks||[]},this.getSubtitle=function(){return n.hls.subtitleTrack},this.getLevelList=function(){return n.hls.levels||[]},this.getLevel=function(){return n.hls.currentLevel},this.isAutoLevelEnabled=function(){return n.hls.autoLevelEnabled},this.getAudioList=function(){return n.hls.audioTracks||[]},this.getAudio=function(){return n.hls.audioTrack},this.getLiveSyncPosition=function(){return n.hls.liveSyncPosition},this.config=u({},t),t.autoStartLoad=!1;var r=u({enableWorker:!0,capLevelToPlayerSize:!0,autoLevelEnabled:!this.isHlsFixedResolutionLevelsEnabled(),ignoreDevicePixelRatio:!0,renderTextTracksNatively:!1},t);this.config.cdnPrefix&&"cdn"!==this.config.cdnPrefix&&(r.pLoader=function(t){function e(e){var n=t.call(this,e)||this,r=n.load.bind(n);return n.load=function(t,i,o){return d(n,void 0,void 0,(function(){var n;return l(this,(function(a){return"level"==t.type&&(n=o.onSuccess,o.onSuccess=function(t,r,i){t.data&&(t.data=t.data.replaceAll("/cdn.ex.co/","/".concat(e.cdnPrefix,".ex.co/"))),n(t,r,i)}),r(t,i,o),[2]}))}))},n}return c(e,t),e}(Hls.DefaultConfig.loader)),this.hls=new Hls(r),this.hls.on(Hls.Events.MANIFEST_PARSED,(function(t,e){var r,i,a,s;if((null===(r=n.config)||void 0===r?void 0:r.forceHighestQuality)&&(n.hls.nextLevel=n.getLevelList().length-1),n.isHlsFixedResolutionLevelsEnabled()){var c=n.getFixedResolutionLevel()||o.b.height;-1===c?(n.hls.currentLevel=-1,n.hls.startLevel=-1,n.hls.startLoad(-1)):c&&(null==e?void 0:e.levels)&&(n.hls.currentLevel=A(c*(16/9),e.levels),n.hls.startLevel=A(c*(16/9),e.levels),n.hls.startLoad(-1))}else(null===(i=n.config)||void 0===i?void 0:i.autoStartLoad)&&(n.hls.startLoad(-1),n.started=null===(a=n.config)||void 0===a?void 0:a.autoStartLoad);(null===(s=n.config)||void 0===s?void 0:s.autoLevelCappingWidth)&&(null==e?void 0:e.levels)&&(n.hls.autoLevelCapping=A(n.config.autoLevelCappingWidth,e.levels))})),a.b.on(s.a.PLAYER.RESIZE,(function(t){var e=t.height;if(n.isHlsFixedResolutionLevelsEnabled()){var r=n.getFixedResolutionLevel()||e;-1===r?n.setNextLevel(-1):n.setNextLevel(A(r*(16/9),n.getLevelList()))}})),this.hls.on(Hls.Events.ERROR,(function(t,e){var r,i,o=null===(r=n.subscriber)||void 0===r?void 0:r.error,a=null===(i=n.subscriber)||void 0===i?void 0:i.logError,s="HLS Error";e.type===Hls.ErrorTypes.NETWORK_ERROR&&e.details===Hls.ErrorDetails.SUBTITLE_LOAD_ERROR&&(n.hls.subtitleTrack=-1,s="HLS subtitles failed to load"),e.fatal&&e.type===Hls.ErrorTypes.MEDIA_ERROR&&(n.recoverMediaError(),s="HLS Media Error happened. Trying to recover."),e.fatal&&e.type!==Hls.ErrorTypes.MEDIA_ERROR&&"function"==typeof o?(e.networkError=Hls.ErrorTypes.NETWORK_ERROR===e.type,o(s=e.networkError?"HLS Fatal Network Error":"HLS Fatal Error",e)):(e.fatal||e.type!==Hls.ErrorTypes.NETWORK_ERROR||e.details!==Hls.ErrorDetails.FRAG_LOAD_ERROR)&&"function"==typeof a&&a(s,e)})),this.hls.on(Hls.Events.LEVEL_LOADED,(function(t,e){n.baseUrl=e.details.url,n.isLiveStream=e.details.live,n.started||(n.started=!0,n.hls.startLoad(-1))})),(null===(e=this.config)||void 0===e?void 0:e.supportCC)&&(this.hls.on(Hls.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(function(t,e){n.addSubtitlesTracks(n.hls.media,e)})),this.hls.on(Hls.Events.CUES_PARSED,(function(t,e){n.addSubtitlesCues(n.hls.media,e)})))}return t.prototype.init=function(t,e){var n=this;this.hls.once(Hls.Events.FRAG_LOADING,(function(t,e){try{var r=e.frag.baseUrl;n.baseUrl&&r&&r!==n.baseUrl&&(n.hls.stopLoad(),n.started=!1)}catch(t){}})),this.started=!1,this.isLiveStream=!1,this.hls.loadSource(e),this.hls.attachMedia(t)},t.prototype.onError=function(t){this.subscriber.error=t},t.prototype.onLogError=function(t){this.subscriber.logError=t},t.prototype.recoverMediaError=function(){this.hls.recoverMediaError()},t.prototype.detachMedia=function(){this.hls.detachMedia()},t.prototype.setSubtitle=function(t){null!=t&&this.hls.subtitleTrack!==t&&(this.hls.subtitleTrack=t)},t.prototype.createTextTrack=function(t,e){var n=document.createElement("track");n.setAttribute("label",e.label||""),n.setAttribute("kind",e.kind),n.setAttribute("srclang",e.language),n.setAttribute("id",e.id),t.appendChild(n);var r=t.textTracks.getTrackById(e.id);return r.mode="disabled",r},t.prototype.addSubtitlesTracks=function(t,e){var n=this,r=e.tracks;(null==r?void 0:r.length)&&r.forEach((function(e,r){var i=e.lang||e.language||p,o={language:i,label:e.label||"",id:e._id||e.id||"".concat(i).concat(r),kind:e.kind||h};t.textTracks.getTrackById(o.id)||n.createTextTrack(t,o)}))},t.prototype.addSubtitlesCues=function(t,e){var n,r={language:p,id:e.track,kind:e.type||h},i=t.textTracks.getTrackById(r.id)||this.createTextTrack(t,r);if(i&&(null===(n=null==e?void 0:e.cues)||void 0===n?void 0:n.length)){"disabled"===i.mode&&(i.mode="hidden",a.b.emit(s.a.CONTENT.CC_TRACK_ADDED,{track:i}));for(var o=e.cues.length-1;o>=0;o--){var c=e.cues[o],u=c.startTime,d=c.endTime,l=c.text,f=new VTTCue(u,d,l);f.align="center",f.line="auto",f.position="auto",f.size=80,i.addCue(f)}}},t.prototype.setLevel=function(t){null!=t&&this.hls.currentLevel!==t&&(this.hls.currentLevel=t)},t.prototype.setNextLevel=function(t){null!=t&&this.hls.nextLevel!==t&&(this.hls.nextLevel=t)},t.prototype.setAudio=function(t){null!=t&&this.hls.audioTrack!==t&&(this.hls.audioTrack=t)},t.prototype.destroy=function(){this.hls.destroy()},t.prototype.play=function(){this.started||(this.started=!0,this.hls.startLoad(-1))},t.prototype.setEnded=function(){this.started=!1},t.prototype.isHlsFixedResolutionLevelsEnabled=function(){var t,e;return!!this.selectedResolutionLevel||(null===(e=null===(t=this.config)||void 0===t?void 0:t.hlsFixedResolutionLevels)||void 0===e?void 0:e.enabled)||!1},t.prototype.getFixedResolutionLevel=function(){var t,e;return this.selectedResolutionLevel||(null===(e=null===(t=this.config)||void 0===t?void 0:t.hlsFixedResolutionLevels)||void 0===e?void 0:e.fixedResolution)||null},t.prototype.setSelectedResolutionLevel=function(t){var e,n,r,i,a;if(t<0&&!(null===(n=null===(e=this.config)||void 0===e?void 0:e.hlsFixedResolutionLevels)||void 0===n?void 0:n.enabled))this.selectedResolutionLevel=-1,a=-1;else if(t<0&&(null===(i=null===(r=this.config)||void 0===r?void 0:r.hlsFixedResolutionLevels)||void 0===i?void 0:i.enabled)){this.selectedResolutionLevel=null,a=A((this.getFixedResolutionLevel()||o.b.height)*(16/9),this.getLevelList())}else this.selectedResolutionLevel=t,a=this.getLevelList().findIndex((function(e){return(null==e?void 0:e.bitrate)===t}))||this.getLevelList().findIndex((function(e){return(null==e?void 0:e.height)===t}));this.setNextLevel(a)},t}()},function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(36),i=n(52),o=function(t){var e;null===(e=t.eventDispatcher)||void 0===e||e.send(r.b.MCD_IVT_OPPORTUNITY,{})},a=function(t,e){return t.isIvt&&(e=e.filter((function(t){return!t.ivtBlock}))),e},s=function(t){var e,n;return(null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.reporting)||void 0===n?void 0:n.sendGoogleCustomParams)||!1},c=function(t,e){var n,r,o,a={house:"Ad Server",regular:"Ad Server",sponsored:"Ad Server",default:"Ad Exchange"};if(null==t?void 0:t.googleCustomParamsForReport){var s=(n=t.googleCustomParamsForReport.replaceAll("&",";")).split(";").map((function(t){return t.split("=")})),c=s.find((function(t){return"pageId"===t[0]}));r=c?c[1]:void 0;var u=s.find((function(t){return"videostart"===t[0]}));return o=u?u[1]:"auto-first",{customTargeting:n,pageId:r,keyPart:t.customReportId||Object(i.a)(),TimeUsec2:Date.now(),product:a[null==e?void 0:e.publishersAdType]?a[null==e?void 0:e.publishersAdType]:"Header Bidding",videostart:o}}return null}},function(t,e,n){"use strict";n.r(e),n.d(e,"PLUGINS",(function(){return a}));var r,i=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a={TABOOLA:"tbla",DISPLAY_FALLBACK:"display-fallback"},s=Object.values(a).reduce((function(t,e){return t[e]="./".concat(e),t}),{}),c=((r={})[a.TABOOLA]=function(t){return"0010J00001s1b0MQAQ"===(null==t?void 0:t.sellerId)},r[a.DISPLAY_FALLBACK]=function(t){var e,n;return(null===(e=null==t?void 0:t.displayFallback)||void 0===e?void 0:e.enabled)&&(null===(n=null==t?void 0:t.displayFallback)||void 0===n?void 0:n.demand)},r),u=function(){function t(){this._loadedPlugins={}}return t.prototype.get=function(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){return this._loadedPlugins[t]?[2,this._loadedPlugins[t]]:[2,this.load(t,e)]}))}))},t.prototype.load=function(t,e){return i(this,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return!s[t]||this._loadedPlugins[t]?[3,2]:[4,n(113)("".concat(s[t]))];case 1:r=i.sent().default,this._loadedPlugins[t]=new r(e),i.label=2;case 2:return[2,this._loadedPlugins[t]]}}))}))},t.prototype.isEnabled=function(t,e){var n=c[e];return!(!n||!n(t))},t}();e.default=new u},function(t,e,n){(function(r){var i;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(){this._events={},this._conf&&c.call(this,this._conf)}function c(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._maxListeners=void 0!==t.maxListeners?t.maxListeners:10,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function u(t,e){var n="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+e+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=t,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function d(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,t)}function l(t,e,n,r){if(!n)return[];var i,o,a,s,c,u,d,p=[],h=e.length,f=e[r],v=e[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(p=p.concat(l(t,e,n[a],r+1)));return p}if("**"===f){for(a in(d=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(p=p.concat(l(t,e,n,h))),n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!d&&(p=p.concat(l(t,e,n[a],h))),p=p.concat(l(t,e,n[a],r))):p=a===v?p.concat(l(t,e,n[a],r+2)):p.concat(l(t,e,n[a],r)));return p}p=p.concat(l(t,e,n[f],r+1))}if((s=n["*"])&&l(t,e,s,r+1),c=n["**"])if(r<h)for(a in c._listeners&&l(t,e,c,h),c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===v?l(t,e,c[a],r+2):a===f?l(t,e,c[a],r+1):((u={})[a]=c[a],l(t,e,{"**":u},r+1)));else c._listeners?l(t,e,c,h):c["*"]&&c["*"]._listeners&&l(t,e,c["*"],h);return p}function p(t,e){for(var n=0,r=(t="string"==typeof t?t.split(this.delimiter):t.slice()).length;n+1<r;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var i=this.listenerTree,o=t.shift();void 0!==o;){if(i[o]||(i[o]={}),i=i[o],0===t.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(e),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,u.call(this,i._listeners.length,o))):i._listeners=e,!0;o=t.shift()}return!0}d.EventEmitter2=d,d.prototype.delimiter=".",d.prototype.setMaxListeners=function(t){void 0!==t&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},d.prototype.event="",d.prototype.once=function(t,e){return this._once(t,e,!1)},d.prototype.prependOnceListener=function(t,e){return this._once(t,e,!0)},d.prototype._once=function(t,e,n){return this._many(t,1,e,n),this},d.prototype.many=function(t,e,n){return this._many(t,e,n,!1)},d.prototype.prependMany=function(t,e,n){return this._many(t,e,n,!0)},d.prototype._many=function(t,e,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--e&&i.off(t,o),n.apply(this,arguments)}return o._origin=n,this._on(t,o,r),i},d.prototype.emit=function(){this._events||s.call(this);var t=arguments[0];if("newListener"===t&&!this._newListener&&!this._events.newListener)return!1;var e,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=t,a){case 1:o[r].call(this,t);break;case 2:o[r].call(this,t,arguments[1]);break;case 3:o[r].call(this,t,arguments[1],arguments[2]);break;default:o[r].apply(this,e)}}if(this.wildcard){o=[];var c="string"==typeof t?t.split(this.delimiter):t.slice();l.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[t])){switch(this.event=t,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(a-1),i=1;i<a;i++)e[i-1]=arguments[i];o.apply(this,e)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(e=new Array(a-1),i=1;i<a;i++)e[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=t,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,e)}return!0}if(!this._all&&"error"===t)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){this._events||s.call(this);var t=arguments[0];if("newListener"===t&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var e,n,r,i,o,a=[],c=arguments.length;if(this._all){if(c>3)for(e=new Array(c),i=1;i<c;i++)e[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=t,c){case 1:a.push(this._all[r].call(this,t));break;case 2:a.push(this._all[r].call(this,t,arguments[1]));break;case 3:a.push(this._all[r].call(this,t,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,e))}}if(this.wildcard){o=[];var u="string"==typeof t?t.split(this.delimiter):t.slice();l.call(this,o,u,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o)switch(this.event=t,c){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(e=new Array(c-1),i=1;i<c;i++)e[i-1]=arguments[i];a.push(o.apply(this,e))}else if(o&&o.length){if(o=o.slice(),c>3)for(e=new Array(c-1),i=1;i<c;i++)e[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=t,c){case 1:a.push(o[r].call(this));break;case 2:a.push(o[r].call(this,arguments[1]));break;case 3:a.push(o[r].call(this,arguments[1],arguments[2]));break;default:a.push(o[r].apply(this,e))}}else if(!this._all&&"error"===t)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},d.prototype.on=function(t,e){return this._on(t,e,!1)},d.prototype.prependListener=function(t,e){return this._on(t,e,!0)},d.prototype.onAny=function(t){return this._onAny(t,!1)},d.prototype.prependAny=function(t){return this._onAny(t,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(t,e){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},d.prototype._on=function(t,e,n){if("function"==typeof t)return this._onAny(t,e),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this._newListener&&this.emit("newListener",t,e),this.wildcard?(p.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),n?this._events[t].unshift(e):this._events[t].push(e),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,u.call(this,this._events[t].length,t))):this._events[t]=e,this)},d.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();r=l.call(this,null,i,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var s=r[o];if(n=s._listeners,a(n)){for(var c=-1,u=0,d=n.length;u<d;u++)if(n[u]===e||n[u].listener&&n[u].listener===e||n[u]._origin&&n[u]._origin===e){c=u;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[t].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,e),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete s._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,e))}return function t(e){if(void 0!==e){var n=Object.keys(e);for(var r in n){var i=n[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&t(e[i]),0===Object.keys(o).length&&delete e[i])}}}(this.listenerTree),this},d.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(n=0,r=(e=this._all).length;n<r;n++)if(t===e[n])return e.splice(n,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(e=this._all,this._removeListener)for(n=0,r=e.length;n<r;n++)this.emit("removeListenerAny",e[n]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(t){if(void 0===t)return!this._events||s.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),n=l.call(this,null,e,this.listenerTree,0),r=0;r<n.length;r++){n[r]._listeners=null}else this._events&&(this._events[t]=null);return this},d.prototype.listeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return l.call(this,e,n,this.listenerTree,0),e}return this._events||s.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},d.prototype.eventNames=function(){return Object.keys(this._events)},d.prototype.listenerCount=function(t){return this.listeners(t).length},d.prototype.listenersAny=function(){return this._all?this._all:[]},void 0===(i=function(){return d}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(112))},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(1),i=n(50),o=n(41),a=function(t){var e;return"prebid"===t.type?null===(e=t.prebidConfig)||void 0===e?void 0:e.floorPrice:s(t)},s=function(t){var e,n;return(null===(e=t.impressionData)||void 0===e?void 0:e.pricing)||(null===(n=t.apiImpressionData)||void 0===n?void 0:n.price)},c=function(){function t(t){this._players=null,this._secondPrice=null,this._players=t}return t.prototype.getFloor=function(t){return this._getFloorByDemandType(t)},t.prototype.setSecondPrice=function(t){r.a.debug("Second price set to: ".concat(t)),this._secondPrice=t},t.prototype.resetSecondPrice=function(){r.a.debug("Second price reset"),this._secondPrice=null},t.prototype.getChallengedPriceByAd=function(t){return t&&t.cpm?Object(i.c)(1.2*t.cpm):this.getChallengedPriceBySessionPrice()},t.prototype.getChallengedPriceBySessionPrice=function(){return Object(i.c)(1.2*this._players.sessionPrice)},t.prototype._getFloorByDemandType=function(t){var e=this,n=function(n){var r;return null!==(r=Object(o.b)(t))&&void 0!==r?r:Math.max(e._secondPrice||0,a(n))};return t.ignoreMLRecommendation?t.ars&&t.ars.originalCPM?t.ars.originalCPM:(r.a.warn("Ignoring ML Recommendation. ARS originalCPM missing, using PlayerData floor."),n(t)):n(t)},t.prototype.applyPriceFactor=function(t){var e=t.cpm,n=t.priceFactor,i=t.vastId;if(e&&n&&n>=1&&n<=100){var o=e-e*n/100;r.a.log("price factor: vastId ".concat(i,", CPM: ").concat(e,", priceFactor: ").concat(n,", calculatedPrice: ").concat(o)),t.setCPM(o)}},t}()},function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return v}));var r=n(20),i=n(13),o=n(58),a=n(0),s=n(15),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t){return null!=t.cxpid&&null!=t.cxvid}function d(t){return"jsima"==t.adType?r.b.ImaJs:"jsvpaid"==t.adType?r.b.JsVpaid:r.b.Video}function l(t){return d(t)}function p(t,e,n){if(!(n<=0)){var r=((e.duration||0)/4).toFixed(2),u=n/4;if(e.quartile!==n)e.quartile!==n&&function(t,e){switch(t){case i.b.FIRST:a.b.emit(a.a.AD.FIRST_QUARTILE,Object(s.c)(e));break;case i.b.MIDPOINT:a.b.emit(a.a.AD.MIDPOINT,Object(s.c)(e));break;case i.b.THIRD:a.b.emit(a.a.AD.THIRD_QUARTILE,Object(s.c)(e))}}(n,e),e.quartile=n,t.serverEvents.demandEvent(e,c({name:"AdProgress",progress:u,duration:parseFloat(r)*n,durationDelta:parseFloat(r)},Object(o.c)(t))),1===u?t.eventDispatcher.sendAdCompleteEvent(e,t):(t.eventDispatcher.sendAdProgressEvent(e,u,t),a.b.emit(a.a.AD.PROGRESS,{demand:e,quartile:n,progress:u}))}}function h(t,e){Object(r.d)(t,e.playerId,e.vastId,e.demandId),u(e)&&Object(r.d)(t,e.cxpid,e.cxvid)}function f(t,e){var n=(((new Date).getTime()-e.loadAdTime)/1e3).toFixed(1);v(t,r.a.E_LOADED,e,{time:n,memUsed:null,vastType:l(e),actualVastType:d(e)}),u(e)&&Object(r.e)(t,r.a.E_SERVED_AND_START,{},{playerId:e.playerId})}function v(t,e,n,i){u(n)?(n.cedatoxPlayerId=null,n.cedatoxVastId=n.cxvid,n.chosenVastId=null,n.parentPlayerId=n.cxpid,Object(r.e)(t,e,n,i),n.cedatoxPlayerId=n.playerId,n.cedatoxVastId=null,n.chosenVastId=n.vastId,n.parentPlayerId=null,i.playerId=n.cxpid,i.vastId=n.cxvid,Object(r.e)(t,e,n,i)):Object(r.e)(t,e,n,i)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return A})),n.d(e,"c",(function(){return y}));var r,i=n(12),o=n(38),a=n(31),s=function(){function t(t){this.playerData=t}return t.prototype.xhr=function(){return Object(a.b)()},t.prototype.supported=function(){return!!this.xhr()},t.prototype.extractAdSystems=function(t){if(!t)return[];var e=t.querySelectorAll("AdSystem");return Array.from(e).map((function(t){return null==t?void 0:t.textContent})).filter(Boolean)},t.prototype.get=function(t,e,n){var r=this;Object(a.f)({timeout:e.timeout,url:t,withCredentials:e.withCredentials,xhrObject:this.xhr()}).then((function(t){try{var e=Object(a.d)(t),i=r.extractAdSystems(e);r.playerData.addAddSystem(i),r.playerData.vastResponseXML=e,n(null,r.playerData.vastResponseXML)}catch(e){var o={xhr:t,code:a.a.UNKNOWN,message:e.message,fromUrlHandler:!0};-1!==o.message.indexOf("cross-origin")&&(o.code=a.a.CORS),n(o,null)}}),(function(t){var e={xhr:t.xhr,code:t.code,fromUrlHandler:!0,message:t.data&&t.data.message,status:t.data&&t.data.status};n(e,null)}))},t}(),c=n(13),u=n(22),d=n(15),l=n(4),p=n(2),h=n(9),f=n(14),v=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.getErrorEvent=function(e){if(this.state==l.a.Fetching){var n={};return 20==e.code||21==e.code||22==e.code||24==e.code||23==e.code||25==e.code?n={name:"VastError",errorCode:e.code,message:e.message,retryCount:e.retryCount}:99==e.code?n={name:"VastFetchError",errorCode:e.code,message:e.message,retryCount:e.retryCount,credentials:e.credentials,timeout:!0}:90!=e.code&&91!=e.code&&92!=e.code&&93!=e.code&&94!=e.code&&95!=e.code&&96!=e.code&&97!=e.code&&98!=e.code||(n={name:"VastFetchError",errorCode:e.code,message:e.message,retryCount:e.retryCount,credentials:e.credentials}),e.status&&(n.status=e.status),{event:n,timed:!0}}return t.prototype.getErrorEvent.call(this,e)},e.prototype.getAdId=function(){var t;return this.ad&&(null===(t=this.ad)||void 0===t?void 0:t.id)||null},e.prototype.fetchAdUrl=function(t,e){var n=this;this.vastResponseXML=null;var r=Object(c.f)(p.b,this,t),o=r.error,a=r.vastUrl;if(!o){var u,d,l={withCredentials:Object(h.u)(),timeout:6e3,urlhandler:new s(this),response:this.vastResponseXML,wrapperLimit:this.vastWrapperLimit||10};p.b.DMVAST.client.totalCalls=0,a||(l.followAdditionalWrappers=!0),d=/^https/.test(a)?(u=p.b.DMVAST.client).get(a,l):/^data:;base64/.test(a)?(u=p.b.DMVAST.parser).parseVAST(this.vastResponseXML,l):a?(u=p.b.DMVAST.client).get(a,l):(u=p.b.DMVAST.parser).parseVAST(this.vastResponseXML,l);return(u.on?u:u.getParser()).on("VAST-resolving",(function(t){var e,r=t.wrapperAd;if(!n.parsedPrice){var i=(null==(e=r)?void 0:e.pricing)?{price:parseFloat(e.pricing.value),currency:e.pricing.currency}:{price:0},o=i.price,a=i.currency;o&&(n.parsedPrice=o,n.parsedCurrency=a)}})),d.then((function(t){return n.onVastResponse(t,null,l,e)})).catch((function(t){return n.onVastResponse(null,t,l,e)}))}Object(i.b)(p.b,this,29,{code:10,message:o,retryCount:this.retryCount})},e.prototype.onVastResponse=function(e,n,r,i){t.prototype.onAdResponse.call(this)&&this.handleVastResponse(e,n,r,i)},e.prototype.handleVastResponse=function(t,e,n,r){var o=this,a=Object(c.e)(this,e);a||(a=Object(c.j)(p.b,this,t))||Object(u.c)("initMedia",{players:p.b,playerData:this,log:!0},(function(){Object(d.f)(o),p.b.serverEvents.demandTimedEvent(o,{name:"VastFetched",credentials:null==n?void 0:n.withCredentials,retryCount:o.retryCount}),r(p.b,o)}),(function(){a={reason:28,code:3,iabError:f.b.UNDEFINED_ERROR,message:"initMedia js exception"}})),a&&a.reason&&(Object(c.h)(p.b,this.vastId,a.code,a.message,null,this,!1,!0),Object(i.b)(p.b,this,a.reason,{code:a.code,message:a.message,iabError:a.iabError,credentials:null==n?void 0:n.withCredentials,retryCount:this.retryCount,status:e&&e.status}))},e}(o.a),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.destroyAd=function(){var e=this;setTimeout((function(){return t.prototype.destroyAd.call(e)}),5e3)},e}(m);function y(t){return!!p.b.chilled||t&&p.b.isAdContent()}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=function(t){return Math.round(100*t)/100};function i(t,e){var n=t[0];return t.forEach((function(t){Math.abs(t-e)<Math.abs(n-e)&&(n=t)})),n}function o(t,e){return Math.random()*(e-t)+t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(21),i=n(55),o=function(t){var e;return t?{consentApi:t.consentApi,consentString:t.consentString,gdprApplies:null===(e=t.apiResponse)||void 0===e?void 0:e.gdprApplies,excoVendor:Object(r.b)(i.a,t)}:{}},a=function(t){return t?{consentApi:t.consentApi,consentString:t.consentString}:{}},s=function(t){var e,n,i=null==t?void 0:t.consentType,s=((e={})[r.a.TCF]=o,e[r.a.GPP]=a,e);return(null===(n=s[i])||void 0===n?void 0:n.call(s,t))||{}},c=function(t){var e=t.consentListener.getAvailableConsents();return{userConsent:{countryCode:t.country,consentData:{gdpr:s(e[r.a.TCF]),gpp:s(e[r.a.GPP])}}}}},function(t,e,n){"use strict";function r(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,r)}function i(){return r(!1)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return Te})),n.d(e,"d",(function(){return Ie})),n.d(e,"b",(function(){return Oe})),n.d(e,"a",(function(){return Se}));var r=n(27),i=n(20),o=n(8),a=n(58),s=n(9),c=n(22),u=n(28),d=n(17),l=n(1),p=n(38),h=n(4),f=n(44),v=n(15),m=n(32),A=n(12),y=n(10),b=n(2),g=n(11),E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},_=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},T=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function I(t,e){return _(this,void 0,void 0,(function(){var n,i,o,a;return T(this,(function(s){switch(s.label){case 0:return n=t.pubId,i=t.tamConfig,e&&e.reuseGlobalApstag?(P(window),window.apstag&&window.apstag.init||R(window,i),[2,window.apstag]):(a=function(t){var e=document.getElementById(Object(r.c)(t));return e?O(e.contentWindow):null}(n))?[3,2]:[4,S(t)];case 1:a=s.sent(),s.label=2;case 2:if(!(o=a))throw new Error("Error loading the TAM API for pubId: ".concat(n));return[2,o]}}))}))}function O(t){return t.apstag}function S(t){return _(this,void 0,void 0,(function(){var e,n,i;return T(this,(function(o){switch(o.label){case 0:return e=t.tamConfig,[4,Object(y.j)()];case 1:return(n=o.sent())?(i=n.contentWindow,Object(r.b)(n,e.pubId),function(t){(function(t){var e=t.document.getElementsByTagName("link");return Array.from(e).some((function(t){return"https://c.amazon-adsystem.com"===t.href}))})(t)||C(t)}(window),C(i),function(t){t.__tcfapi=window.__tcfapi}(i),function(t){Object.defineProperty(t,"innerWidth",{writable:!0,configurable:!0,value:window.innerWidth}),Object.defineProperty(t,"innerHeight",{writable:!0,configurable:!0,value:window.innerHeight})}(i),b.b.isAmp&&function(t){try{window.name&&(t.context=E(E({},JSON.parse(window.name)),{tagName:"AMP-AD"}))}catch(t){}}(i),P(i),R(i,e),[4,(a=i,new Promise((function(t,e){try{var n=a.document,r=n.createElement("script");r.src="https://c.amazon-adsystem.com/aax2/apstag.js",r.async=!0,r.onload=function(){return t()},n.head.appendChild(r)}catch(t){e()}})))]):[3,3];case 2:return o.sent(),[2,O(i)];case 3:return[2]}var a}))}))}function C(t){var e=t.document,n=e.createElement("link");n.rel="dns-prefetch",n.href="https://c.amazon-adsystem.com",e.head.appendChild(n);var r=document.createElement("link");r.rel="preconnect",r.href="https://c.amazon-adsystem.com",e.head.appendChild(r)}function P(t){t.apstag=t.apstag||{_Q:[],init:function(){t.apstag._Q.push(["i",arguments,(new Date).getTime()])},fetchBids:function(){t.apstag._Q.push(["f",arguments,(new Date).getTime()])}}}var w=function(){var t,e,n,r,i=(r=null===(n=null===(e=null===(t=null===b.b||void 0===b.b?void 0:b.b.rawConfig)||void 0===t?void 0:t.externalConfig)||void 0===e?void 0:e.ortb2)||void 0===n?void 0:n.site,g.a.object(r)?r:null);return i?{ortb2:{site:i}}:{}};function R(t,e){var n;t.__EXCO=t.__EXCO||{tamInitialized:!1},t.__EXCO.tamInitialized||(t.__EXCO.tamInitialized=!0,t.apstag.init({pubID:e.pubId,deals:null===(n=e.deals)||void 0===n||n,videoAdServer:"EX.CO",bidTimeout:8e3,signals:E({},w())}))}var D=n(31),L=n(6),N=function(){return(N=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},k=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},j=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function x(t,e){return k(this,void 0,void 0,(function(){var n,r,i,o,a;return j(this,(function(s){switch(s.label){case 0:return t.state=h.a.Prefetching,n=[],t.cachedBids?(n=t.cachedBids,[3,4]):[3,1];case 1:return[4,U(t,e)];case 2:return[4,M(s.sent(),t)];case 3:n=s.sent(),s.label=4;case 4:return n.length>0?(r=function(t,e){var n=t.slotId;return e.find((function(t){return t.slotID===n}))||null}(t,n),(i=function(t){var e,n,r=t.targeting,i=null;i=r&&!Array.isArray(r)?r.amzniid||r.amzniid_sp?{iid:r.amzniid||r.amzniid_sp,bid:r.amznbid||r.amznbid_sp,pmp:!!r.amznbid_sp}:null:t.amzniid||t.amzniid_sp?{iid:t.amzniid||t.amzniid_sp,bid:t.amznbid||t.amznbid_sp,pmp:!!t.amznbid_sp}:null;i&&(null===(n=null===(e=window.location)||void 0===e?void 0:e.href)||void 0===n?void 0:n.includes("amzn_debug_mode=1"))&&(i.debug=1);return i}(r))?[4,F(t,i)]:[2,!1]):[3,6];case 5:return o=s.sent(),a=function(t){return"https://aax.amazon-adsystem.com/e/dtb/vast?b=".concat(t.iid).concat(t.pmp?"":"&pp=".concat(t.bid),"&rnd=").concat(Math.round((new Date).getTime()/1e3))}(i),function(t,e){var n=e.vastURL,r=e.priority,i=void 0===r?0:r;t.vastURL=n,t.impressionData={pricing:+i,currency:"USD",impType:"TAM"}}(t,{vastURL:a,priority:o}),[2,!0];case 6:return t.state=h.a.Finished,[2,!1]}}))}))}function U(t,e){return k(this,void 0,void 0,(function(){return j(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,I(t,e)];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}}))}))}function M(t,e){return k(this,void 0,void 0,(function(){return j(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var i={};b.b.domain&&(i.contextURL=b.b.domain.includes("://")?b.b.domain:"https://".concat(b.b.domain));try{t.fetchBids(function(t){var e=t.slotId,n=t.floorPrice;return{slots:[N({slotID:e,mediaType:"video",timeout:"8000"},V(n))]}}(e),(function(t){return n(t)}),i)}catch(t){r([])}}))];case 1:return[2,n.sent()]}}))}))}function V(t){return void 0===t&&(t=null),t&&t>.01?{floor:{value:Math.floor(100*t),currency:"USD"}}:{}}function F(t,e){return k(this,void 0,void 0,(function(){var n;return j(this,(function(r){return n={amznbid:e.bid,debug:e.debug},[2,B(Object(s.a)(t.tamProxy,n),t)]}))}))}function B(t,e){return k(this,void 0,void 0,(function(){var n;return j(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Object(D.c)(t)];case 1:return[2,r.sent().cpm];case 2:return n=r.sent(),l.a.error("TAM mapping error: ".concat(n.message),n,{vastId:e.vastId,url:t,category:{main:L.a.MONETIZATION}}),[2,e.floorPrice];case 3:return[2]}}))}))}var q=n(39),G=n(23),H=n(5),W=n(61),Y=n(18);function J(t,e){return e.filter((function(e){var n;return!(null===(n=null==e?void 0:e.adSlotTarget)||void 0===n?void 0:n.enable)||e.adSlotTarget.list.includes(t)}))}function z(t){return t.filter((function(t){var e=W.a.get(t.vastId);return!e||e.shakranistimErrors<H.c}))}var K=function(t,e){var n=function(t){var e=Math.max.apply(Math,t.map((function(t){return t.priority||0})));return t.filter((function(t){return(t.priority||0)===e}))}(e);return n=function(t,e){return e.filter((function(e){return!e.requireViewability||t.partiallyInView}))}(t,n),n=J(t.adSlotCurrentType,n)},X=function(t){var e=t[0];return t.forEach((function(t){t.cpm>e.cpm&&(e=t)})),e},Q=function(t,e){return X(K(t,e))},Z=function(t,e,n,r){return function(t,e,n){for(var r=null,i=t.length,o=1<<i,a=1;a<o;a++){for(var s={ads:[],adsCount:new Map,totalDuration:0,totalCpm:0},c=0;c<i&&s.ads.length<n;c++){var u=s.adsCount.get(t[c].vastId)||0,d=t[c].playCappingInSlot&&u>=t[c].playCappingInSlot;a&1<<c&&!d&&(s.totalDuration+=t[c].duration||15,s.totalCpm+=t[c].cpm,s.adsCount.set(t[c].vastId,(s.adsCount.get(t[c].vastId)||0)+1),s.ads.push({adId:t[c].vastId,cpm:t[c].cpm}))}s.totalDuration<=e&&(!r||s.totalCpm>r.totalCpm)&&(r=s)}r&&r.ads.sort((function(t,e){return e.cpm-t.cpm}));return r}(K(t,e),n,r)};function $(t,e){var n;return!(!e.ars||Object(H.p)(e)||!t.dropBidsUnderOriginalCPM)&&e.cpm<(null===(n=e.ars)||void 0===n?void 0:n.originalCPM)}function tt(t){return Object(Y.e)(new Date,t.cacheEntryTime)>t.cacheTTL}var et=n(24),nt=function(t,e){return t.reduce((function(t,n){return t[+!e(n)].push(n),t}),[[],[]])},rt=n(52),it=n(0),ot=n(7),at=n(26),st=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},ct=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var ut=function(t,e){return void 0===e&&(e={}),st(void 0,void 0,void 0,(function(){return ct(this,(function(n){return[2,new Promise((function(n){var r,i,o,a;try{var s={playerId:e.playerId,content:(i=null==e?void 0:e.content,o=null==i?void 0:i.relevantContentItem,a=null==i?void 0:i.relevantContentItemIndex,o?{index:a,src:o.url,fallback:o.fallbackUrl,id:o.id,title:o.title,poster:o.poster,duration:o.duration,link:o.link,keywords:null==o?void 0:o.keywords,tags:null==o?void 0:o.tags,description:o.description,customParams:o.customParams}:null),muted:e.muted,isLive:null===(r=null==e?void 0:e.content)||void 0===r?void 0:r.isLiveStream};t.async?t.fn(s,(function(t,e){return n({url:t,available:e})})):n({url:t.fn(s),available:!0})}catch(t){}}))]}))}))},dt=function(t,e,n){return void 0===n&&(n={}),st(void 0,void 0,void 0,(function(){var r,i;return ct(this,(function(o){switch(o.label){case 0:return(r=t.find((function(t){return t.id==e.id})))?(e.url&&(r.url=e.url),1===n.auctionId&&e.url||!e.urlGenerator||!e.urlGenerator.fn?[3,2]:[4,Object(et.a)(ut(e.urlGenerator,n),e.urlGenerator.timeout||500,{url:"",available:!1})]):[2,t];case 1:if((i=o.sent())&&(i.url&&(r.url=i.url),!i.available))return[2,t.filter((function(t){return t.id!=e.id}))];o.label=2;case 2:return[2,t]}}))}))},lt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},pt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ht={publisher:0,exco:0,delay:0,startFrom:2},ft=function(){function t(t){void 0===t&&(t={}),this._config=t,this._config.retries=Object.assign(ht,this._config.retries||{})}return Object.defineProperty(t.prototype,"enabled",{get:function(){return!!this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retries",{get:function(){return this._config.retries},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startFrom",{get:function(){return this._config.retries.startFrom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRetries",{get:function(){return Math.max(this.retries.exco,this.retries.publisher)},enumerable:!1,configurable:!0}),t.prototype.isEnabled=function(t){var e=t.auctionId;return!!this.maxRetries&&e>=this.startFrom},t.prototype.retry=function(t,e,n){return lt(this,void 0,void 0,(function(){var r,i,o,a,s,c;return pt(this,(function(u){switch(u.label){case 0:r=n.timeoutInSeconds,i=n.auctionId,o=Date.now(),a=0,u.label=1;case 1:return a<=this.maxRetries&&Date.now()-o<1e3*(r-1)?[4,t()]:[3,6];case 2:return s=u.sent(),c=this._filterDemands(a,s),l.a.log("Auction try ".concat(a+1),{auctionId:i,retrying:c,demands:s}),[4,e(c,a)];case 3:return u.sent(),this.retries.delay&&this.maxRetries?[4,Object(et.b)(this.retries.delay)]:[3,5];case 4:u.sent(),u.label=5;case 5:return a++,[3,1];case 6:return[2]}}))}))},t.prototype._filterDemands=function(t,e){var n=this;return e.filter((function(e){return e.isPubDemand?t<=n.retries.publisher:t<=n.retries.exco}))},t}(),vt=n(14),mt=n(51),At=n(21),yt=function(){function t(){}return t.grantedConsent=function(t){return Object(At.g)(t[At.a.TCF])},t}(),bt=function(){function t(){}return t.grantedConsent=function(){return!0},t}(),gt=function(){function t(){}return t.consentGranted=function(e){return t.didUserGrantConsentForAuction(e)},t.didUserGrantConsentForAuction=function(t){var e=t.country,n=t.region,r=t.consentListener.getAvailableConsents();return Object(At.h)(e)?yt.grantedConsent(r):!Object(At.i)({country:e,region:n})||bt.grantedConsent()},t}();function Et(t){return!t.fetchAdditionalCreativeInfo&&Object(H.s)(t)}function _t(t,e,n){var r=function(t,e){var n=nt(t,(function(t){return Et(t)})),r=n[0],i=n[1];if(1===e.auctionId&&e.isBidBird)return[i,[]];return[i,r]}(t,n),i=r[0],o=r[1],a=function(t,e){var n=1e3*t;if(e.length>0)return[.75*n,.25*n];return[n,0]}(e,o);return[{demands:i,timeout:a[0]},{demands:o,timeout:a[1]}]}var Tt,It=n(41),Ot=function(){return(Ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},St=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Ct=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Pt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(t){t[t.First=0]="First",t[t.Second=1]="Second",t[t.Third=2]="Third"}(Tt||(Tt={}));var wt=function(){function t(t,e){this._ads=[],this._demandList=[],this._isFetching=!1,this._refreshIntervalRef=null,this._auctionPromise={},this._newAds=[],this._players=t,this._priceService=e,this._auctionRetry=new ft(t.auctionRetry)}return Object.defineProperty(t.prototype,"pending",{get:function(){return this.getAdsByState(this._ads,h.a.Fetched)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._refreshIntervalRef=setInterval(this._refresh.bind(this),1e3)},t.prototype.fetchAds=function(t){var e=t.exclude,n=void 0===e?[]:e,r=t.timeoutInSeconds,i=t.slotType;return St(this,void 0,void 0,(function(){var t,e,o=this;return Ct(this,(function(a){switch(a.label){case 0:return this._shouldDoAuction()?(t=new Date,this._players.auctionId++,this._players.customReportId=Object(rt.a)(),this._players.reporting.sendAuctionStartEvent&&this._players.eventDispatcher.sendAuctionStartEvent({auctionId:this._players.auctionId}),this._isFetching=!0,this._players.fetchTime=Date.now(),this._newAds=[],this._auctionRetry.isEnabled({auctionId:this._players.auctionId})?[4,this._auctionRetry.retry((function(){return St(o,void 0,void 0,(function(){return Ct(this,(function(t){switch(t.label){case 0:return[4,this._getDemandsToFetch(n,i)];case 1:return[2,t.sent()]}}))}))}),(function(e,n){return St(o,void 0,void 0,(function(){return Ct(this,(function(i){switch(i.label){case 0:return[4,this._doAuction(e,r,t,n)];case 1:return[2,i.sent()]}}))}))}),{timeoutInSeconds:r,auctionId:this._players.auctionId})]:[3,2]):(l.a.log("Fetching ads aborted - fetch is already in progress"),[2]);case 1:return a.sent(),[3,5];case 2:return[4,this._getDemandsToFetch(n,i)];case 3:return e=a.sent(),[4,this._doAuction(e,r,t)];case 4:a.sent(),a.label=5;case 5:return this._isFetching=!1,l.a.info("Auction ended",{auctionId:this._players.auctionId,pending:this.pending,time:(new Date).getTime()-t.getTime()}),it.b.emit(it.a.INTERNAL.AUCTION.END,{auctionId:this._players.auctionId,pending:this.pending,newAds:this._newAds}),this._newAds=[],[2,this.pending]}}))}))},t.prototype._doAuction=function(t,e,n,r){return St(this,void 0,void 0,(function(){var i,o,a,s,c,u,d,p,h=this;return Ct(this,(function(f){switch(f.label){case 0:return this._demandList=r?Pt(Pt([],this._demandList,!0),t,!0):t,this._destroyAllSpentPlayerData(),Object(ot.d)(Pt(Pt([],this.pending,!0),this._demandList,!0),{override:!0}),it.b.emit(it.a.INTERNAL.AUCTION.START,{auctionId:this._players.auctionId,demandList:t}),l.a.log("Fetching ".concat(t.length," new demands"),t.map((function(t){return t.vastId}))),i=_t(t,e,{auctionId:this._players.auctionId}),o=i[0],a=o.demands,s=o.timeout,c=i[1],u=c.demands,d=c.timeout,[4,Object(et.a)(this._fetchPrimaryDemands(a,s,Tt.First),s,[],(function(t){return h.timeoutCallback(t,Tt.First)}))];case 1:return p=f.sent(),l.a.remote("Auction TotalTime - Auction 1 ".concat(Object(Y.c)(n.getTime())),{auctionId:this._players.auctionId,endTime:Object(Y.c)(n.getTime()),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),[4,this._doOtherAuctions({containsPremium:this._doesContainPremium(p),startTime:n},{demands:u,timeout:d})];case 2:return f.sent(),[2]}}))}))},t.prototype._doOtherAuctions=function(t,e){var n=t.containsPremium,r=t.startTime;return St(this,void 0,void 0,(function(){var t,i,o,a=this;return Ct(this,(function(s){switch(s.label){case 0:return t=e.demands.length>0,i=function(t){return l.a.remote("Auction TotalTime - Auction ".concat(t+1," ").concat(Object(Y.c)(r.getTime())," "),{auctionId:a._players.auctionId,endTime:Object(Y.c)(r.getTime()),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},o=function(t,e){var n=t.demands,r=t.timeout;return St(a,void 0,void 0,(function(){var t=this;return Ct(this,(function(o){return[2,Object(et.a)(this._fetchSecondaryDemands(n,r,e),r,[],(function(n){return t.timeoutCallback(n,e)})).then((function(){return i(e)}))]}))}))},t?n?(o(e,Tt.Second),[3,3]):[3,1]:[3,3];case 1:return[4,o(e,Tt.Second)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},t.prototype.forceAuctionEnd=function(){return St(this,void 0,void 0,(function(){var t,e=this;return Ct(this,(function(n){return l.a.log("Auction force end triggered"),t=function(t){return t.state>=h.a.Fetched},[2,Object(et.c)((function(){return e.pending.length>0}),{timeout:1500}).then((function(n){var r=n.time;if(!e._auctionPromise.resolved&&e._auctionPromise.resolver){e._auctionPromise.resolved=!0,e._auctionPromise.resolver(e.pending);var i=nt(e._demandList.map((function(t){var e=t.state,n=t.vastId,r=t.type;return{state:e,id:n,bidder:t.bidder,type:r,originalType:t.originalType}})),t),o=i[0],a=i[1];l.a.error("Auction end forced due to playback method",new Error("Auction end forced"),{resolved:o,ignored:a,time:r,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})}}))]}))}))},t.prototype._doesContainPremium=function(t){return!(!t||!t.length)&&!!t.find((function(e){return Object(H.x)(e,Object(H.j)(t))}))},t.prototype._allFetchedPromise=function(t,e,n){var r=this,i=function(t){return Array.from(t).filter((function(t){return t.state===h.a.Fetched}))},o=!!t.find((function(e){return Object(H.x)(e,Object(H.j)(t))})),a=new Set,s=Date.now();n===Tt.First&&Object(et.c)((function(){return e=i(a),o?!!(e.length>0&&e.find((function(e){return Object(H.x)(e,Object(H.j)(t))}))):1===r._players.auctionId&&void 0;var e}),{timeout:e}).then((function(){if(!r._auctionPromise.resolved){var e=i(a),n=Array.from(a).length/t.length;l.a.info("Auction pre resolved with",{isAnyPremium:o,leftovers:t.filter((function(t){return!1===a.has(t)})),resolvedRatio:n.toFixed(2),filledAmount:e.length,timePassed:(Date.now()-s)/1e3}),r._auctionPromise.resolved=!0,r._auctionPromise.resolver(e)}}));var c=function(e){var n;n=e,h.a.ScheduledFetch<=n.state&&n.state<h.a.Fetched||a.has(e)||(a.add(e),r._auctionPromise.resolved||a.size!==t.length||(r._auctionPromise.resolved=!0,r._auctionPromise.resolver(i(a))))};return new Promise((function(e){r._auctionPromise.resolver=e,r._auctionPromise.resolved=!1,t.forEach((function(t){return t.onStateChange((function(){c(t)}))}))}))},t.prototype._destroyAllSpentPlayerData=function(){ot.b.filter((function(t){return t.state>h.a.Playing})).forEach((function(t){return t.destroyAd()})),Object(ot.d)(ot.b.filter((function(t){return t.state>h.a.Playing})),{override:!0})},t.prototype._fetchPrimaryDemands=function(t,e,n){return St(this,void 0,void 0,(function(){var r,i,o,a,s,c,u;return Ct(this,(function(d){return r=this._allFetchedPromise(t,e,n),l.a.log("Primary Fetch",t.map((function(t){return{id:t.vastId,bidder:t.bidder,type:t.type,debug:t.gpvDemand}}))),this._initDemands(t),this._logBiddersInAuction(t,"Primary"),i=nt(t,(function(t){return Object(H.w)(t)})),o=i[0],a=i[1],s=nt(o,(function(t){return t.pbserver})),c=s[0],u=s[1],this._applyEXCOGoogleFloor(a),this._fetchVasts(this._players,a),this._fetchPrebids(this._players,u,!1),this._fetchPrebids(this._players,c,!0),[2,r]}))}))},t.prototype._applyEXCOGoogleFloor=function(t){var e=t.filter((function(t){return Object(H.n)(t)}));this._setFloorPrice(e,this._priceService.getChallengedPriceBySessionPrice())},t.prototype._fetchSecondaryDemands=function(t,e,n){return St(this,void 0,void 0,(function(){var r;return Ct(this,(function(i){return r=this._priceService.getChallengedPriceByAd(Q(this._players,this._ads)),0===t.length?[2,[]]:(this._initDemands(t,r),l.a.log("Secondary Fetch: floorPrice ".concat(r),{fetching:t.map((function(t){return{id:t.vastId,type:t.type}})),cached:this.pending.map((function(t){return{id:t.vastId,type:t.type}}))}),this._logBiddersInAuction(t,"Secondary"),this._fetchVasts(this._players,t),[2,this._allFetchedPromise(t,e,n)])}))}))},t.prototype._initDemands=function(t,e){this._setFloorPrice(t,e)},t.prototype._refresh=function(){this._isFetching&&this._isDoneFetching()&&(this._isFetching=!1,this._refreshIntervalRef&&clearInterval(this._refreshIntervalRef))},t.prototype._isGpvDataEmpty=function(){return 0===Object(H.i)(this._players.gpvData).length},t.prototype._isDoneFetching=function(){return!this._demandList.some((function(t){return function(t){return h.a.ScheduledFetch<=t.state&&t.state<h.a.Fetched}(t)}))},t.prototype.getAdsByState=function(t,e){return t.filter((function(t){return t.state===e}))},t.prototype._addAdToStack=function(t){this._ads.push(t),this._stampCashEntry(t),it.b.emit(it.a.INTERNAL.AUCTION.AD_FETCHED,{ad:t,auctionId:this._players.auctionId})},t.prototype._getDemandsToFetch=function(t,e){var n;return void 0===t&&(t=[]),St(this,void 0,void 0,(function(){var r,i,o,a,s,c,u;return Ct(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this._createNewFetchList()];case 1:return r=d.sent(),(null==(i=Object(H.e)(r))?void 0:i.length)||(null===(n=this.pending)||void 0===n?void 0:n.length)?((o=gt.consentGranted(this._players)?i:Object(H.d)(i)).sort((function(t,e){return e.priority-t.priority})),a=J(e,this._filterNonCachedDemands(this._filterExcludedDemands(o,t))),s=this._demandList.filter((function(t){return h.a.ScheduledFetch<=t.state&&t.state<h.a.Fetched})).map((function(t){return t.vastId})),c=a.filter((function(t){return!1===s.includes(t.vastId)})),[2,Object(f.b)(this._players,z(c))]):(l.a.log("Stopping ads because all the demands reached session capping"),it.b.emit(it.a.INTERNAL.AUCTION.STOP),[2,[]]);case 2:return u=d.sent(),l.a.error("Failed to create new fetch list",u,{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),[2,[]];case 3:return[2]}}))}))},t.prototype._filterNonCachedDemands=function(t){var e=this.pending.map((function(t){return t.vastId}));return t.filter((function(t){return!e.includes(t.vastId)}))},t.prototype._filterExcludedDemands=function(t,e){void 0===e&&(e=[]);var n=e.map((function(t){return t.vastId}));return t.filter((function(t){return!n.includes(t.vastId)}))},t.prototype._createNewFetchList=function(){return St(this,void 0,void 0,(function(){var t,e=this;return Ct(this,(function(n){switch(n.label){case 0:return[4,it.b.emitAsync(it.a.PLUGIN.ACTION.AUCTION,{players:this._players})];case 1:return n.sent(),t=Object(H.i)(this._players.gpvData),this._players.externalVastUrl?[4,dt(t,this._players.externalVastUrl,{content:this._players.content,playerId:this._players.excoPlayerId,auctionId:this._players.auctionId,muted:this._players.muted})]:[3,3];case 2:return t=n.sent(),[3,4];case 3:t=t.filter((function(t){return!t.externalDynamicVast})),n.label=4;case 4:return[2,t.map((function(t){return e._initPlayerData(new p.b(t,Object(H.f)(e._demandList,t.id)),e._players)}))]}}))}))},t.prototype._shouldDoAuction=function(){return this._players.monetize&&!this._isFetching&&!this._isGpvDataEmpty()},t.prototype._logBiddersInAuction=function(t,e){var n=Object(at.a)(t),r=n.bidders,i=n.transactionId,o=n.subTransactionId;l.a.remote("".concat(e," auction Fetch Main"),{bidders:r,transactionId:i,subTransactionId:o,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},t.prototype._fetchPrebids=function(t,e,n){return void 0===n&&(n=!1),St(this,void 0,void 0,(function(){var r,i=this;return Ct(this,(function(o){switch(o.label){case 0:return e.length>0?(r={exco:[],pubs:[]},e.forEach((function(e){Object(v.f)(e),(!e.cachedBids||n&&e.pbserver)&&(t.serverEvents.demandEvent(e,{name:"startVastPrefetch"}),e.requestTimeRecords.start=(new Date).getTime(),it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t),l.a.remote("Ad request: ".concat(e.vastId),Object(at.c)(e,Object(mt.a)(t)))),r[e.isPubDemand?"pubs":"exco"].push(e)})),[4,Object(m.b)(t,r.exco,n)]):[3,2];case 1:o.sent().onBid(this.onPrebidBidResponse.bind(this)).onDone(this.onPrebidAuctionDone.bind(this)).onDone((function(){return St(i,void 0,void 0,(function(){return Ct(this,(function(e){switch(e.label){case 0:return[4,Object(m.b)(t,r.pubs,n)];case 1:return e.sent().onBid(this.onPrebidBidResponse.bind(this)).onDone(this.onPrebidAuctionDone.bind(this)),[2]}}))}))})),o.label=2;case 2:return[2]}}))}))},t.prototype.timeoutCallback=function(t,e){l.a.remote("Monetization: auction timeout",{transactionId:this._players.auctionId,timeout:t,state:e,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},t.prototype.onPrebidBidResponse=function(t){var e=t.playerData;if(e.flowTimeout.cancel(),!1===t.vast||null===t.vast)return e.state=h.a.Error,void Object(A.b)(this._players,e,34,{code:80,message:"prefetch - no vast",iabError:vt.b.VAST_URL_UNAVAILABLE,retryCount:e.retryCount});t.vastXml&&(e.state=h.a.Fetched),this._players.serverEvents.demandTimedEvent(e,Ot({name:"VastPrefetched",retryCount:e.retryCount},e.impressionData&&{pricing:e.impressionData.pricing,currency:e.impressionData.currency})),this._fetchVast(this._players,e)},t.prototype.onPrebidAuctionDone=function(t){void 0===t&&(t=[]),setTimeout((function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.playerData;i?(i.state=h.a.Finished,i.flowTimeout.cancel()):l.a.warn("No PlayerData on Prebid Auction done",{bid:r})}}),10)},t.prototype.removeAdsExceedingCacheTTL=function(){var t=this;this._ads=this._ads.filter((function(e){return!e.cacheTTL||!tt(e)||(l.a.remote("Monetization: Ad ".concat(e.vastId," exceeded cache TTL - ").concat(e.cacheTTL," min"),{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),Object(A.b)(t._players,e),!1)}))},t.prototype.removeAdsExceededImpCappingFromCache=function(){var t=this;this._ads=this._ads.filter((function(e){return!Object(H.l)(e)||(l.a.remote("Removing Ad ".concat(e.vastId," from cache as it has reached impression capping"),{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),Object(A.b)(t._players,e),!1)}))},t.prototype._fetchVasts=function(t,e){var n=this;e.forEach((function(e){return n._resolveVast(t,e)}))},t.prototype._resolveVast=function(t,e){(function(t,e){if(!e.video)return!1;return e.skipVastTracker=!0,e.creative={},e.adType="video",e.mediaURL=e.video.url,e.adClickUrl=e.video.click,Object(v.f)(e),!0})(0,e)||(it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t),e.requestTimeRecords.start=(new Date).getTime(),this._isTAM(e)?(e.prefetch=function(){var n;return t.serverEvents.demandEvent(e,{name:"startVastPrefetch"}),x(e,{reuseGlobalApstag:null===(n=null==t?void 0:t.extraParams)||void 0===n?void 0:n.reuseGlobalApstag})},this._prefetchVast(t,e)):this._fetchVast(t,e))},t.prototype._isPrebid=function(t){return!!t.prebidConfig},t.prototype._isTAM=function(t){return"tam"===t.type},t.prototype._prefetchVast=function(t,e){var n=this;Object(v.f)(e);var r=e.prefetch(e),i=r,o=function(r,i){e.state==h.a.Prefetching&&(e.flowTimeout.cancel(),!1!==r&&null!==r&&("string"==typeof r&&(e.vastURL=r),i&&t.serverEvents.demandTimedEvent(e,Ot({name:"VastPrefetched",retryCount:e.retryCount},e.impressionData&&{pricing:e.impressionData.pricing,currency:e.impressionData.currency})),n._fetchVast(t,e)))};(null==i?void 0:i.then)?i.then((function(t){return o(t,!0)})):o(r)},t.prototype._fetchVast=function(t,e){e.state=h.a.Fetching;var n,r=e.vastXml,i=e.vastURL;if(e.googleOutstream)Rt(e,n);else if(!r){if(!i||"#"==i[0]||!i.trim())return;Rt(e,n=Object(q.b)(t,e)(i))}Object(H.w)(e)||Object(H.z)(e)||l.a.remote("Ad request: ".concat(e.vastId),Object(at.c)(e,Object(mt.a)(t))),Object(v.f)(e),e.fetchAdUrl(n,this._handleAdFetched.bind(this))},t.prototype._handleAdFetched=function(t,e){var n;if($(t,e))return Object(A.b)(t,e,39),void l.a.remote("Dropping bid due to CPM",{id:e.vastId,resCPM:e.cpm,originalCPM:null===(n=e.ars)||void 0===n?void 0:n.originalCPM,category:{main:L.a.MONETIZATION}});Object(v.e)(t,e),this._priceService.applyPriceFactor(e),this._addAdToStack(e),this._newAds.push(e),e.state=h.a.Fetched,e.requestTimeRecords.responded=(new Date).getTime(),e.requestTimeRecords.respondedFromStart=Object(Y.f)(e.requestTimeRecords.responded,e.requestTimeRecords.start),e.arrangeDuration(),t.eventDispatcher.sendResponseEvent(e,t),it.b.emit(it.a.INTERNAL.AD.FETCHED,{ad:e,players:t}),l.a.hasLoggers()&&l.a.remote("Ad response: ".concat(e.vastId),Ot(Ot({},Object(at.d)(e)),{category:{main:L.a.MONETIZATION,sub:L.b.AD_RESPONSE}}))},t.prototype._stampCashEntry=function(t){t.cacheEntryTime=new Date},t.prototype._setFloorPrice=function(t,e){var n=this;t.forEach((function(t){var r=Object(It.b)(t);t.floorPrice=null!=r?r:e||n._priceService.getFloor(t),n._isPrebid(t)&&Object(G.n)(t,t.floorPrice)}))},t.prototype.removeAdFromCache=function(t){var e=this._ads.indexOf(t);-1!==e&&(this._ads.splice(e,1),l.a.log("Removing ".concat(t.vastId," from cache"),{id:t.vastId,type:t.type}))},t.prototype.addToCache=function(t){!1===this._ads.includes(t)&&(this._stampCashEntry(t),t.state=h.a.Fetched,this._ads.push(t))},t.prototype._initPlayerData=function(t,e){return t.state=h.a.Prefetching,t.guid=Object(rt.a)(),t.loadAdTime=Date.now(),t.retryCount++,t.totalRoundNo++,e.totalVastRetries++,t.ad=null,t.creative=null,t.mediaURL="",t.adType=null,t.firedEvents={},t.vastTracker=null,t.skipVastTracker=!1,t.hasJSVPAID=!1,t.initVpaidOnStartDone=!1,t.transactionId=this._players.auctionId,Object(H.B)(t)&&function(t){t.adType="tam"}(t),this._players.auctionId>1&&(t.cachedBids=null),Object(It.a)(t,e),t},t.prototype.clearCache=function(){this._ads=[]},t}();function Rt(t,e){Object(H.t)(t,e)&&function(t,e){t.mediaURL=e,t.adType="jsima"}(t,e),Object(H.r)(t)&&Object(H.E)(t)}var Dt=n(50),Lt=n(34);function Nt(t){var e,n;return(null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.dynamicAuction)||{}}var kt,jt=function(){function t(){this.demandSubTransactionIdMap=new Map}return t.prototype.reset=function(){this.demandSubTransactionIdMap.clear()},t.prototype.incrementSubTransactionIds=function(t){var e=this;t.forEach((function(t){return e.incrementSubTransactionId(t)}))},t.prototype.incrementSubTransactionId=function(t){var e=this.demandSubTransactionIdMap.get(t.vastId)||0;this.demandSubTransactionIdMap.set(t.vastId,e+1),t.subTransactionId=this.demandSubTransactionIdMap.get(t.vastId)},t}(),xt=n(82),Ut=function(){return(Ut=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Mt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Vt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ft=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(t){t[t.First=0]="First",t[t.Second=1]="Second"}(kt||(kt={}));var Bt=function(){function t(t,e){this._ads=[],this._demandList=[],this._isFetching=!1,this._refreshIntervalRef=null,this._auctionPromise={},this._numberOfNoBidsAuctions=0,this._spacingApplied=!1,this._newAds=[],this._players=t,this._config=function(t){var e,n,r,i,o,a,s,c,u,d=Nt(t),l={sampleRate:100,restrictMinToOriginalPrice:!1,increasePriceFactor:1.1,decreasePriceFactorRange:{min:.3,max:.8},spaceRequestsInterval:{enabled:!1,factor:1,auctionsNoBids:3,startFromAuctionNum:10}};return{sampleRate:null!==(e=d.sampleRate)&&void 0!==e?e:l.sampleRate,restrictMinToOriginalPrice:d.restrictMinToOriginalPrice||l.restrictMinToOriginalPrice,increasePriceFactor:d.increasePriceFactor||l.increasePriceFactor,decreasePriceFactorRange:d.decreasePriceFactorRange||l.decreasePriceFactorRange,spaceRequestsInterval:{enabled:null!==(r=null===(n=d.spaceRequestsInterval)||void 0===n?void 0:n.enabled)&&void 0!==r?r:l.spaceRequestsInterval.enabled,factor:null!==(o=null===(i=d.spaceRequestsInterval)||void 0===i?void 0:i.factor)&&void 0!==o?o:l.spaceRequestsInterval.factor,auctionsNoBids:null!==(s=null===(a=d.spaceRequestsInterval)||void 0===a?void 0:a.auctionsNoBids)&&void 0!==s?s:l.spaceRequestsInterval.auctionsNoBids,startFromAuctionNum:null!==(u=null===(c=d.spaceRequestsInterval)||void 0===c?void 0:c.startFromAuctionNum)&&void 0!==u?u:l.spaceRequestsInterval.startFromAuctionNum}}}(this._players),this._priceService=e,this._subTransactionIdTracker=new jt}return Object.defineProperty(t.prototype,"pending",{get:function(){return this.getAdsByState(this._ads,h.a.Fetched)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._refreshIntervalRef=setInterval(this._refresh.bind(this),1e3)},t.prototype.fetchAds=function(t){var e,n=t.exclude,r=void 0===n?[]:n,i=t.timeoutInSeconds,o=t.slotType;return Mt(this,void 0,void 0,(function(){var t,n,a;return Vt(this,(function(s){switch(s.label){case 0:return this._shouldDoAuction()?(t=new Date,this._players.auctionId++,this._players.customReportId=Object(rt.a)(),this._subTransactionIdTracker.reset(),this._players.reporting.sendAuctionStartEvent&&this._players.eventDispatcher.sendAuctionStartEvent({auctionId:this._players.auctionId}),this._isFetching=!0,this._players.fetchTime=Date.now(),this._newAds=[],[4,this._getDemandsToFetch(r,o)]):(l.a.log("Fetching ads aborted - fetch is already in progress"),[2]);case 1:return n=s.sent(),[4,this._doAuction(n,i,t)];case 2:return s.sent(),this._isFetching=!1,0===this._newAds.length?this._numberOfNoBidsAuctions++:this._numberOfNoBidsAuctions=0,l.a.info("Auction ended",{auctionId:this._players.auctionId,pending:this.pending,time:(new Date).getTime()-t.getTime()}),a={auctionId:this._players.auctionId,pending:this.pending,newAds:this._newAds,spaceInterval:null},this._shouldSpaceAuctions()&&(this._spacingApplied=!0,a.spaceInterval={factor:(null===(e=this._config.spaceRequestsInterval)||void 0===e?void 0:e.factor)||1}),it.b.emit(it.a.INTERNAL.AUCTION.END,a),this._newAds=[],[2,this.pending]}}))}))},t.prototype._shouldSpaceAuctions=function(){var t;if(!(null===(t=this._config.spaceRequestsInterval)||void 0===t?void 0:t.enabled)||this._spacingApplied)return!1;var e=this._config.spaceRequestsInterval,n=e.auctionsNoBids,r=e.startFromAuctionNum,i=this._players.auctionId===n&&this._numberOfNoBidsAuctions===n,o=this._players.auctionId>=r;return i||o},t.prototype._doAuction=function(t,e,n,r){var i;return Mt(this,void 0,void 0,(function(){var o,a,s,c,u,d,p,h,f,v,m,A,y,b=this;return Vt(this,(function(g){switch(g.label){case 0:return this._demandList=r?Ft(Ft([],this._demandList,!0),t,!0):t,this._destroyAllSpentPlayerData(),Object(ot.d)(Ft(Ft([],this.pending,!0),this._demandList,!0),{override:!0}),it.b.emit(it.a.INTERNAL.AUCTION.START,{auctionId:this._players.auctionId,demandList:t}),l.a.log("Fetching ".concat(t.length," new demands"),t.map((function(t){return t.vastId}))),1!==this._players.auctionId?[3,2]:[4,Object(xt.a)(this._players.customMacros,{timeout:0})];case 1:o=g.sent(),a=[],o&&(null===(i=o.bids)||void 0===i?void 0:i.length)>0&&(a.push.apply(a,this._createPreResolvedDemands(o)),a.length>0&&(a.forEach((function(e){t.splice(t.findIndex((function(t){return t.vastId===e.vastId})),1)})),this._fetchPreResolvedBids(a,{time:n,timeoutInSeconds:e}).then((function(t){l.a.info("Initial Pre-resolved bids fetched: ".concat(t.length),t)})))),Object(xt.b)(this._players.customMacros).then((function(t){var r;if(t&&(null===(r=t.bids)||void 0===r?void 0:r.length)>0){var i=[];b._createPreResolvedDemands(t).forEach((function(t){a.every((function(e){return e.vastId!==t.vastId}))&&i.push(t)})),i.length>0&&b._fetchPreResolvedBids(i,{time:n,timeoutInSeconds:e}).then((function(t){l.a.info("Late pre-resolved bids fetched: ".concat(t.length),t)}))}})),g.label=2;case 2:return s=_t(t,e,{auctionId:this._players.auctionId}),c=s[0],u=c.demands,d=c.timeout,p=s[1],h=p.demands,f=p.timeout,this._setFloorPrices(u),[4,Object(et.a)(this._fetchPrimaryDemands(u,d,kt.First),d,[],(function(t){return b.timeoutCallback(t,kt.First)}))];case 3:return(null==(v=g.sent())?void 0:v.length)>0&&v.some((function(t){return!Object(H.F)(t)&&Object(H.u)(t)}))?(A=(m=v.push).apply,y=[v],[4,this.retryUp(v,{startTime:n,timeout:d})]):[3,5];case 4:return A.apply(m,y.concat([g.sent()])),[3,7];case 5:return v&&0!==v.length?[3,7]:[4,this.retryDown(u,{startTime:n,timeout:d})];case 6:v=g.sent(),g.label=7;case 7:return l.a.remote("Auction TotalTime - Auction 1 ".concat(Object(Y.c)(n.getTime())),{auctionId:this._players.auctionId,endTime:Object(Y.c)(n.getTime()),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),[4,this._doOtherAuctions({containsPremium:this._doesContainPremium(v),startTime:n},{demands:h,timeout:f})];case 8:return g.sent(),[2]}}))}))},t.prototype.retryUp=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,p=this;return Vt(this,(function(h){switch(h.label){case 0:if(n=[],r=e.timeout-Object(Y.b)(e.startTime),i=t.filter((function(t){return!Object(H.F)(t)&&Object(H.u)(t)})),0===t.length||0===i.length)return[2,n];if(!(o=X(t)))return l.a.error("No highest ad was found initially",new Error("No highest ad was found initially"),{playerData:t.map((function(t){return{id:t.vastId,cpm:t.cpm,type:t.type,tId:"".concat(t.transactionId,":").concat(t.subTransactionId)}})),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),[2,n];this._logRetry("Responsive demands ".concat(i.length," out of which ").concat(i.length," are viable"),i),a=this._createNewDemandsFromList(i),s=[],h.label=1;case 1:return c=1,u=Object(H.e)(null!=a?a:this._createNewDemandsFromList(s).filter((function(t){return!Object(H.F)(t)&&Object(H.u)(t)}))),this._incrementSubTransaction(u),a=null,d=o.cpm*this._config.increasePriceFactor,this._setFloorPrices(u,d),this._logRetry("Recalling new ".concat(u.length," demands with floor ").concat(d,"; Remaining timeout ").concat(r,"; Retry ").concat(c),u),[4,Object(et.a)(this._fetchPrimaryDemands(u,r,kt.First),e.timeout,[],(function(t){return p.timeoutCallback(t,kt.First)}))];case 2:s=h.sent(),this._logRetry("".concat(null==s?void 0:s.length," recalled responsive demands answered; Remaining timeout ").concat(r,"; Retry ").concat(c),s),s&&s.length>0&&((o=X(s))||l.a.error("No highest ad was found",new Error("No highest ad was found"),{playerData:s.map((function(t){return{id:t.vastId,cpm:t.cpm,type:t.type,tId:"".concat(t.transactionId,":").concat(t.subTransactionId)}})),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),n.push.apply(n,s),r=e.timeout-Object(Y.b)(e.startTime),c++),h.label=3;case 3:if((null==s?void 0:s.length)>0&&o&&r>0)return[3,1];h.label=4;case 4:return[2,n]}}))}))},t.prototype.retryDown=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i,o,a,s,c=this;return Vt(this,(function(u){switch(u.label){case 0:return n=Object(H.e)(t),r=n.filter((function(t){return!Object(H.F)(t)&&!Object(H.p)(t)&&!Object(H.D)(t)})),i=this._createNewDemandsFromList(r),this._incrementSubTransaction(i),o=[],(a=e.timeout-Object(Y.b)(e.startTime))<=0?[2,o]:(this._logRetry("Decreasing prices by factor; Remaining timeout ".concat(a),i),this._setFloorPricePerDemandByRangeFactor(i,this._config.decreasePriceFactorRange),[4,Object(et.a)(this._fetchPrimaryDemands(i,a,kt.First),a,[],(function(t){return c.timeoutCallback(t,kt.First)}))]);case 1:return s=u.sent(),this._logRetry("".concat(null==s?void 0:s.length," decreased responses"),s),s&&(null==s?void 0:s.length)>0&&(o=Ft([],s,!0)),[2,o]}}))}))},t.prototype._incrementSubTransaction=function(t){this._subTransactionIdTracker.incrementSubTransactionIds(t)},t.prototype._createNewDemandsFromList=function(t){var e=this,n=Object(H.i)(this._players.gpvData.filter((function(e){return t.some((function(t){return t.vastId.toString()===e.id}))}))).map((function(n){return e._initPlayerData(new p.b(n,Object(H.f)(t,n.id)),e._players)}));return n.forEach((function(t){return t.cachedBids=null})),n},t.prototype._doOtherAuctions=function(t,e){var n=t.containsPremium,r=t.startTime;return Mt(this,void 0,void 0,(function(){var t,i,o,a=this;return Vt(this,(function(s){switch(s.label){case 0:return t=e.demands.length>0,i=function(t){return l.a.remote("Auction TotalTime - Auction ".concat(t+1," ").concat(Object(Y.c)(r.getTime())," "),{auctionId:a._players.auctionId,endTime:Object(Y.c)(r.getTime()),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},o=function(t,e){var n=t.demands,r=t.timeout;return Mt(a,void 0,void 0,(function(){var t=this;return Vt(this,(function(o){return[2,Object(et.a)(this._fetchSecondaryDemands(n,r,e),r,[],(function(n){return t.timeoutCallback(n,e)})).then((function(){return i(e)}))]}))}))},t?n?(o(e,kt.Second),[3,3]):[3,1]:[3,3];case 1:return[4,o(e,kt.Second)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},t.prototype.forceAuctionEnd=function(){return Mt(this,void 0,void 0,(function(){var t,e=this;return Vt(this,(function(n){return l.a.log("Auction force end triggered"),t=function(t){return t.state>=h.a.Fetched},[2,Object(et.c)((function(){return e.pending.length>0}),{timeout:1500}).then((function(n){var r=n.time;if(!e._auctionPromise.resolved&&e._auctionPromise.resolver){e._auctionPromise.resolved=!0,e._auctionPromise.resolver(e.pending);var i=nt(e._demandList.map((function(t){var e=t.state,n=t.vastId,r=t.type;return{state:e,id:n,bidder:t.bidder,type:r,originalType:t.originalType}})),t),o=i[0],a=i[1];l.a.error("Auction end forced due to playback method",new Error("Auction end forced"),{resolved:o,ignored:a,time:r,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})}}))]}))}))},t.prototype._doesContainPremium=function(t){return!(!t||!t.length)&&!!t.find((function(e){return Object(H.x)(e,Object(H.j)(t))}))},t.prototype._allFetchedPromise=function(t,e,n){var r=this,i=function(t){return Array.from(t).filter((function(t){return t.state===h.a.Fetched}))},o=!!t.find((function(e){return Object(H.x)(e,Object(H.j)(t))})),a=new Set,s=Date.now();n===kt.First&&Object(et.c)((function(){return e=i(a),o?!!(e.length>0&&e.find((function(e){return Object(H.x)(e,Object(H.j)(t))}))):1===r._players.auctionId&&void 0;var e}),{timeout:e}).then((function(){if(!r._auctionPromise.resolved){var e=i(a),n=Array.from(a).length/t.length;l.a.info("Auction pre resolved with",{isAnyPremium:o,leftovers:t.filter((function(t){return!1===a.has(t)})),resolvedRatio:n.toFixed(2),filledAmount:e.length,timePassed:(Date.now()-s)/1e3}),r._auctionPromise.resolved=!0,r._auctionPromise.resolver(e)}}));var c=function(e){var n;n=e,h.a.ScheduledFetch<=n.state&&n.state<h.a.Fetched||a.has(e)||(a.add(e),r._auctionPromise.resolved||a.size!==t.length||(r._auctionPromise.resolved=!0,r._auctionPromise.resolver(i(a))))};return new Promise((function(e){r._auctionPromise.resolver=e,r._auctionPromise.resolved=!1,t.forEach((function(t){return t.onStateChange((function(){c(t)}))}))}))},t.prototype._destroyAllSpentPlayerData=function(){ot.b.filter((function(t){return t.state>h.a.Playing})).forEach((function(t){return t.destroyAd()})),Object(ot.d)(ot.b.filter((function(t){return t.state>h.a.Playing})),{override:!0})},t.prototype._fetchPreResolvedBids=function(t,e){return Mt(this,void 0,void 0,(function(){var n,r,i;return Vt(this,(function(o){return n=e.time,r=e.timeoutInSeconds,1===this._players.auctionId?(i=1e3*r-Object(Y.b)(n),l.a.info("Fetching BidBird Filled Demands: ".concat(t.length),{preResolvedDemands:t,remainingTime:i,timeoutInSeconds:r}),[2,this._fetchPrimaryDemands(t,i>0?i:0,kt.First)]):[2,[]]}))}))},t.prototype._fetchPrimaryDemands=function(t,e,n){return Mt(this,void 0,void 0,(function(){var r,i,o,a,s,c,u;return Vt(this,(function(d){return r=this._allFetchedPromise(t,e,n),l.a.log("Primary Fetch",t.map((function(t){return{id:t.vastId,bidder:t.bidder,type:t.type,debug:t.gpvDemand,cached:t.cachedBids}}))),i=nt(t,(function(t){return Object(H.w)(t)})),o=i[0],a=i[1],s=nt(o,(function(t){return t.pbserver})),c=s[0],u=s[1],this._applyEXCOGoogleFloor(a),this._fetchVasts(this._players,a),this._fetchPrebids(this._players,u,!1),this._fetchPrebids(this._players,c,!0),this._logBiddersInAuction(t,"Primary"),[2,r]}))}))},t.prototype._applyEXCOGoogleFloor=function(t){var e=t.filter((function(t){return Object(H.n)(t)}));this._setFloorPrices(e,this._priceService.getChallengedPriceBySessionPrice())},t.prototype._fetchSecondaryDemands=function(t,e,n){return Mt(this,void 0,void 0,(function(){var r,i=this;return Vt(this,(function(o){return r=this._priceService.getChallengedPriceByAd(Q(this._players,this._ads)),0===t.length?[2,[]]:(t.forEach((function(t){var e;i._setDemandFloorPrice(t,null!==(e=Object(It.b)(t))&&void 0!==e?e:r)})),l.a.log("Secondary Fetch: floorPrice ".concat(r),{fetching:t.map((function(t){return{id:t.vastId,type:t.type}})),cached:this.pending.map((function(t){return{id:t.vastId,type:t.type}}))}),this._logBiddersInAuction(t,"Secondary"),this._fetchVasts(this._players,t),[2,this._allFetchedPromise(t,e,n)])}))}))},t.prototype._refresh=function(){this._isFetching&&this._isDoneFetching()&&(this._isFetching=!1,this._refreshIntervalRef&&clearInterval(this._refreshIntervalRef))},t.prototype._isGpvDataEmpty=function(){return 0===Object(H.i)(this._players.gpvData).length},t.prototype._isDoneFetching=function(){return!this._demandList.some((function(t){return function(t){return h.a.ScheduledFetch<=t.state&&t.state<h.a.Fetched}(t)}))},t.prototype.getAdsByState=function(t,e){return t.filter((function(t){return t.state===e}))},t.prototype.removeAdsExceedingCacheTTL=function(){var t=this;this._ads=this._ads.filter((function(e){return!e.cacheTTL||!tt(e)||(l.a.remote("Monetization: Ad ".concat(e.vastId," exceeded cache TTL - ").concat(e.cacheTTL," min"),{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),Object(A.b)(t._players,e),!1)}))},t.prototype.removeAdsExceededImpCappingFromCache=function(){var t=this;this._ads=this._ads.filter((function(e){return!Object(H.l)(e)||(l.a.remote("Removing Ad ".concat(e.vastId," from cache as it has reached impression capping"),{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),Object(A.b)(t._players,e),!1)}))},t.prototype._addAdToStack=function(t){this._ads.push(t),this._stampCashEntry(t),it.b.emit(it.a.INTERNAL.AUCTION.AD_FETCHED,{ad:t,auctionId:this._players.auctionId})},t.prototype._getDemandsToFetch=function(t,e){var n;return void 0===t&&(t=[]),Mt(this,void 0,void 0,(function(){var r,i,o,a,s,c,u;return Vt(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this._createNewFetchList()];case 1:return r=d.sent(),(null==(i=Object(H.e)(r))?void 0:i.length)||(null===(n=this.pending)||void 0===n?void 0:n.length)?((o=gt.consentGranted(this._players)?i:Object(H.d)(i)).sort((function(t,e){return e.priority-t.priority})),a=J(e,this._filterExcludedDemands(o,t)),s=this._demandList.filter((function(t){return h.a.ScheduledFetch<=t.state&&t.state<h.a.Fetched})).map((function(t){return t.vastId})),c=a.filter((function(t){return!1===s.includes(t.vastId)})),[2,Object(f.b)(this._players,z(c))]):(l.a.log("Stopping ads because all the demands reached session capping"),it.b.emit(it.a.INTERNAL.AUCTION.STOP),[2,[]]);case 2:return u=d.sent(),l.a.error("Failed to create new fetch list",u),[2,[]];case 3:return[2]}}))}))},t.prototype._filterExcludedDemands=function(t,e){void 0===e&&(e=[]);var n=e.map((function(t){return t.vastId}));return t.filter((function(t){return!n.includes(t.vastId)}))},t.prototype._logBiddersInAuction=function(t,e){var n=Object(at.a)(t),r=n.bidders,i=n.transactionId,o=n.subTransactionId;l.a.remote("".concat(e," auction Fetch Multi Auction"),{bidders:r,transactionId:i,subTransactionId:o,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},t.prototype._createNewFetchList=function(){return Mt(this,void 0,void 0,(function(){var t,e=this;return Vt(this,(function(n){switch(n.label){case 0:return[4,it.b.emitAsync(it.a.PLUGIN.ACTION.AUCTION,{players:this._players})];case 1:return n.sent(),t=Object(H.i)(this._players.gpvData),this._players.externalVastUrl?[4,dt(t,this._players.externalVastUrl,{content:this._players.content,playerId:this._players.excoPlayerId,auctionId:this._players.auctionId,muted:this._players.muted})]:[3,3];case 2:return t=n.sent(),[3,4];case 3:t=t.filter((function(t){return!t.externalDynamicVast})),n.label=4;case 4:return[2,t.map((function(t){return e._initPlayerData(new p.b(t,Object(H.f)(e._demandList,t.id)),e._players)}))]}}))}))},t.prototype._shouldDoAuction=function(){return this._players.monetize&&!this._isFetching&&!this._isGpvDataEmpty()},t.prototype._fetchPrebids=function(t,e,n){return void 0===n&&(n=!1),Mt(this,void 0,void 0,(function(){var r,i=this;return Vt(this,(function(o){switch(o.label){case 0:return e.length>0?(r={exco:[],pubs:[]},e.forEach((function(e){Object(v.f)(e),e.cachedBids||(t.serverEvents.demandEvent(e,{name:"startVastPrefetch"}),e.requestTimeRecords.start=(new Date).getTime(),it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t),l.a.remote("Ad request: ".concat(e.vastId),Object(at.c)(e,Object(mt.a)(t)))),r[e.isPubDemand?"pubs":"exco"].push(e)})),[4,Object(m.b)(t,r.exco,n)]):[3,2];case 1:o.sent().onBid(this.onPrebidBidResponse.bind(this)).onDone(this.onPrebidAuctionDone.bind(this)).onDone((function(){return Mt(i,void 0,void 0,(function(){return Vt(this,(function(e){switch(e.label){case 0:return[4,Object(m.b)(t,r.pubs,n)];case 1:return e.sent().onBid(this.onPrebidBidResponse.bind(this)).onDone(this.onPrebidAuctionDone.bind(this)),[2]}}))}))})),o.label=2;case 2:return[2]}}))}))},t.prototype._createPreResolvedDemands=function(t){var e=this;if(!t||0===t.bids.length)return[];var n=Object(xt.d)(t);return n&&0!==n.length?n.map((function(t){var n=new p.b(t,Object(H.f)(e._demandList,t.id));return e._initPlayerData(n,e._players)})):[]},t.prototype.timeoutCallback=function(t,e){l.a.remote("Monetization: auction timeout",{transactionId:this._players.auctionId,timeout:t,state:e,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},t.prototype.onPrebidBidResponse=function(t){var e=t.playerData;if(e.flowTimeout.cancel(),!1===t.vast||null===t.vast)return e.state=h.a.Error,void Object(A.b)(this._players,e,34,{code:80,message:"prefetch - no vast",iabError:vt.b.VAST_URL_UNAVAILABLE,retryCount:e.retryCount});t.vastXml&&(e.state=h.a.Fetched),this._players.serverEvents.demandTimedEvent(e,Ut({name:"VastPrefetched",retryCount:e.retryCount},e.impressionData&&{pricing:e.impressionData.pricing,currency:e.impressionData.currency})),this._fetchVast(this._players,e)},t.prototype.onPrebidAuctionDone=function(t){void 0===t&&(t=[]),setTimeout((function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.playerData;i?(i.state=h.a.Finished,i.flowTimeout.cancel()):l.a.warn("No PlayerData on Prebid Auction done",{bid:r})}}),10)},t.prototype._fetchVasts=function(t,e){var n=this;e.forEach((function(e){return n._resolveVast(t,e)}))},t.prototype._resolveVast=function(t,e){(function(t,e){if(!e.video)return!1;return e.skipVastTracker=!0,e.creative={},e.adType="video",e.mediaURL=e.video.url,e.adClickUrl=e.video.click,Object(v.f)(e),!0})(0,e)||(it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t),e.requestTimeRecords.start=(new Date).getTime(),this._isTAM(e)?(e.prefetch=function(){var n;return t.serverEvents.demandEvent(e,{name:"startVastPrefetch"}),x(e,{reuseGlobalApstag:null===(n=null==t?void 0:t.extraParams)||void 0===n?void 0:n.reuseGlobalApstag})},this._prefetchVast(t,e)):this._fetchVast(t,e))},t.prototype._isPrebid=function(t){return!!t.prebidConfig},t.prototype._isTAM=function(t){return"tam"===t.type},t.prototype._prefetchVast=function(t,e){var n=this;Object(v.f)(e);var r=e.prefetch(e),i=r,o=function(r,i){e.state==h.a.Prefetching&&(e.flowTimeout.cancel(),!1!==r&&null!==r&&("string"==typeof r&&(e.vastURL=r),i&&t.serverEvents.demandTimedEvent(e,Ut({name:"VastPrefetched",retryCount:e.retryCount},e.impressionData&&{pricing:e.impressionData.pricing,currency:e.impressionData.currency})),n._fetchVast(t,e)))};(null==i?void 0:i.then)?i.then((function(t){return o(t,!0)})):o(r)},t.prototype._fetchVast=function(t,e){e.state=h.a.Fetching;var n,r=e.vastXml,i=e.vastURL;if(e.googleOutstream)qt(e,n);else if(!r){if(!i||"#"==i[0]||!i.trim())return;qt(e,n=Object(q.b)(t,e)(i))}Object(H.w)(e)||Object(H.z)(e)||l.a.remote("Ad request: ".concat(e.vastId),Object(at.c)(e,Object(mt.a)(t))),Object(v.f)(e),e.fetchAdUrl(n,this._handleAdFetched.bind(this))},t.prototype._handleAdFetched=function(t,e){var n;if($(t,e))return Object(A.b)(t,e,39),void l.a.remote("Dropping bid due to CPM",{id:e.vastId,resCPM:e.cpm,originalCPM:null===(n=e.ars)||void 0===n?void 0:n.originalCPM,category:{main:L.a.MONETIZATION}});Object(v.e)(t,e),this._priceService.applyPriceFactor(e),this._addAdToStack(e),this._newAds.push(e),e.state=h.a.Fetched,e.requestTimeRecords.responded=(new Date).getTime(),e.requestTimeRecords.respondedFromStart=Object(Y.f)(e.requestTimeRecords.responded,e.requestTimeRecords.start),e.arrangeDuration(),t.eventDispatcher.sendResponseEvent(e,t),it.b.emit(it.a.INTERNAL.AD.FETCHED,{ad:e,players:t}),l.a.hasLoggers()&&l.a.remote("Ad response: ".concat(e.vastId),Ut(Ut({},Object(at.d)(e)),{category:{main:L.a.MONETIZATION,sub:L.b.AD_RESPONSE}}))},t.prototype._stampCashEntry=function(t){t.cacheEntryTime=new Date},t.prototype._setFloorPricePerDemandByRangeFactor=function(t,e){var n=this;t.forEach((function(t){var r=Object(Dt.c)(Object(Dt.b)(e.min,e.max)*n._priceService.getFloor(t));n._setDemandFloorPrice(t,r)}))},t.prototype._setFloorPrices=function(t,e){var n=this;t.forEach((function(t){return n._setDemandFloorPrice(t,e)}))},t.prototype._setDemandFloorPrice=function(t,e){var n,r=e||this._priceService.getFloor(t);t.isPubDemand&&!Object(H.s)(t)&&this._config.restrictMinToOriginalPrice&&(null===(n=t.ars)||void 0===n?void 0:n.originalCPM)>r&&(r=t.ars.originalCPM),t.floorPrice=r,this._isPrebid(t)&&Object(G.n)(t,t.floorPrice)},t.prototype.removeAdFromCache=function(t){var e=this._ads.indexOf(t);-1!==e&&(this._ads.splice(e,1),l.a.log("Removing ".concat(t.vastId," from cache"),{id:t.vastId,type:t.type}))},t.prototype.addToCache=function(t){!1===this._ads.includes(t)&&(this._stampCashEntry(t),t.state=h.a.Fetched,this._ads.push(t))},t.prototype._initPlayerData=function(t,e){return t.state=h.a.Prefetching,t.guid=Object(rt.a)(),t.loadAdTime=Date.now(),t.retryCount++,t.totalRoundNo++,e.totalVastRetries++,t.ad=null,t.creative=null,t.mediaURL="",t.adType=null,t.firedEvents={},t.vastTracker=null,t.skipVastTracker=!1,t.hasJSVPAID=!1,t.initVpaidOnStartDone=!1,t.transactionId=this._players.auctionId,t.subTransactionId=0,Object(H.B)(t)&&function(t){t.adType="tam"}(t),this._players.auctionId>1&&(t.cachedBids=null),Object(It.a)(t,e),t},t.prototype.clearCache=function(){this._ads=[]},t.prototype._logRetry=function(t,e){l.a.info(t,null==e?void 0:e.map((function(t){return{id:t.vastId,cpm:t.cpm,type:t.type,tId:"".concat(t.transactionId,":").concat(t.subTransactionId)}})))},t}();function qt(t,e){Object(H.t)(t,e)&&function(t,e){t.mediaURL=e,t.adType="jsima"}(t,e),Object(H.r)(t)&&Object(H.E)(t)}var Gt,Ht=function(){return(Ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Wt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Yt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Jt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};!function(t){t[t.First=0]="First",t[t.Second=1]="Second",t[t.Third=2]="Third"}(Gt||(Gt={}));var zt=function(){function t(t,e){this._ads=[],this._demandList=[],this._isFetching=!1,this._refreshIntervalRef=null,this._auctionPromise={},this._newAds=[],this._players=t,this._priceService=e,this._subTransactionIdTracker=new jt}return Object.defineProperty(t.prototype,"pending",{get:function(){return this.getAdsByState(this._ads,h.a.Fetched)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._refreshIntervalRef=setInterval(this._refresh.bind(this),1e3)},t.prototype.fetchAds=function(t){var e=t.exclude,n=void 0===e?[]:e,r=t.timeoutInSeconds,i=t.slotType;return Wt(this,void 0,void 0,(function(){var t,e;return Yt(this,(function(o){switch(o.label){case 0:return this._shouldDoAuction()?(t=new Date,this._players.auctionId++,this._players.customReportId=Object(rt.a)(),this._subTransactionIdTracker.reset(),this._players.reporting.sendAuctionStartEvent&&this._players.eventDispatcher.sendAuctionStartEvent({auctionId:this._players.auctionId}),this._isFetching=!0,this._players.fetchTime=Date.now(),this._newAds=[],[4,this._getDemandsToFetch(n,i)]):(l.a.log("Fetching ads aborted - fetch is already in progress"),[2]);case 1:return e=o.sent(),[4,this._doAuction(e,r,t)];case 2:return o.sent(),this._isFetching=!1,l.a.info("Auction ended",{auctionId:this._players.auctionId,pending:this.pending,time:(new Date).getTime()-t.getTime()}),it.b.emit(it.a.INTERNAL.AUCTION.END,{auctionId:this._players.auctionId,pending:this.pending,newAds:this._newAds}),this._newAds=[],[2,this.pending]}}))}))},t.prototype._doAuction=function(t,e,n,r){return Wt(this,void 0,void 0,(function(){var i,o,a,s,c,u,d,p,h,f,v,m=this;return Yt(this,(function(A){switch(A.label){case 0:return this._demandList=r?Jt(Jt([],this._demandList,!0),t,!0):t,this._destroyAllSpentPlayerData(),Object(ot.d)(Jt(Jt([],this.pending,!0),this._demandList,!0),{override:!0}),it.b.emit(it.a.INTERNAL.AUCTION.START,{auctionId:this._players.auctionId,demandList:t}),l.a.log("Fetching ".concat(t.length," new demands"),t.map((function(t){return t.vastId}))),i=_t(t,e,{auctionId:this._players.auctionId}),o=i[0],a=o.demands,s=o.timeout,c=i[1],u=c.demands,d=c.timeout,this.addRandomParams(a),[4,Object(et.a)(this._fetchPrimaryDemands(a,s,Gt.First),s,[],(function(t){return m.timeoutCallback(t,Gt.First)}))];case 1:return p=A.sent(),g.a.array(p)?(f=(h=p.push).apply,v=[p],[4,this.secondAuction(a,{startTime:n,timeout:s})]):[3,3];case 2:f.apply(h,v.concat([A.sent()])),A.label=3;case 3:return l.a.remote("Auction TotalTime - Auction 1 ".concat(Object(Y.c)(n.getTime())),{auctionId:this._players.auctionId,endTime:Object(Y.c)(n.getTime()),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),[4,this._doOtherAuctions({containsPremium:this._doesContainPremium(p),startTime:n},{demands:u,timeout:d})];case 4:return A.sent(),[2]}}))}))},t.prototype.addRandomParams=function(t){this._setFloorPrice(t)},t.prototype.secondAuction=function(t,e){return Wt(this,void 0,void 0,(function(){var n,r,i,o,a=this;return Yt(this,(function(s){switch(s.label){case 0:return n=[],r=e.timeout-Object(Y.b)(e.startTime),i=t.filter((function(t){return Object(H.w)(t)})),0===t.length||0===i.length?[2,n]:(o=this._createNewDemandsFromList(i),this._incrementSubTransaction(o),this.addRandomParams(o),[4,Object(et.a)(this._fetchPrimaryDemands(o,r,Gt.First),e.timeout,[],(function(t){return a.timeoutCallback(t,Gt.First)}))]);case 1:return[2,s.sent()]}}))}))},t.prototype._incrementSubTransaction=function(t){this._subTransactionIdTracker.incrementSubTransactionIds(t)},t.prototype._createNewDemandsFromList=function(t){var e=this,n=Object(H.i)(this._players.gpvData.filter((function(e){return t.some((function(t){return t.vastId.toString()===e.id}))}))).map((function(n){return e._initPlayerData(new p.b(n,Object(H.f)(t,n.id)),e._players)}));return n.forEach((function(t){return t.cachedBids=null})),n},t.prototype._doOtherAuctions=function(t,e){var n=t.containsPremium,r=t.startTime;return Wt(this,void 0,void 0,(function(){var t,i,o,a=this;return Yt(this,(function(s){switch(s.label){case 0:return t=e.demands.length>0,i=function(t){return l.a.remote("Auction TotalTime - Auction ".concat(t+1," ").concat(Object(Y.c)(r.getTime())," "),{auctionId:a._players.auctionId,endTime:Object(Y.c)(r.getTime()),category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},o=function(t,e){var n=t.demands,r=t.timeout;return Wt(a,void 0,void 0,(function(){var t=this;return Yt(this,(function(o){return[2,Object(et.a)(this._fetchSecondaryDemands(n,r,e),r,[],(function(n){return t.timeoutCallback(n,e)})).then((function(){return i(e)}))]}))}))},t?n?(o(e,Gt.Second),[3,3]):[3,1]:[3,3];case 1:return[4,o(e,Gt.Second)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},t.prototype.forceAuctionEnd=function(){return Wt(this,void 0,void 0,(function(){var t,e=this;return Yt(this,(function(n){return l.a.log("Auction force end triggered"),t=function(t){return t.state>=h.a.Fetched},[2,Object(et.c)((function(){return e.pending.length>0}),{timeout:1500}).then((function(n){var r=n.time;if(!e._auctionPromise.resolved&&e._auctionPromise.resolver){e._auctionPromise.resolved=!0,e._auctionPromise.resolver(e.pending);var i=nt(e._demandList.map((function(t){var e=t.state,n=t.vastId,r=t.type;return{state:e,id:n,bidder:t.bidder,type:r,originalType:t.originalType}})),t),o=i[0],a=i[1];l.a.error("Auction end forced due to playback method",new Error("Auction end forced"),{resolved:o,ignored:a,time:r,category:{main:L.a.MONETIZATION}})}}))]}))}))},t.prototype._doesContainPremium=function(t){return!(!t||!t.length)&&!!t.find((function(e){return Object(H.x)(e,Object(H.j)(t))}))},t.prototype._allFetchedPromise=function(t,e,n){var r=this,i=function(t){return Array.from(t).filter((function(t){return t.state===h.a.Fetched}))},o=!!t.find((function(e){return Object(H.x)(e,Object(H.j)(t))})),a=new Set,s=Date.now();n===Gt.First&&Object(et.c)((function(){return e=i(a),o?!!(e.length>0&&e.find((function(e){return Object(H.x)(e,Object(H.j)(t))}))):1===r._players.auctionId&&void 0;var e}),{timeout:e}).then((function(){if(!r._auctionPromise.resolved){var e=i(a),n=Array.from(a).length/t.length;l.a.info("Auction pre resolved with",{isAnyPremium:o,leftovers:t.filter((function(t){return!1===a.has(t)})),resolvedRatio:n.toFixed(2),filledAmount:e.length,timePassed:(Date.now()-s)/1e3}),r._auctionPromise.resolved=!0,r._auctionPromise.resolver(e)}}));var c=function(e){var n;n=e,h.a.ScheduledFetch<=n.state&&n.state<h.a.Fetched||a.has(e)||(a.add(e),r._auctionPromise.resolved||a.size!==t.length||(r._auctionPromise.resolved=!0,r._auctionPromise.resolver(i(a))))};return new Promise((function(e){r._auctionPromise.resolver=e,r._auctionPromise.resolved=!1,t.forEach((function(t){return t.onStateChange((function(){c(t)}))}))}))},t.prototype._destroyAllSpentPlayerData=function(){ot.b.filter((function(t){return t.state>h.a.Playing})).forEach((function(t){return t.destroyAd()})),Object(ot.d)(ot.b.filter((function(t){return t.state>h.a.Playing})),{override:!0})},t.prototype._fetchPrimaryDemands=function(t,e,n){return Wt(this,void 0,void 0,(function(){var r,i,o,a,s,c,u;return Yt(this,(function(d){return r=this._allFetchedPromise(t,e,n),l.a.log("Primary Fetch",t.map((function(t){return{id:t.vastId,bidder:t.bidder,type:t.type,debug:t.gpvDemand,cached:t.cachedBids}}))),this._logBiddersInAuction(t),i=nt(t,(function(t){return Object(H.w)(t)})),o=i[0],a=i[1],s=nt(o,(function(t){return t.pbserver})),c=s[0],u=s[1],this._applyEXCOGoogleFloor(a),this._fetchVasts(this._players,a),this._fetchPrebids(this._players,u,!1),this._fetchPrebids(this._players,c,!0),[2,r]}))}))},t.prototype._applyEXCOGoogleFloor=function(t){var e=t.filter((function(t){return Object(H.n)(t)}));this._setFloorPrice(e,this._priceService.getChallengedPriceBySessionPrice())},t.prototype._fetchSecondaryDemands=function(t,e,n){return Wt(this,void 0,void 0,(function(){var r;return Yt(this,(function(i){return r=this._priceService.getChallengedPriceByAd(Q(this._players,this._ads)),0===t.length?[2,[]]:(this._setFloorPrice(t,r),l.a.log("Secondary Fetch: floorPrice ".concat(r),{fetching:t.map((function(t){return{id:t.vastId,type:t.type}})),cached:this.pending.map((function(t){return{id:t.vastId,type:t.type}}))}),this._logBiddersInAuction(t),this._fetchVasts(this._players,t),[2,this._allFetchedPromise(t,e,n)])}))}))},t.prototype._refresh=function(){this._isFetching&&this._isDoneFetching()&&(this._isFetching=!1,this._refreshIntervalRef&&clearInterval(this._refreshIntervalRef))},t.prototype._isGpvDataEmpty=function(){return 0===Object(H.i)(this._players.gpvData).length},t.prototype._isDoneFetching=function(){return!this._demandList.some((function(t){return function(t){return h.a.ScheduledFetch<=t.state&&t.state<h.a.Fetched}(t)}))},t.prototype.getAdsByState=function(t,e){return t.filter((function(t){return t.state===e}))},t.prototype._addAdToStack=function(t){this._ads.push(t),this._stampCashEntry(t),it.b.emit(it.a.INTERNAL.AUCTION.AD_FETCHED,{ad:t,auctionId:this._players.auctionId})},t.prototype._logBiddersInAuction=function(t){var e=Object(at.a)(t),n=e.bidders,r=e.transactionId,i=e.subTransactionId;l.a.remote("Secondary auction Fetch Random Params",{bidders:n,transactionId:r,subTransactionId:i,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},t.prototype._getDemandsToFetch=function(t,e){var n;return void 0===t&&(t=[]),Wt(this,void 0,void 0,(function(){var r,i,o,a,s,c,u;return Yt(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this._createNewFetchList()];case 1:return r=d.sent(),(null==(i=Object(H.e)(r))?void 0:i.length)||(null===(n=this.pending)||void 0===n?void 0:n.length)?((o=gt.consentGranted(this._players)?i:Object(H.d)(i)).sort((function(t,e){return e.priority-t.priority})),a=J(e,this._filterExcludedDemands(o,t)),s=this._demandList.filter((function(t){return h.a.ScheduledFetch<=t.state&&t.state<h.a.Fetched})).map((function(t){return t.vastId})),c=a.filter((function(t){return!1===s.includes(t.vastId)})),[2,Object(f.b)(this._players,z(c))]):(l.a.log("Stopping ads because all the demands reached session capping"),it.b.emit(it.a.INTERNAL.AUCTION.STOP),[2,[]]);case 2:return u=d.sent(),l.a.error("Failed to create new fetch list",u),[2,[]];case 3:return[2]}}))}))},t.prototype._filterExcludedDemands=function(t,e){void 0===e&&(e=[]);var n=e.map((function(t){return t.vastId}));return t.filter((function(t){return!n.includes(t.vastId)}))},t.prototype._createNewFetchList=function(){return Wt(this,void 0,void 0,(function(){var t,e=this;return Yt(this,(function(n){switch(n.label){case 0:return[4,it.b.emitAsync(it.a.PLUGIN.ACTION.AUCTION,{players:this._players})];case 1:return n.sent(),t=Object(H.i)(this._players.gpvData),this._players.externalVastUrl?[4,dt(t,this._players.externalVastUrl,{content:this._players.content,playerId:this._players.excoPlayerId,auctionId:this._players.auctionId,muted:this._players.muted})]:[3,3];case 2:return t=n.sent(),[3,4];case 3:t=t.filter((function(t){return!t.externalDynamicVast})),n.label=4;case 4:return[2,t.map((function(t){return e._initPlayerData(new p.b(t,Object(H.f)(e._demandList,t.id)),e._players)}))]}}))}))},t.prototype._shouldDoAuction=function(){return this._players.monetize&&!this._isFetching&&!this._isGpvDataEmpty()},t.prototype._fetchPrebids=function(t,e,n){return void 0===n&&(n=!1),Wt(this,void 0,void 0,(function(){var r,i=this;return Yt(this,(function(o){switch(o.label){case 0:return e.length>0?(r={exco:[],pubs:[]},e.forEach((function(e){Object(v.f)(e),(!e.cachedBids||n&&e.pbserver)&&(t.serverEvents.demandEvent(e,{name:"startVastPrefetch"}),e.requestTimeRecords.start=(new Date).getTime(),l.a.remote("Ad request: ".concat(e.vastId),Object(at.c)(e,Object(mt.a)(t)))),r[e.isPubDemand?"pubs":"exco"].push(e)})),!n&&t.isMlSession&&(t.mlRandomParams=t.randomParams.getRandomParams()),[4,Object(m.b)(t,r.exco,n)]):[3,2];case 1:o.sent().onBid(this.onPrebidBidResponse.bind(this)).onDone(this.onPrebidAuctionDone.bind(this)).onDone((function(){r.exco.forEach((function(e){(!e.cachedBids||n&&e.pbserver)&&(it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t))}))})).onDone((function(){return Wt(i,void 0,void 0,(function(){return Yt(this,(function(e){switch(e.label){case 0:return[4,Object(m.b)(t,r.pubs,n)];case 1:return e.sent().onBid(this.onPrebidBidResponse.bind(this)).onDone(this.onPrebidAuctionDone.bind(this)).onDone((function(){r.pubs.forEach((function(e){(!e.cachedBids||n&&e.pbserver)&&(it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t))}))})),[2]}}))}))})),o.label=2;case 2:return[2]}}))}))},t.prototype.timeoutCallback=function(t,e){l.a.remote("Monetization: auction timeout",{transactionId:this._players.auctionId,timeout:t,stage:e,category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}})},t.prototype.removeAdsExceedingCacheTTL=function(){var t=this;this._ads=this._ads.filter((function(e){return!e.cacheTTL||!tt(e)||(l.a.remote("Monetization: Ad ".concat(e.vastId," exceeded cache TTL - ").concat(e.cacheTTL," min"),{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),Object(A.b)(t._players,e),!1)}))},t.prototype.removeAdsExceededImpCappingFromCache=function(){var t=this;this._ads=this._ads.filter((function(e){return!Object(H.l)(e)||(l.a.remote("Removing Ad ".concat(e.vastId," from cache as it has reached impression capping"),{category:{main:L.a.MONETIZATION,sub:L.b.AUCTION}}),Object(A.b)(t._players,e),!1)}))},t.prototype.onPrebidBidResponse=function(t){var e=t.playerData;if(e.flowTimeout.cancel(),!1===t.vast||null===t.vast)return e.state=h.a.Error,void Object(A.b)(this._players,e,34,{code:80,message:"prefetch - no vast",iabError:vt.b.VAST_URL_UNAVAILABLE,retryCount:e.retryCount});t.vastXml&&(e.state=h.a.Fetched),this._players.serverEvents.demandTimedEvent(e,Ht({name:"VastPrefetched",retryCount:e.retryCount},e.impressionData&&{pricing:e.impressionData.pricing,currency:e.impressionData.currency})),this._fetchVast(this._players,e)},t.prototype.onPrebidAuctionDone=function(t){void 0===t&&(t=[]),setTimeout((function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.playerData;i?(i.state=h.a.Finished,i.flowTimeout.cancel()):l.a.warn("No PlayerData on Prebid Auction done",{bid:r})}}),10)},t.prototype._fetchVasts=function(t,e){var n=this;e.forEach((function(e){return n._resolveVast(t,e)}))},t.prototype._resolveVast=function(t,e){(function(t,e){if(!e.video)return!1;return e.skipVastTracker=!0,e.creative={},e.adType="video",e.mediaURL=e.video.url,e.adClickUrl=e.video.click,Object(v.f)(e),!0})(0,e)||(it.b.emit(it.a.INTERNAL.AD.REQUEST,{demandId:e.vastId}),t.eventDispatcher.sendRequestEvent(e,t),e.requestTimeRecords.start=(new Date).getTime(),this._isTAM(e)?(e.prefetch=function(){var n;return t.serverEvents.demandEvent(e,{name:"startVastPrefetch"}),x(e,{reuseGlobalApstag:null===(n=null==t?void 0:t.extraParams)||void 0===n?void 0:n.reuseGlobalApstag})},this._prefetchVast(t,e)):this._fetchVast(t,e))},t.prototype._isTAM=function(t){return"tam"===t.type},t.prototype._prefetchVast=function(t,e){var n=this;Object(v.f)(e);var r=e.prefetch(e),i=r,o=function(r,i){e.state==h.a.Prefetching&&(e.flowTimeout.cancel(),!1!==r&&null!==r&&("string"==typeof r&&(e.vastURL=r),i&&t.serverEvents.demandTimedEvent(e,Ht({name:"VastPrefetched",retryCount:e.retryCount},e.impressionData&&{pricing:e.impressionData.pricing,currency:e.impressionData.currency})),n._fetchVast(t,e)))};(null==i?void 0:i.then)?i.then((function(t){return o(t,!0)})):o(r)},t.prototype._fetchVast=function(t,e){e.state=h.a.Fetching;var n,r=e.vastXml,i=e.vastURL;if(e.googleOutstream)Kt(e,n);else if(!r){if(!i||"#"==i[0]||!i.trim())return;Kt(e,n=Object(q.b)(t,e)(i))}Object(H.w)(e)||Object(H.z)(e)||l.a.remote("Ad request: ".concat(e.vastId),Object(at.c)(e,Object(mt.a)(t))),Object(v.f)(e),e.fetchAdUrl(n,this._handleAdFetched.bind(this))},t.prototype._handleAdFetched=function(t,e){var n;if($(t,e))return Object(A.b)(t,e,39),void l.a.remote("Dropping bid due to CPM",{id:e.vastId,resCPM:e.cpm,originalCPM:null===(n=e.ars)||void 0===n?void 0:n.originalCPM,category:{main:L.a.MONETIZATION}});Object(v.e)(t,e),this._priceService.applyPriceFactor(e),this._addAdToStack(e),this._newAds.push(e),e.state=h.a.Fetched,e.requestTimeRecords.responded=(new Date).getTime(),e.requestTimeRecords.respondedFromStart=Object(Y.f)(e.requestTimeRecords.responded,e.requestTimeRecords.start),e.arrangeDuration(),t.eventDispatcher.sendResponseEvent(e,t),it.b.emit(it.a.INTERNAL.AD.FETCHED,{ad:e,players:t}),l.a.hasLoggers()&&l.a.remote("Ad response: ".concat(e.vastId),Ht(Ht({},Object(at.d)(e)),{category:{main:L.a.MONETIZATION,sub:L.b.AD_RESPONSE}}))},t.prototype._stampCashEntry=function(t){t.cacheEntryTime=new Date},t.prototype._setFloorPrice=function(t,e){var n=this;t.forEach((function(t){t.floorPrice=e||n._players.randomParams.getDemandFloorForAuction()}))},t.prototype.removeAdFromCache=function(t){var e=this._ads.indexOf(t);-1!==e&&(this._ads.splice(e,1),l.a.log("Removing ".concat(t.vastId," from cache"),{id:t.vastId,type:t.type}))},t.prototype.addToCache=function(t){!1===this._ads.includes(t)&&(this._stampCashEntry(t),t.state=h.a.Fetched,this._ads.push(t))},t.prototype._initPlayerData=function(t,e){return t.state=h.a.Prefetching,t.guid=Object(rt.a)(),t.loadAdTime=Date.now(),t.retryCount++,t.totalRoundNo++,e.totalVastRetries++,t.ad=null,t.creative=null,t.mediaURL="",t.adType=null,t.firedEvents={},t.vastTracker=null,t.skipVastTracker=!1,t.hasJSVPAID=!1,t.initVpaidOnStartDone=!1,t.transactionId=this._players.auctionId,t.subTransactionId=0,function(t){return"tam"===t.type}(t)&&function(t){t.adType="tam"}(t),this._players.auctionId>1&&(t.cachedBids=null),t},t.prototype.clearCache=function(){this._ads=[]},t}();function Kt(t,e){Object(H.t)(t,e)&&function(t,e){t.mediaURL=e,t.adType="jsima"}(t,e),Object(H.r)(t)&&Object(H.E)(t)}function Xt(t,e){return t.isMlSession?(l.a.info("Using ML AM"),t.eventDispatcher.addExtraData({am:"Random-v1.0.0"}),new zt(t,e)):function(t){return Object(Lt.a)(Nt(t).sampleRate)}(t)?(l.a.info("Using AM2"),t.eventDispatcher.addExtraData({am:"ma-v1.0.0"}),new Bt(t,e)):(l.a.info("Using AM1"),t.eventDispatcher.addExtraData({am:"basic"}),new wt(t,e))}var Qt=n(47),Zt=n(19),$t=n(93),te=function(){function t(){}return Object.defineProperty(t.prototype,"elapsed",{get:function(){return this._getElapsedTime()},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.startedAt||(this.startedAt=Date.now(),this.resumedAt=null,this.pausedAt=null)},t.prototype.pause=function(){this.start(),this.pausedAt||(this.pausedAt=Date.now(),this.resumedAt=null)},t.prototype.resume=function(){this.startedAt&&this.pausedAt&&!this.resumedAt&&(this.resumedAt=Date.now())},t.prototype.reset=function(){this.startedAt=null,this.resumedAt=null,this.pausedAt=null},t.prototype._getElapsedTime=function(){return this.startedAt?this.pausedAt&&this.resumedAt?Date.now()-this.startedAt-(this.resumedAt-this.pausedAt):this.pausedAt?this.startedAt-this.pausedAt:Date.now()-this.startedAt:0},t}(),ee=function(){return(ee=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ne=new Map,re=new Map;function ie(){it.b.on(it.a.INTERNAL.AUCTION.START,(function(t){var e=t.demandList,n=t.auctionId;e.forEach((function(t){ne.has(t.vastId)?ae(t.vastId,{participatedInAuctions:[n]}):ae(t.vastId,function(t){return{participatedInAuctions:[t.currentAuction],answeredInAuctions:[],consecutiveAuctionsNotAnswered:0}}({currentAuction:n}))})),oe(n,function(t){var e=t.demandIds;return{auctionId:t.auctionId,participatedInAuction:e,answeredInAuction:[]}}({auctionId:n,demandIds:e.map((function(t){return t.vastId}))}))})),it.b.on(it.a.INTERNAL.AUCTION.AD_FETCHED,(function(t){var e=t.ad,n=t.auctionId;ne.get(e.vastId)&&ae(e.vastId,{answeredInAuctions:[n],consecutiveAuctionsNotAnswered:0}),oe(n,{answeredInAuction:[e.vastId]})})),it.b.on(it.a.INTERNAL.AUCTION.END,(function(t){(function(t){var e=re.get(t);if(e)return e.participatedInAuction.filter((function(t){return!e.answeredInAuction.includes(t)}));return[]})(t.auctionId).forEach((function(t){var e=ne.get(t);e&&ae(t,{consecutiveAuctionsNotAnswered:e.consecutiveAuctionsNotAnswered+1})}))}))}function oe(t,e){var n,r,i=re.get(t);if(i){var o=ee({},i);(n=o.participatedInAuction).push.apply(n,e.participatedInAuction),(r=o.answeredInAuction).push.apply(r,e.answeredInAuction),re.set(t,o)}else re.set(t,e)}function ae(t,e){var n,r,i=ne.get(t);if(i){var o=ee({},i);(n=o.participatedInAuctions).push.apply(n,e.participatedInAuctions),(r=o.answeredInAuctions).push.apply(r,e.answeredInAuctions),o.consecutiveAuctionsNotAnswered=e.consecutiveAuctionsNotAnswered||o.consecutiveAuctionsNotAnswered,ne.set(t,o)}else ne.set(t,e)}function se(t,e){void 0===e&&(e=1);var n="number"==typeof t?t:t.vastId;return function(t){return Array.from(re.values()).slice(-Math.max(t,1))}(e).find((function(t){return-1!==t.answeredInAuction.findIndex((function(t){return n===t}))}))}var ce=function(){return(ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ue=function(){function t(t){this._secondPrice=null,this._demandPriceStates=new Map;var e=this._getDynamicConfig(t),n=e.exco,r=e.pub;this._players=t,this.country=(null==t?void 0:t.country.toLowerCase())||"",this._dynamicExcoConfig=n,this._dynamicPubConfig=r,this._listen(),l.a.info("Price service V2 initialized",{dynamicExcoConfig:this._dynamicExcoConfig,dynamicPubConfig:this._dynamicPubConfig})}return t.prototype._getDynamicConfig=function(t){var e=(null==t?void 0:t.priceConfig[this.country])||(null==t?void 0:t.priceConfig.default)||{},n={enabled:!0,rotationInterval:3,startFactor:1,increaseFactor:1,decreaseFactor:1,minPrice:1},r=ce(ce({},{enabled:!0,rotationInterval:3,startFactor:1,increaseFactor:1,decreaseFactor:1,minPrice:1}),e.exco);return{pub:ce(ce({},n),e.pub),exco:r}},t.prototype.getFloor=function(t){return this._getFloorByDemandType(t)},t.prototype.setSecondPrice=function(t){l.a.debug("Second price set to: ".concat(t)),this._secondPrice=t},t.prototype.resetSecondPrice=function(){l.a.debug("Second price reset"),this._secondPrice=null},t.prototype.getChallengedPriceByAd=function(t){return t&&t.cpm?Object(Dt.c)(1.2*t.cpm):this.getChallengedPriceBySessionPrice()},t.prototype.getChallengedPriceBySessionPrice=function(){return Object(Dt.c)(1.2*this._players.sessionPrice)},t.prototype.applyPriceFactor=function(t){var e=t.cpm,n=t.priceFactor,r=t.vastId;if(e&&n&&n>=1&&n<=100){var i=e-e*n/100;l.a.log("price factor: vastId ".concat(r,", CPM: ").concat(e,", priceFactor: ").concat(n,", calculatedPrice: ").concat(i)),t.setCPM(i)}},t.prototype._listen=function(){it.b.on(it.a.INTERNAL.AUCTION.START,this._onAuctionStart.bind(this)),it.b.on(it.a.INTERNAL.AUCTION.END,this._onAuctionEnd.bind(this))},t.prototype._onAuctionStart=function(t){var e=this,n=t.demandList,r=this._demandPriceStates;n.forEach((function(t){r.has(t.vastId)||r.set(t.vastId,e._createInitialPriceState(t))}))},t.prototype._onAuctionEnd=function(t){var e=t.auctionId;this._revaluatePrices(e)},t.prototype._revaluatePrices=function(t){var e=this;this._demandPriceStates.forEach((function(n,r){var i=n.currentFloor,o=n.minPrice,a=n.rotationInterval;if(n.enabled&&t%a==0){var s=e._getFactor(r);n.currentFloor=Math.max(i*s,o)}})),l.a.debug("Prices revaluated",this._demandPriceStates)},t.prototype._getFactor=function(t){var e=this._demandPriceStates.get(t),n=e.isPubDemand;if(e.isSecondViewDemand)return 1;var r=n?this._dynamicPubConfig:this._dynamicExcoConfig;return se(t,r.rotationInterval)?r.increaseFactor:r.decreaseFactor},t.prototype._getFloorByDemandType=function(t){var e=this._demandPriceStates.get(t.vastId);return(this._secondPrice?Math.max(this._secondPrice,e.currentFloor):e.currentFloor)||Object(Qt.b)(t)},t.prototype._createInitialPriceState=function(t){var e=this._setInitialFloor(t),n=e.startingPrice,r=e.minPrice,i=t.isPubDemand?this._dynamicPubConfig:this._dynamicExcoConfig;return{enabled:i.enabled,rotationInterval:i.rotationInterval,isPubDemand:t.isPubDemand,isSecondViewDemand:Et(t),originalFloor:n,currentFloor:n,minPrice:r}},t.prototype._setInitialFloor=function(t){var e,n;return t.isPubDemand?(e=Object(Qt.b)(t)*this._dynamicPubConfig.startFactor,n=this._dynamicPubConfig.minPrice):(e=Object(Qt.b)(t)*this._dynamicExcoConfig.startFactor,n=this._dynamicExcoConfig.minPrice),{startingPrice:e,minPrice:n}},t}();var de={enabled:!1,maxAdsCount:0},le=function(){function t(t,e){void 0===t&&(t=de),this._config={},this._slots={breakingAds:{expected:0,actual:0},preRoll:{expected:0,actual:0},playerStart:{expected:0,actual:0}},this._config=t,this._adsConfig=e,this._config.enabled&&(this._onSlotEnd=this._onSlotEnd.bind(this),it.b.on(it.a.INTERNAL.AD.SLOT_END,this._onSlotEnd))}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._config.enabled},enumerable:!1,configurable:!0}),t.prototype.getSlotMissingImps=function(t){return this._config.enabled?Math.min(this._config.maxAdsCount,Math.max(0,this._slots[t].expected-this._slots[t].actual)):0},t.prototype._onSlotEnd=function(t){var e=t.slotType,n=t.numOfImps;this._slots[e].expected+=this._adsConfig[e].maxImpressions,this._slots[e].actual+=n},t}(),pe=n(68),he=n(40),fe=function(){function t(t){void 0===t&&(t={}),this._postponeAds=!1,this._adsPlayed=0,this._fetchTimer=null,t.config&&(this._config=t.config,this._fetchAds=t.fetchAds,this._complete=t.complete,this._playAds=t.playAds,this._onSlotEnd=this._onSlotEnd.bind(this),this._onAuctionEnd=this._onAuctionEnd.bind(this),this._onAdStart=this._onAdStart.bind(this),this._onAdImpression=this._onAdImpression.bind(this),this._onAdComplete=this._onAdComplete.bind(this),this._listen())}return t.prototype.shouldRun=function(t){return[Zt.a.PLAYER_START].includes(t)},t.prototype.start=function(){this._delayedFetch()},t.prototype.end=function(){this._stopListenning(),this._complete(),clearTimeout(this._fetchTimer),it.b.emit(it.a.PLAYER.ACTION.PLAY)},t.prototype._delayedFetch=function(){var t=this;clearTimeout(this._fetchTimer),this._fetchTimer=setTimeout((function(){return t._fetchAds()}),1e4)},t.prototype._onAuctionEnd=function(t){var e=t.auctionId;clearTimeout(this._fetchTimer),1!==e&&this._adsPlayed!==this._config.adsToPlay&&this._delayedFetch(),this._postponeAds||this._playAds()},t.prototype._onAdStart=function(){this._postponeAds=!0},t.prototype._onAdImpression=function(){this._adsPlayed++},t.prototype._onAdComplete=function(){this._postponeAds=!1,clearTimeout(this._fetchTimer),this._adsPlayed===this._config.adsToPlay?this._complete():this._delayedFetch()},t.prototype._onSlotEnd=function(){this.end()},t.prototype._listen=function(){it.b.on(it.a.INTERNAL.AUCTION.END,this._onAuctionEnd),it.b.on(it.a.AD.STARTED,this._onAdStart),it.b.on(it.a.AD.IMPRESSION,this._onAdImpression),it.b.on(it.a.AD.COMPLETED,this._onAdComplete),it.b.on(it.a.INTERNAL.AD.SLOT_END,this._onSlotEnd),it.b.on(it.a.PLAYER.ACTION.PLAY,this._onSlotEnd)},t.prototype._stopListenning=function(){it.b.off(it.a.INTERNAL.AUCTION.END,this._onAuctionEnd),it.b.off(it.a.AD.STARTED,this._onAdStart),it.b.off(it.a.AD.IMPRESSION,this._onAdImpression),it.b.off(it.a.AD.COMPLETED,this._onAdComplete),it.b.off(it.a.INTERNAL.AD.SLOT_END,this._onSlotEnd),it.b.off(it.a.PLAYER.ACTION.PLAY,this._onSlotEnd)},t}(),ve=n(36),me=function(){return(me=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ae=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},ye=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},be=3,ge=5,Ee=function(){function t(t,e){var n,r,i,o=this;this.MINIMUM_TIME_TO_WAIT_FROM_SESSION_START=2,this._upcomingSlotTime=ge,this._currentSlotImpCount=0,this._currentSessionImpCount=0,this._endedContentItemsCount=0,this._isActiveSlot=!1,this._slotStopwatch=new te,this._currentSlotType=Zt.a.PLAYER_START,this._initializedPromised=null,this._paused=!1,this._started=!1,this._adReady=!1,this._holdAdPlayback=!1,this._isPlaylistCompleted=!1,this._adsPlayedInSlot=new Map,this._config=Object(Zt.b)(t),this._players=t,this._content=e,this._startTime=new Date,this._nextSlotType=this._getInitialNextSlotType(),this._upcomingSlotTime=Math.max(Math.min((null===(n=null==t?void 0:t.videoTeasers)||void 0===n?void 0:n.keepWatchingTime)||0,(null===(r=null==t?void 0:t.videoTeasers)||void 0===r?void 0:r.interval)||0)||ge,be),this._priceService=function(t){return function(t){var e;return null===(e=t.priceConfig)||void 0===e?void 0:e.enabled}(t)?(t.eventDispatcher.addExtraData({dynp:!0}),new ue(t)):new Qt.a(t)}(t),this._adsManager=Xt(t,this._priceService),this._slotTracker=new le(this._config.adaptiveAdCount,this._config),this._handleAdLoaded=this._handleAdLoaded.bind(this),this._players.playbackMode===he.a.AD_TO_CONTENT&&(this._adToContent=new fe({config:{adsToPlay:(null===(i=this._config[this._currentSlotType])||void 0===i?void 0:i.maxImpressions)||1},playAds:function(){var t=o._adsManager.pending;o._logAdsInCache("Play Next Ad");var e=o._selectAd(t);e&&(l.a.log("Chosen Ad - ".concat(e.type," - ").concat(e.vastId," - price ").concat(e.cpm),e),o._initAd(e))},complete:function(){o._endSlot()},fetchAds:function(){o._inSlotRefresh()}})),t.apiInterface.on("closed",(function(){o._timerId&&clearInterval(o._timerId)})),it.b.on(it.a.INTERNAL.AUCTION.STOP,(function(){return o.stop()}))}return t.prototype.init=function(){if(this._players.monetize)return this._adsManager.init(),this._listen(),this._isSlotEnabled(Zt.a.PLAYER_START)&&this._isTheSessionJustStarted()?(this._players.adSlotCurrentType=this._currentSlotType,this._initializedPromised=this._adsManager.fetchAds({timeoutInSeconds:this._config.playerStart.timeout,slotType:Zt.a.PLAYER_START})):this._initializedPromised=Promise.resolve([]),this._initializedPromised},t.prototype.start=function(t){var e,n=this;null===(e=this._initializedPromised)||void 0===e||e.then((function(){return n._onInit()})),t&&this.forceAuctionEnd()},t.prototype.forceAuctionEnd=function(){return this._adsManager.forceAuctionEnd()},t.prototype.pauseSchedule=function(){this._paused=!0,this._players.autoplay=!1,this._players.paused=!0},t.prototype.resumeSchedule=function(t){this._paused=!1,this._players.autoplay=!0,this._players.paused=!1,this._isPlaylistCompleted&&this._onCompletedPlaylistResumed(),!this.isActiveSlot&&this._refresh(),!this._started&&this.start(t)},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActiveSlot",{get:function(){return this._isActiveSlot},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAdStarted",{get:function(){return!!this._playingAd&&this._playingAd.state>=h.a.Started},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAdPlaying",{get:function(){return!!this._playingAd&&this._playingAd.viewable&&this._playingAd.state===h.a.Playing},enumerable:!1,configurable:!0}),t.prototype.holdAdPlayback=function(){this._holdAdPlayback=!0,this._slotStopwatch.pause()},t.prototype.allowAdPlayback=function(){this._holdAdPlayback=!1,this._slotStopwatch.resume(),this._playingAd&&this._adReady&&(this._playingAd.isPaused?this._resumeAd():this._playAd())},t.prototype._getInitialNextSlotType=function(){return this._nextSlotType?this._nextSlotType:this._config.playerStart.enabled?Zt.a.PLAYER_START:this._config.breakingAds.enabled?Zt.a.BREAKING_ADS:Zt.a.PRE_ROLL},t.prototype._onInit=function(){this._started?(this._startTimer(),this.resumeSchedule()):(this._started=!0,this._isSlotEnabled(Zt.a.PLAYER_START)?this._startSlot({slotType:Zt.a.PLAYER_START}):this._endSlot())},t.prototype._listen=function(){var t=this;this._players.on(d.a.AD_STARTED,this._onAdStart.bind(this)),this._players.on(d.a.AD_COMPLETE,(function(){return t._onAdComplete({playAdContent:!0})})),this._players.on(d.a.AD_ERROR,this._onAdError.bind(this)),this._players.on(d.a.AD_SKIPPED,this._onAdSkipped.bind(this)),this._players.on(d.a.CONTENT_COMPLETED,this._onContentComplete.bind(this)),this._players.on(d.a.CONTENT_SKIPPED,this._onContentSkipped.bind(this)),this._players.on(d.a.CONTENT_ERROR,this._onContentError.bind(this)),it.b.on(it.a.INTERNAL.AD.PAUSE_FOR_CONTENT,this._migrateBreakingAdsToPreRoll.bind(this)),it.b.on(it.a.INTERNAL.AD.RESET_BREAKING_ADS_TIMER,this._resetBreakingAdsTimer.bind(this)),it.b.on(it.a.INTERNAL.AUCTION.END,this._onAuctionEnd.bind(this)),it.b.on(it.a.INTERNAL.AD.BLOCKED,this._onAdBlocked.bind(this)),it.b.on(it.a.INTERNAL.AD.SKIP_SLOT,(function(){return t._completeAd({playAdContent:!1,forceEndSlot:!0})})),it.b.on(it.a.AD.PAUSE,this._onAdPaused.bind(this))},t.prototype._startTimer=function(){var t=this;this._timerId||this._inSlotRefreshTimerId||(this._timerId=setInterval((function(){t._refresh()}),1e3))},t.prototype._startInSlotTimer=function(){var t=this;this._inSlotRefreshTimerId||this._timerId||(this._inSlotRefreshTimerId=setInterval((function(){t._inSlotRefresh()}),1e3))},t.prototype._refresh=function(){if(!this._paused){if(this._shouldFetchAds()){var t=this._getFetchAdsTimeout();l.a.log("Fetching ads ".concat(t,"s before slot")),this._adsManager.fetchAds({timeoutInSeconds:t,slotType:this._nextSlotType})}this._shouldNotifyUpcomingSlot()&&it.b.emit(it.a.INTERNAL.AD.UPCOMING_SLOT,{time:this._upcomingSlotTime,slotType:this._currentSlotType}),this._shouldStartBreakingAdsSlot()&&this._startSlot({slotType:Zt.a.BREAKING_ADS})}},t.prototype._inSlotRefresh=function(){var t,e;if(!this._paused&&this._shouldFetchAdsDuringSlot()){l.a.log("Fetching ads ".concat(this._config.timeToFetchAdsBeforeSlot,"s before ad end"));var n=Object(H.n)(this._playingAd)?[this._playingAd]:[],r=(t=this._adsManager.pending,e=X(t),X(t.filter((function(t){return t!==e})))||e),i=this._getFetchAdsTimeout();r&&this._priceService.setSecondPrice(.9*r.cpm),this._adsManager.fetchAds({exclude:n,timeoutInSeconds:i,slotType:this._currentSlotType})}},t.prototype._shouldFetchAdsDuringSlot=function(){return!(!this._shouldFetchAdsBasedOnPendingAds()||this._smartAdsSlotEnabled)&&(this._shouldFetchAdsBeforeAdEnd()||this._adToContent&&this._adToContent.shouldRun(this._currentSlotType))},t.prototype._shouldFetchAds=function(){if(this._paused||this._smartAdsSlotEnabled)return!1;var t=this._isFetchAdsIntervalPassed(),e=this._shouldFetchAdsBeforeContentChange();return t&&(this._nextSlotType=Zt.a.BREAKING_ADS),e&&(this._nextSlotType=Zt.a.PRE_ROLL),!!this._shouldFetchAdsBasedOnPendingAds()&&(t||e)},t.prototype._shouldFetchAdsBasedOnPendingAds=function(){var t;if(!this._config.cacheBasedAuctionConfig.enabled)return!0;var e=this._config.cacheBasedAuctionConfig.buffer,n=this._isActiveSlot?this._getCurrentSlotMaxImps()-this._currentSlotImpCount:null===(t=this._config[this._nextSlotType])||void 0===t?void 0:t.maxImpressions;return this._adsManager.pending.length<n+e},t.prototype._isFetchAdsIntervalPassed=function(){var t=this._config,e=t.breakingAds,n=e.enabled,r=e.interval,i=e.aggressive,o=t.timeToFetchAdsBeforeSlot;if(!n||this._content.isLiveStream)return!1;if(i)return!0;var a=Object(Y.d)(this._slotEndTime,new Date),s=r-o;return s-1<a&&a<=s},t.prototype._shouldFetchAdsBeforeContentChange=function(){var t=this._config,e=t.timeToFetchAdsBeforeSlot;if(!t.preRoll.enabled||this._content.isLiveStream||!this._isIntervalSmallerThenDuration())return!1;var n=this._content.getProgress(),r=n.time,i=n.duration-r;return i<=e&&i>e-1},t.prototype._shouldFetchAdsBeforeAdEnd=function(){if(!this._playingAd)return!1;var t=this._playingAd.getAdRemainingTime();if(!t)return!1;var e=!1;return this._config.timeToFetchAdsBeforeSlot<t&&t<=this._config.timeToFetchAdsBeforeSlot+1&&(e=this._currentSlotImpCount<this._getCurrentSlotMaxImps()),e},t.prototype._shouldNotifyUpcomingSlot=function(){if(this._isPlayerPaused()||!this._content.shouldMonetize()||this._content.isLiveStream||!this._isSlotEnabled(Zt.a.BREAKING_ADS))return!1;var t=this._config.breakingAds.interval,e=Object(Y.d)(this._slotEndTime,new Date),n=t-this._upcomingSlotTime||1;return n-1<e&&e<=n},t.prototype._shouldStartBreakingAdsSlot=function(){var t=Object(Y.d)(this._slotEndTime,new Date)>=this._config.breakingAds.interval;return this._isSlotEnabled(Zt.a.BREAKING_ADS)&&!this._isActiveSlot&&t},t.prototype._endTimer=function(){clearInterval(this._timerId),this._timerId=null},t.prototype._endSlotTimer=function(){clearInterval(this._inSlotRefreshTimerId),this._inSlotRefreshTimerId=null},t.prototype._isTheSessionJustStarted=function(){return Object(Y.d)(this._startTime,new Date)<=this.MINIMUM_TIME_TO_WAIT_FROM_SESSION_START},t.prototype._onAdStart=function(t){var e=t.apiImpressionData,n=t.playerData;n.skipNext?this._currentSlotImpCount=this._getCurrentSlotMaxImps():(this._currentSlotImpCount++,this._players.adSlotImpressionCount=this._currentSlotImpCount),this._currentSessionImpCount++,n.demandCapImpressions++,this._shouldEndSessionBysupply()&&(this.stop(),l.a.log("Session impression cap reached stopping ads")),this._shouldEndSessionByDemand(n)&&(this.stop(),l.a.log("Session impression cap reached stopping ads by demand cap")),Object(o.b)(this._players,n,"ad.start",this._enrichAPIImpressionData(e,n))},t.prototype.stop=function(){this._players.monetize=!1,this._adsManager.clearCache(),this._endTimer(),this._endSlotTimer(),l.a.log("Auction Stopped")},t.prototype._enrichAPIImpressionData=function(t,e){return t.slotType=this._currentSlotType===Zt.a.PLAYER_START?Zt.a.PRE_ROLL:this._currentSlotType,t.hasUI=Object(H.p)(e),t},t.prototype.logAdError=function(t){var e,n,r=t.error,i=t.playerData,o=i.getErrorEvent(r).event,a=o.name,s=o.errorCode,c=o.imaError,u=o.videoError;!function(t,e){l.a.error("Ad error: ".concat(t.message),t,me(me({},e),{category:{main:L.a.MONETIZATION,sub:L.b.AD_REQUEST}}))}(r,me(me({},Object(at.b)(i)),{error:{exco:{errorType:a,errorCode:s,vpaidErrorCode:null==r?void 0:r.vpaidError,videoError:u},iabVastError:{code:null===(e=null==r?void 0:r.iabError)||void 0===e?void 0:e.code,message:null===(n=null==r?void 0:r.iabError)||void 0===n?void 0:n.message},imaErrorCode:c}}))},t.prototype._onAdError=function(t){var e=t.playerData;this._playingAd&&this._playingAd===e&&(this.logAdError(t),it.b.emit(it.a.AD.PLAYBACK_ERROR,Object(v.c)(e)),this._completeAd({playAdContent:!1}))},t.prototype._onAdSkipped=function(t){l.a.log("Ad Skipped: vastId - ".concat(t.vastId)),this._config.skipSlotOnAdSkip&&(l.a.log("Ad Skipped: Skipping entire slot on ad skipped - ".concat(t.vastId)),this._currentSlotImpCount=this._getCurrentSlotMaxImps()),this._completeAd({playAdContent:!1})},t.prototype._onAdComplete=function(t){this._playingAd&&(this._playingAd.adContent&&this._insertAdContent(),it.b.emit(it.a.AD.COMPLETED,Object(v.c)(this._playingAd))),this._completeAd(t)},t.prototype._completeAd=function(t){var e,n=this,r=(null===(e=this._playingAd)||void 0===e?void 0:e.duration)||0;this.destroyPlayingAd(),this.isActiveSlot&&(t.forceEndSlot||this._shouldEndSlot()||this._shouldSmartPodsSlot()?this._endSlot():(this._smartAdsSlotEnabled&&(this._smartAdsSlotDuration-=r,this._smartAdPods.totalDuration-=r,this._shouldSetNewCombination()&&this._setCombination(this._smartAdsSlotDuration)),setTimeout((function(){n._playNextAd()}),10)))},t.prototype._shouldSetNewCombination=function(){return this._smartAdPods.totalDuration!==this._smartAdsSlotDuration&&this._smartAdsSlotDuration>0},t.prototype.destroyPlayingAd=function(){this._playingAd&&(it.b.off(it.a.INTERNAL.AD.LOADED,this._handleAdLoaded),this._playingAd.flowTimeout.cancel(),this._playingAd.destroyAd(),this._playingAd=null,this._adReady=!1),Object(ot.c)(null)},t.prototype._onContentComplete=function(t){var e=(void 0===t?{loopCompleted:!1}:t).loopCompleted;this.contentEndHandler(e)},t.prototype._shouldEndSessionBysupply=function(){return this._config.sessionImpressionCap&&this._currentSessionImpCount>=this._config.sessionImpressionCap},t.prototype._shouldEndSessionByDemand=function(t){return t.demandCap.enabled&&t.demandCapImpressions>=t.demandCap.maxImpressions},t.prototype._onContentSkipped=function(t){this._onContentComplete(t)},t.prototype._onContentError=function(t){var e=(void 0===t?{loopCompleted:!1}:t).loopCompleted;this.contentEndHandler(e)},t.prototype.contentEndHandler=function(t){this._isPlaylistCompleted=!this._content.loop&&t,this._endedContentItemsCount++,this._shouldStartPreRollSlot()&&!this._isPlaylistCompleted?(this._startSlot({slotType:Zt.a.PRE_ROLL}),this._endedContentItemsCount=0):this._endedContentItemsCount<this._getContentItemsBeforePreRoll()&&(l.a.log("Fetching ads on the ".concat(Object(y.i)(this._endedContentItemsCount)," video end before Pre-Roll")),this._adsManager.fetchAds({timeoutInSeconds:this._getFetchAdsTimeout(),slotType:Zt.a.PRE_ROLL})),this._isPlaylistCompleted&&this._playingAd&&this._playingAd.state<h.a.Playing&&this._onAdComplete({playAdContent:!1,forceEndSlot:!0})},t.prototype._onCompletedPlaylistResumed=function(){this._isPlaylistCompleted=!1,this._shouldStartPreRollSlot()?this._startSlot({slotType:Zt.a.PRE_ROLL}):(this._resetBreakingAdsTimer(),it.b.emit(it.a.INTERNAL.AD.SLOT_HAS_NOT_STARTED))},t.prototype._migrateBreakingAdsToPreRoll=function(){var t=this;this._isSlotEnabled(Zt.a.BREAKING_ADS)&&(t._config.breakingAds.enabled=!1,t._config.preRoll.enabled=!0,t._config.preRoll.maxImpressions=t._config.breakingAds.maxImpressions,it.b.once(it.a.INTERNAL.CONTENT.STARTED,(function(){t._config.breakingAds.enabled=!0,t._config.preRoll.enabled=!1,t._resetBreakingAdsTimer()})))},t.prototype._resetBreakingAdsTimer=function(){this._isSlotEnabled(Zt.a.BREAKING_ADS)&&(this._slotEndTime=new Date)},t.prototype._shouldStartPreRollSlot=function(){return this._isSlotEnabled(Zt.a.PRE_ROLL)&&!this._isActiveSlot&&this._isIntervalSmallerThenDuration()&&this._adsManager.pending.length&&this._endedContentItemsCount>=this._getContentItemsBeforePreRoll()},t.prototype._isIntervalSmallerThenDuration=function(){var t=this._config.breakingAds,e=this._content.currentItem;return!(e&&t.enabled&&e.duration)||t.interval<e.duration},t.prototype._shouldEndSlot=function(){return(this._currentSlotImpCount===this._getCurrentSlotMaxImps()||!1===this._players.monetize)&&!this._smartAdsSlotEnabled},t.prototype._shouldSmartPodsSlot=function(){var t,e;return this._smartAdsSlotEnabled&&this._smartPodsLimit&&(this._smartAdsSlotDuration<0||0===(null===(e=null===(t=this._smartAdPods)||void 0===t?void 0:t.ads)||void 0===e?void 0:e.length)||!1===this._players.monetize)},t.prototype._startSlot=function(t){if(this._players.closed||!1===this._players.monetize)return!1;var e=this._players.schedule[t.slotType].smartPods,n=void 0===e?{}:e;this._smartAdsSlotEnabled=null==n?void 0:n.enabled,this._currentSlotType=t.slotType,this._smartAdsSlotDuration=(null==n?void 0:n.slotDuration)||0,this._smartPodsLimit=(null==n?void 0:n.podsLimit)||2,this._isActiveSlot=!0,this._slotStopwatch.start(),l.a.log("Starting Slot - ".concat(this._currentSlotType)),this._players.adSlotCurrentType=this._currentSlotType,this._players.currentSlotMaxImps=this._getCurrentSlotMaxImps(),this._players.currentSlotIndex++,b.b.eventDispatcher.sendSlotStartedEvent(this._players),this._players.emit(d.a.SLOT_START,{slotType:this._currentSlotType}),Object(o.b)(this._players,null,"ad.slot.start"),it.b.emit("ad.skippableStateChanged",{skippable:!1}),it.b.emit(it.a.INTERNAL.AD.SLOT_START,{slotType:this._currentSlotType}),this._adToContent&&this._adToContent.shouldRun(this._currentSlotType)?this._adToContent.start():(this._endTimer(),this._startInSlotTimer(),this._smartAdsSlotEnabled&&!this.isCurrentSlotGraterThanSmartPodsLimit()&&this._setCombination(this._smartAdsSlotDuration,this._smartPodsLimit),this._playNextAd())},t.prototype._setCombination=function(t,e){void 0===e&&(e=2),this._adsManager.removeAdsExceedingCacheTTL(),this._adsManager.removeAdsExceededImpCappingFromCache();var n=this._filterAdsByPlayCappingInSlot(this._adsManager.pending);this._smartAdPods=this._selectAdCombination(n,t,e),this._logAdsInSmartPods("Set Combination")},t.prototype._playNextAdInSingleMode=function(){this._adsManager.removeAdsExceedingCacheTTL(),this._adsManager.removeAdsExceededImpCappingFromCache();var t=this._filterAdsByPlayCappingInSlot(this._adsManager.pending);this._logAdsInCache("Play Next Ad");var e=this._selectAd(t);e?(l.a.log("Chosen Ad - ".concat(e.type," - ").concat(e.vastId," - price ").concat(e.cpm),e),this._initAd(e)):(l.a.log("No ad chosen - ending slot"),this._endSlot())},t.prototype._playNextAd=function(){return Ae(this,void 0,void 0,(function(){return ye(this,(function(t){return this._smartAdsSlotEnabled&&!this.isCurrentSlotGraterThanSmartPodsLimit()?this._playNextAdInCombination():this._playNextAdInSingleMode(),[2]}))}))},t.prototype.isCurrentSlotGraterThanSmartPodsLimit=function(){return this._currentSlotImpCount>this._smartPodsLimit},t.prototype._playNextAdInCombination=function(){var t;if(this._logAdsInSmartPods("Play Next Ad in combination"),this._smartAdPods){var e=(null===(t=this._smartAdPods)||void 0===t?void 0:t.ads.shift()).adId,n=void 0===e?0:e,r=this._adsManager.pending.find((function(t){return t.vastId===n}));r?(l.a.log("Chosen Ad from combination - ".concat(r.type," - ").concat(r.vastId," - price ").concat(r.cpm),r),this._initAd(r)):(l.a.log("No ad combination cached - ending slot"),this._endSlot())}else l.a.log("No ad combination - ending slot"),this._endSlot()},t.prototype._initAd=function(t){var e=t.cpm,n=Object(Qt.b)(t);e<n&&l.a.log("Playing bid lower than floor price",{vastId:t.vastId,responseCPM:e,floor:n}),l.a.info("Ad init - ".concat(t.type," - ").concat(t.vastId," - price ").concat(t.cpm),t),this._playingAd=Object(ot.c)(t),this._adsPlayedInSlot.set(t.vastId,(this._adsPlayedInSlot.get(t.vastId)||0)+1),this._adsManager.removeAdFromCache(t),it.b.once(it.a.INTERNAL.AD.LOADED,this._handleAdLoaded),t.initMedia()},t.prototype._handleAdLoaded=function(t){var e,n=t.ad;if(n.publishersAdType===pe.a.HOUSE&&(this._currentSlotImpCount>=1||this._adsManager.pending.length))return Object(A.b)(this._players,n),void this._playNextAd();if((n.publishersAdType===pe.a.REGULAR||n.publishersAdType===pe.a.DEFAULT)&&this._adsManager.pending.length&&(this._adsManager.addToCache(n),Q(b.b,this._adsManager.pending).vastId!==n.vastId))return void this._playNextAd();(null===(e=this._playingAd)||void 0===e?void 0:e.publishersAdType)===pe.a.SPONSORED&&(this.stop(),it.b.once(it.a.INTERNAL.CONTENT.ENDED,(function(){setTimeout((function(){return it.b.emit(it.a.PLAYER.ACTION.PAUSE)}),500)}))),this._adReady=!0,this._playingAd&&this._playingAd.vastId!==n.vastId&&l.a.error("Ad loaded but there is already an ad playing",new Error,{playingAd:this._playingAd,loadedAd:n,category:{main:L.a.MONETIZATION}}),l.a.info("Ad loaded - ".concat(n.type," - ").concat(n.vastId," - price ").concat(n.cpm),n),this._players.paused||(this._holdAdPlayback?(Object(v.g)(this._players,n),it.b.emit(it.a.INTERNAL.CONTENT.HIDE)):this._playAd())},t.prototype._playAd=function(){this._playingAd&&l.a.info("Playing Ad - ".concat(this._playingAd.type," - ")+"".concat(this._playingAd.vastId," - price ").concat(this._playingAd.cpm),this._playingAd),Object($t.a)(this._players,this._playingAd,!1,null),this._adReady=!1},t.prototype._onAdPaused=function(){this._playingAd&&!this._playingAd.isPaused&&(l.a.info("Paused Ad - ".concat(this._playingAd.type," - ")+"".concat(this._playingAd.vastId," - price ").concat(this._playingAd.cpm),this._playingAd),this._adReady=!0)},t.prototype._resumeAd=function(){this._playingAd&&this._playingAd.isPaused&&(l.a.info("Resuming Ad - ".concat(this._playingAd.type," - ")+"".concat(this._playingAd.vastId," - price ").concat(this._playingAd.cpm),this._playingAd),Object(o.f)(this._players,this._playingAd),this._adReady=!1)},t.prototype._endSlot=function(){this._logAdsInCache("Ending slot ".concat(this._currentSlotType)),this._isActiveSlot=!1,this._slotAuctionEventSent=!1,this._slotEndTime=new Date,this._slotStopwatch.reset(),this._playingAd=null,this._adReady=!1,this._smartAdPods=null,this._smartAdsSlotEnabled=!1,this._smartAdsSlotDuration=0,this._smartPodsLimit=0,this._priceService.resetSecondPrice(),this._endSlotTimer(),this._adsPlayedInSlot.clear(),this._players.monetize&&this._startTimer();var t={slotType:this._currentSlotType,numOfImps:this._currentSlotImpCount,auctionId:this._players.auctionId};this._players.emit(d.a.SLOT_END,t),it.b.emit(it.a.INTERNAL.AD.SLOT_END,t),this._currentSlotImpCount<this._getCurrentSlotMaxImps()&&this._adsManager.pending.length&&l.a.remote("Monetization: ads in the stack but no ad in slot",{category:{main:L.a.MONETIZATION,sub:L.b.SLOT_END}}),this._currentSlotImpCount=0,this._players.adSlotImpressionCount=0},t.prototype._insertAdContent=function(){var t,e=Object(y.q)(Object(y.f)(null===(t=this._playingAd)||void 0===t?void 0:t.adContent))[0];this._content.insertAdContent({url:e})},t.prototype._isLastAdInSlot=function(){return this._currentSlotImpCount===this._getCurrentSlotMaxImps()-1},t.prototype._getCurrentSlotMaxImps=function(){var t,e;return this._slotTracker.enabled?(null===(t=this._config[this._currentSlotType])||void 0===t?void 0:t.maxImpressions)+this._slotTracker.getSlotMissingImps(this._currentSlotType):null===(e=this._config[this._currentSlotType])||void 0===e?void 0:e.maxImpressions},t.prototype._isSlotEnabled=function(t){return this._config[t].enabled},t.prototype._selectAd=function(t){var e=this._getEligibleAdsForSlot(t);return Q(this._players,e)},t.prototype._selectAdCombination=function(t,e,n){return void 0===n&&(n=2),Z(this._players,t,e,n)},t.prototype._filterAdsByPlayCappingInSlot=function(t){var e=this,n=(t||[]).filter((function(t){return!t.playCappingInSlot||(e._adsPlayedInSlot.get(t.vastId)||0)<t.playCappingInSlot}));if((null==n?void 0:n.length)!==(null==t?void 0:t.length)){var r=[];this._adsPlayedInSlot.forEach((function(t,e){r.push({vastId:e,timesPlayedInSlot:t})})),l.a.log("Some Ads reached play capping in slot",r)}return n},t.prototype._getEligibleAdsForSlot=function(t){return 1===t.length||this._isLastAdInSlot()?t:t.filter((function(t){return!t.adContent}))},t.prototype._logAdsInCache=function(t){void 0===t&&(t="");var e=this._adsManager.pending;l.a.log("".concat(t," - Ads in cache - ").concat(e.length),e.map((function(t){return{id:t.vastId,type:t.type,bidder:t.bidder,price:t.cpm,state:h.a[t.state],priority:t.priority,playCappingInSlot:t.playCappingInSlot}})))},t.prototype._logAdsInSmartPods=function(t){var e;void 0===t&&(t="");var n=(null===(e=this._smartAdPods)||void 0===e?void 0:e.ads)||[];l.a.log("".concat(t," - Ads in Smart pods cache - ").concat((null==n?void 0:n.length)||0),(null==n?void 0:n.map((function(t){return{id:t.adId,price:t.cpm}})))||[])},t.prototype._isPlayerPaused=function(){var t;return!(!this._content.paused&&!(null===(t=this._playingAd)||void 0===t?void 0:t.isPaused))},t.prototype._onAuctionEnd=function(t){var e=t.newAds,n=t.spaceInterval,r=void 0===n?null:n;this._slotAuctionEventSent||(this._slotAuctionEventSent=!0,it.b.emit(it.a.AD.SLOT_AUCTION_END,{newAds:e})),r&&r.factor&&this._spaceBAInterval(r)},t.prototype._onAdBlocked=function(t){var e=t.ad,n=t.creativeId;this._adsManager.removeAdFromCache(e),Object(A.b)(this._players,e,38),this._players.eventDispatcher.sendDemandEvent(ve.b.MCD_AD_BLOCKED,e,this._players,{creativeId:n}),l.a.remote("Ad blocked",me(me({},Object(at.b)(e)),{category:{main:L.a.MONETIZATION,sub:L.b.GEO_EDGE}})),this._playingAd&&e===this._playingAd&&(this._onAdComplete({playAdContent:!1}),l.a.remote("Current playing ad blocked",me(me({},Object(at.b)(e)),{category:{main:L.a.MONETIZATION,sub:L.b.GEO_EDGE}})))},t.prototype._spaceBAInterval=function(t){var e=t.factor,n=void 0===e?1:e;this._config.breakingAds.interval=this._config.breakingAds.interval*n,l.a.info("BA interval spaced by ".concat(n," - new interval ").concat(this._config.breakingAds.interval))},t.prototype._getFetchAdsTimeout=function(){return this._config.breakingAds.aggressive?this._config.playerStart.timeout:this._config.timeToFetchAdsBeforeSlot},t.prototype._getContentItemsBeforePreRoll=function(){return this._config.preRoll.enabled&&this._config.preRoll.contentItemsBeforeSlot?this._config.preRoll.contentItemsBeforeSlot:1},t}(),_e=n(91);function Te(t){var e=Object(c.c)("PCount",{players:t},(function(){var e,n,r;return null===(r=null===(n=null===(e=t.ioc)||void 0===e?void 0:e.tag)||void 0===n?void 0:n.players)||void 0===r?void 0:r.length}));t.state=new _e.b,function(t){var e=Oe(t);if(!e)return;t.widthDetected=e.width,t.heightDetected=e.height,Object(i.e)(t,i.a.E_DETECTED,{},{})}(t),it.b.once(it.a.INTERNAL.USER.INTERACTION,(function(){t.userInteraction=!0})),t.serverEvents.supplyEvent({name:"SupplyLoaded",instanceCount:e}),function(t){t.serverEvents.serverEventUrl=-1===t.eventServer2.indexOf("//")?t.serverHost(t.eventServer2)+t.serverEvents.serverEventRoute:Object(s.r)(t.protocol,t.eventServer2),t.serverEvents.DryRun=!1}(t),Object(r.d)(t.rootDivElem),function(t){t.widthOverwrite&&t.heightOverwrite?(t.width=t.widthOverwrite,t.height=t.heightOverwrite,t.rootDivElem.style.width=t.width+"px",t.rootDivElem.style.height=t.height+"px"):t.widthDetected&&t.heightDetected&&0!==t.widthDetected&&0!==t.heightDetected&&(!t.sizeTolerance||Math.abs(t.width-t.widthDetected)>t.sizeTolerance||Math.abs(t.height-t.heightDetected)>t.sizeTolerance)&&(t.width=t.widthDetected,t.height=t.heightDetected,t.initialWidth=t.widthDetected,t.initialHeight=t.heightDetected);(function(t){t.initialWidth||(t.initialWidth=t.widthDetected);t.initialHeight||(t.initialHeight=t.heightDetected)})(t),t.isNetwork&&(t.width=parseInt(t.networkParams.width,10),t.height=parseInt(t.networkParams.height,10))}(t),function(t){var e=Object(r.c)("root_container"),n=document.querySelector("#".concat(t.divId," .").concat(e));n||(n=document.createElement("div"),Object(r.a)(n,t.info.mobile?"mobile":"desktop"));t.divElem=n,Object(r.b)(t.divElem,"root_container"),t.rootDivElem.appendChild(t.divElem),t.controlsTouch&&Object(r.a)(t.divElem,"new_ui");t.divElem.id=e}(t);var n=Object(u.i)(t);if(t.playerReadyResolve(),Object(o.b)(t,null,"player.ready",{rootDiv:t.rootDivElem}),t.started=!0,t.autoplay=!0,t.paused=!1,t.content.setVolume(t.volume,t.muted),it.b.on(it.a.PLAYER.MUTED,(function(){return Object(o.j)(t,0,!0)})),t.serverEvents.supplyEvent({name:"SupplyStarted"}),t.clickToPlay&&(t.chilled=!0),t.closed)return!1;Object(a.b)(t),ie();var d=new Ee(t,n);setTimeout((function(){d.init(),Object(he.b)({players:t,content:n,ads:d})})),Object(o.b)(t,null,"player.started")}function Ie(t){t.started=!0,t.autoplay=!0,t.paused=!1}function Oe(t){if(t.rootDivElem){if(t.isNetwork)return{width:t.width,height:t.height};var e=t.rootDivElem.offsetWidth,n=t.rootDivElem.offsetHeight;if(e&&n&&0!==e&&0!==n||(e=t.rootDivElem.clientWidth,n=t.rootDivElem.clientHeight),!e||!n||0===e||0===n){var r=t.rootDivElem.getBoundingClientRect();e=r.width,n=r.height}if(0!==e&&0!==n)return{width:e,height:n}}}function Se(t){return t.renderingContext.querySelectorAll("[id='"+t.divId+"']:not([data-exco-used])")[0]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return f}));var r=n(62),i=n(25),o=function(t){var e;return!!(null===(e=null==t?void 0:t.consentMetadata)||void 0===e?void 0:e.gdprApplies)||!1},a=function(t){var e;return null===(e=null==t?void 0:t.consentMetadata)||void 0===e?void 0:e.gppSectionId},s=function(t){return(null==t?void 0:t.consentString)||""},c=function(t){var e;return(null===(e=null==t?void 0:t.consentMetadata)||void 0===e?void 0:e.additionalConsent)||""},u=function(t){var e;return(null===(e=null==t?void 0:t.consentMetadata)||void 0===e?void 0:e.purposeOne)||!1},d=function(t){return function(t){var e;return null===(e=null==t?void 0:t.consentMetadata)||void 0===e?void 0:e.consentStringType}(t)||function(t){return o(t)?r.b.TCF_V2:a(t)?r.b.GPP:void 0}(t)},l=function(t){return{tcString:s(t),gdprApplies:o(t),addtlConsent:c(t),purposeOneTreatment:u(t)}},p=function(t){return{sectionId:a(t),gppString:s(t),pingData:{gppString:s(t)}}},h=function(t){var e,n,i=d(t),o=((e={})[r.b.TCF_V2]=l,e[r.b.GPP]=p,e);return(null===(n=o[i])||void 0===n?void 0:n.call(o,t))||{}},f=function(t){var e,n=d(t);return((e={})[r.b.TCF_V2]=i.b.TCF,e[r.b.GPP]=i.b.GPP,e)[n]}},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),function(t){t.STUB="stub",t.ERROR="error",t.LOADED="loaded"}(r||(r={}));var i,o,a=444;!function(t){t.ACCEPTED="accepted",t.NOT_ACCEPTED="not-accepted",t.NOT_INCLUDED="not-included"}(i||(i={})),function(t){t.LOADED="tcloaded",t.USER_ACTION_COMPLETE="useractioncomplete",t.CMP_UI_SHOWN="cmpuishown"}(o||(o={}))},function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"g",(function(){return A})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return g}));var r=n(71),i=n(9),o=n(76),a=n(34),s=n(1),c=n(6),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},d=null;function l(t){if(null===d){var e=p();d=e||Object(a.a)(y(t)),s.a.info("Human session status",{enabled:d,cached:e,sampleRate:y(t)})}return d}function p(){return null!==o.b("hustatus")}function h(t){return d&&!p()?Object(i.a)(t,{hu:!0}):t}function f(t,e){(function(t){if(function(t){return t&&"woiv"in t&&"wolud"in t&&"wopt"in t}(t)&&!v(t))return!0;return!1})(e)&&(d=!0,function(t){var e,n,r;return(null===(r=null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.human)||void 0===r?void 0:r.saveOnLocalStorage)||!1}(t)&&o.c("hustatus",e,{ttl:864e5})),v(e)&&s.a.warn("Human IVT returned an error state code - ".concat(e.wopt),{payload:e,category:{main:c.a.MONETIZATION,sub:c.b.IVT}})}function v(t){return"wopt"in t&&3!==(null==t?void 0:t.wopt)}function m(t,e){void 0===e&&(e=null);var n=e||o.b("hustatus");if(n){var r=n;t.sessionConfig.grh=u({},r)}else t.sessionConfig.grh=null;A(t.sessionConfig.grh)&&s.a.remote("Human IVT session detected",{payload:t.sessionConfig.grh,category:{main:c.a.MONETIZATION,sub:c.b.IVT}})}function A(t){return!0===(null==t?void 0:t.woiv)}function y(t){var e,n,r;return(null===(r=null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.human)||void 0===r?void 0:r.sampleRate)||0}function b(t){return!(!t.isHumanSession||!Object(a.a)(function(t){var e,n,r;return(null===(r=null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.human)||void 0===r?void 0:r.postBidPixelSampleRate)||0}(t)))}function g(t,e){var n=function(t,e){return{adSourceId:e.vastId,host:t.domainDetected,isMobile:Object(r.b)(t),pageLoadUid:t.pageLoadUid,pv:t.whiteOpsId,to:t.whiteOpsState}}(t,e),o=n.adSourceId,a=n.pageLoadUid,s=n.host,c=n.isMobile,u=n.to,d=n.pv,l={di:s,ui:a,pp:"0012000001fxZm9AAE",si:o,md:2,ti:Math.floor(1e20*Math.random()),de:c?2:4,sr:"ex.co",pv:d,to:u};return Object(i.b)("https://s.admthop.com/2/193913/analytics.gif?dt=1939131609254688303000&",l)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t,e){this.consentApiName=t,this.location=e,this.onConsentResponseCb=[]}return t.prototype.onConsentResponse=function(t){return this.onConsentResponseCb.push(t),this},t.prototype.getUpdatedConsent=function(){return this.updatedConsentData},t.prototype.setUpdatedConsentData=function(t){var e=t.consentString,n=t.apiResponseData,r=t.consentType;this.updatedConsentData={consentString:e||"",geoLocation:this.location,consentApi:this.consentApiName,consentType:r,apiResponse:n},this.invokeCallbacks()},t.prototype.invokeCallbacks=function(){var t=this;this.onConsentResponseCb.forEach((function(e){return e(t.updatedConsentData)}))},t.prototype.stopListening=function(){},Object.defineProperty(t.prototype,"type",{get:function(){return this.consentApiName},enumerable:!1,configurable:!0}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return h}));var r,i,o=n(8),a=n(17),s=n(79),c=n(0),u=n(1);function d(){r&&r.disconnect(),i&&i.disconnect()}function l(t){d(),r=new s.a(t.divElem,{threshold:[.1,.5]}),i=new s.a(t.divElem,{threshold:.01,margin:"".concat(p(t),"px")});var e=!1;i.observe(t.divElem,(function(t){var e=t.entry.intersectionRatio;0<e&&e<.5&&(u.a.debug("Player upcoming view"),c.b.emit(c.a.INTERNAL.PLAYER.UPCOMING_VIEW))})),r.observe(t.divElem,(function(n){t.partiallyInView=function(t,e){return t.visible&&t.entry.intersectionRatio>e}(n,.1);var r=function(t,e){return t.visible&&t.entry.intersectionRatio>=e}(n,.5);!r&&!function(t,e){return t.visible&&t.entry.intersectionRatio<e&&t.entry.boundingClientRect.bottom<0}(n,.5)||e||(e=!0,t.wasInView=!0,t.emit(a.a.PLAYER_FIRST_VIEW),Object(o.b)(t,null,a.a.PLAYER_FIRST_VIEW)),r&&t.isInView!==r?(t.isInView=!0,t.emit(a.a.PLAYER_IN_VIEW),Object(o.b)(t,null,a.a.PLAYER_IN_VIEW)):t.isInView!==r&&(t.isInView=!1,t.emit(a.a.PLAYER_OUT_OF_VIEW),Object(o.b)(t,null,a.a.PLAYER_OUT_OF_VIEW))}))}function p(t){var e;return(null===(e=t.extraParams)||void 0===e?void 0:e.upcomingViewDistance)||10}function h(t){var e=t.isInView?1:0;return null!=e?{viewability:e}:{}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(10),i=n(9),o=n(39),a=n(3);function s(t,e,n,s){try{for(var c={},u=[],d=e&&e.beacons&&e.beacons[n]||[],l=0,p=0,h=d;p<h.length;p++){var f=h[p];c[f.id||"__u"+l++]=f}if(Object(a.f)((function(t){return u.push(t)}),c),u&&u.length>0){var v=Object(o.b)(t,null,s);!function(t,e,n){e=Object(r.f)(e);for(var o=0,a=e;o<a.length;o++){var s=a[o].url;s&&(n&&(s=n(s)),t.sendPixel(Object(i.t)(t.protocol,s)))}}(t,u,v)}}catch(t){}}function c(t,e,n){return t.beacons=t.beacons||{},t.beacons[e]=t.beacons[e]||[],!1===function(t,e){return-1!==t.findIndex((function(t){return t.url===e.url&&t.rate===e.rate}))}(t.beacons[e],n)&&t.beacons[e].push(n),t.beacons[e]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u}));var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function i(t){void 0===t&&(t="");var e=t.split(",");return e.length&&e.length>3?e[2]:""}var o=function(t,e){void 0===e&&(e=null);try{var n=t.split("!"),r=n.splice(1),i=n[0].split(","),o=i[0],a=i[1],s=r.map((function(t){var n=t.split(","),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5];return function(t){var e=t.asi,n=t.sid,r=t.hp,i=t.rid,o=t.name,a=t.domain,s={};return e&&(s.asi=e),n&&(s.sid=n),r&&(s.hp=parseInt(r,10)||r),i&&(s.rid=i),o&&(s.name=o),a&&(s.domain=a),s}({asi:(null==e?void 0:e.asi)||r,sid:(null==e?void 0:e.sid)||i,hp:o,rid:a,name:s,domain:c})}));return o&&a&&s.length?{ver:o,nodes:s,complete:parseInt(a,10)}:null}catch(t){return null}};function a(t){return"playbuzz.com"===t.asi}var s=function(t){return!t||0===t.nodes.length},c=function(t,e){var n,r,s=e.isPubDemand,c=e.schainDisabled,u=e.schainOverride;if(c)return null;var d={config:o((null===(n=t.tagConfig)||void 0===n?void 0:n.schain)||"",(null==u?void 0:u.enabled)?u:null)||{complete:1,nodes:[{asi:"playbuzz.com",hp:1,sid:i(null===(r=t.tagConfig)||void 0===r?void 0:r.schain)}],ver:"1.0"},validation:"relaxed"};return s?d.config.nodes=d.config.nodes.filter((function(t){return!a(t)})):t.resellersJSONDomain&&(d.config.nodes=d.config.nodes.filter((function(t){return a(t)}))),!s&&t.domainDetected&&t.domainDetected.includes("playbuzz.com")&&(d.config.nodes=d.config.nodes.filter((function(t){return!a(t)}))),0===d.config.nodes.length?null:d},u=function(t,e){var n=c(t,e);if(!n)return"";var i=n.config;return r(["".concat(i.ver,",").concat(i.complete)],i.nodes.map((function(t){return[t.asi,t.sid,t.hp,t.rid,t.name,t.domain].join(",")})),!0).join("!")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return l}));var r,i=n(0),o=n(5);!function(t){t.IMP_COUNT="impressionCount",t.REQUEST_COUNT="requestCount",t.SHAKRANISTIM_ERRORS="shakranistimErrors"}(r||(r={}));var a=new Map;function s(){i.b.on(i.a.AD.INIT,(function(t){var e,n=t.demand;a.has(n.vastId)||a.set(n.vastId,((e={})[r.IMP_COUNT]=0,e[r.REQUEST_COUNT]=0,e[r.SHAKRANISTIM_ERRORS]=0,e))})),i.b.on(i.a.AD.IMPRESSION,(function(t){c(t.demand.vastId,r.IMP_COUNT)})),i.b.on(i.a.INTERNAL.AD.REQUEST,(function(t){c(t.demandId,r.REQUEST_COUNT)})),i.b.on(i.a.AD.ERROR,(function(t){var e=t.demand;Object(o.A)(e)&&c(e.vastId,r.SHAKRANISTIM_ERRORS)}))}function c(t,e){var n,i=a.get(t)||((n={})[r.IMP_COUNT]=0,n[r.REQUEST_COUNT]=0,n[r.SHAKRANISTIM_ERRORS]=0,n);i[e]+=1,a.set(t,i)}function u(t){var e;return(null===(e=a.get(t))||void 0===e?void 0:e[r.REQUEST_COUNT])||0}function d(t){var e;return(null===(e=a.get(t))||void 0===e?void 0:e[r.IMP_COUNT])||0}function l(t){return a.has(t)}},function(t,e,n){"use strict";var r,i,o,a;n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),function(t){t[t.SUFFICIENT=1]="SUFFICIENT",t[t.INSUFFICIENT=2]="INSUFFICIENT",t[t.UNKNOWN_NOT_REQUIRED=3]="UNKNOWN_NOT_REQUIRED",t[t.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(t){t[t.TCF_V2=2]="TCF_V2",t[t.GPP=4]="GPP"}(i||(i={})),function(t){t.REJECTED="rejected",t.ACCEPTED="accepted",t.UNKNOWN="unknown"}(o||(o={})),function(t){t.REQUEST_CONSENT="send-consent-data",t.CONSENT_DATA="consent-data"}(a||(a={}))},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t.YIELDMO="yieldmo",t.PULSEPOINT="pulsepoint",t.YAHOO="yahooAds",t.SOVRN="sovrn",t.TRIPLELIFT="triplelift",t.SMAATO="smaato",t.PUBMATIC="pubmatic",t.SMARTX="smartx"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return I})),n.d(e,"c",(function(){return S})),n.d(e,"b",(function(){return C}));var r=n(10),i=n(21),o=n(1),a=n(51),s=n(74),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},u=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l={UID:"userId",EXCO_UID:"exco-uid",EXCO_UIDS:"uids"},p="exco-user-sync",h="user-sync-done",f="user-ids-updated",v={},m="//sync.ex.co/v1/cookie_sync.html",A=function(t,e){window.addEventListener("message",(function(n){var r=n.data;r&&r.type===p&&r.eventName===t&&e(r.metadata)}))},y=function(t,e){var n=e.networkId,r=e.cdnPrefix,s=e.country,u=e.domain,d=e.version,l=E(t),p=_({network:n,consentParams:l},{cdnPrefix:r,domain:u,version:d}),h=function(t,e){var n=e.consentResponse,r=e.consentParams,o=e.country,s=e.network;return{url:t,requestParams:c(c({},r),{network:s}),userConsent:{countryCode:o,isGDPRCountry:Object(i.h)(o),consentData:Object(a.b)(n)}}}(p,{consentResponse:t,consentParams:l,country:s,network:n});O(p).catch((function(t){o.a.error("User sync failed",t,h)}))},b=function(t){return{gpp:t.consentString,gpp_sid:Object(i.c)(t)}},g=function(t){var e;return{gdpr:(null===(e=null==t?void 0:t.apiResponse)||void 0===e?void 0:e.gdprApplies)?"1":"0",gdpr_consent:t.consentString}},E=function(t){var e,n,r=null==t?void 0:t.consentType,o=((e={})[i.a.GPP]=b,e[i.a.TCF]=g,e),a=null===(n=o[r])||void 0===n?void 0:n.call(o,t);return Object.assign({gdpr:"0",gdpr_consent:"",gpp:"",gpp_sid:""},a)},_=function(t,e){var n,r=t.network,i=t.consentParams;void 0===e&&(e={});try{var o=new URL(window.location.protocol+function(t){return void 0===t&&(t={}),t.cdnPrefix?m.replace("cdn",t.cdnPrefix):m}(e)),a=["368531133"];r&&a.push(r);for(var c=0,u=Object.entries(i);c<u.length;c++){var d=u[c],p=d[0],h=d[1];o.searchParams.set(p,h)}(null==e?void 0:e.version)&&"e15e216-l"!==e.version&&o.searchParams.set("version",e.version);var f=s.a.get(l.EXCO_UID);return f&&o.searchParams.set("excouid",f),o.searchParams.set("network",a.join(",")),o.searchParams.set("ref",(null==e?void 0:e.domain)||(null===(n=window.location)||void 0===n?void 0:n.href)||""),o.toString()}catch(t){}return null},T=function(t){var e,n;return(null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.experimental)||void 0===n?void 0:n.userSyncVersion)||"e15e216-l"},I=function(t,e){(function(t){return!t.isApp&&!1!==t.userIdentities&&(void 0===t.overrides.monetize||!0===t.overrides.monetize)})(e)&&y(t,{version:T(e),networkId:e.networkId,cdnPrefix:e.cdnPrefix,country:e.country,domain:e.domain})},O=function(t){return u(void 0,void 0,void 0,(function(){return d(this,(function(e){return[2,new Promise((function(e){t||e(),A(f,(function(t){return Object.assign(v,t)})),A(h,(function(){return e()})),setTimeout((function(){return e()}),6e3),function(t){return document.querySelector('iframe[src*="'.concat(t,'"]'))}(t)||Object(r.j)(t)}))]}))}))},S=function(t){Object.keys(v).length&&t(v),A(f,(function(e){Object.assign(v,e),v.excoCookie&&s.a.set(l.EXCO_UID,v.excoCookie,2592e3,"/"),t(e)}))},C=function(){return v.excoCookie||(v.excoCookie=s.a.get(l.EXCO_UID)),v}},function(t,e,n){"use strict";n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return y})),n.d(e,"e",(function(){return E})),n.d(e,"d",(function(){return _})),n.d(e,"a",(function(){return T}));var r=n(10),i="firefox",o="safari",a="edge",s=n(34),c=n(0),u=n(71),d=n(2),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},p=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},h=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f={partner:1181347726,timeoutInMillis:3e3,manualWinReportEnabled:!0,ABTestingConfigurationSource:"percentage",idsBlackListConfiguration:[{browsers:["*"],adapters:["ttd"],sources:["*"]}]},v=["ttd"],m=function(){var t=function(){var t;return null===(t=null===window||void 0===window?void 0:window.__EXCO)||void 0===t?void 0:t.IntentIqObject},e=t();return e?Promise.resolve(e):new Promise((function(e){return Object(r.m)("iiq-script",(function(){return"//cdn.ex.co/player/vendor/iiq_v6.121.js"}),(function(){var n;return n=window.IntentIqObject,window.__EXCO=window.__EXCO||{},window.__EXCO.IntentIqObject=n,e(t())}),!0)}))};var A=function(t){return!!t.iiqEnabled&&(!!function(t){return I(t).includes(t.country)||["JP","BR","MX"].includes(t.country)&&Object(s.a)(20)}(t)&&(!!Object(u.c)(t)||!Object(u.b)(t)&&(e=t.browser,O(d.b).includes(e))));var e};var y=function(t){return new Promise((function(e){return p(void 0,void 0,void 0,(function(){var n,r;return h(this,(function(i){switch(i.label){case 0:if(!A(t))return[2,e(null)];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,m()];case 2:return n=i.sent(),r=function(){!function(t,e,n){var r=t.iiqPercentage,i=t.domainDetected,o=t.prebidJS;t.iiq=new e(l({callback:function(t){var e=(void 0===t?{}:t).eids;return n({provider:"iiq",eids:e})},abPercentage:r,domainName:i,pbjs:o},f))}(t,n,e)},t.prebidJS.initialized?r():c.b.once(c.a.INTERNAL.PREBID.LOADED,r),[3,4];case 3:return i.sent(),e(null),[3,4];case 4:return[2]}}))}))}))},b={prebid:1,tam:2,gam:3,rtb:4,vast:5},g=function(t){if(t)return b[t]},E=function(t,e){t.iiq&&t.iiq.reportExternalWin({currency:"USD",cpm:e.price,bidderCode:e.bidder||e.adType,biddingPlatformId:g(e.adType),domainName:t.domainDetected,partnerAuctionId:t.playerSessionId})};var _=function(t){(function(t){return!!t.iiq})(t)&&t.eventDispatcher.send("mcd_iiq_init",function(t){return{extraData:{abTestGroup:t.iiq.actualGroup,percentage:t.iiqPercentage}}}(t))},T=function(t){var e;if(!t||!t.length)return null;var n=null==t?void 0:t.find((function(t){return"intentiq.com"===t.source}));if(!n)return null;var r=null===(e=n.uids)||void 0===e?void 0:e.find((function(t){var e;return"ppuid"===(null===(e=null==t?void 0:t.ext)||void 0===e?void 0:e.stype)}));return(null==r?void 0:r.id)||null},I=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.iiq)||void 0===r?void 0:r.countries)||["US","CA","AU"]},O=function(t){var e,n,r;return(null===(r=null===(n=null===(e=null==t?void 0:t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.iiq)||void 0===r?void 0:r.browsers)||[i,a,o]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={USER:{AMP_VIDEO_CONSENT:"internal.user.amp-video-consent",INTERACTION:"internal.user.interaction"},PAGE:{URL_CHANGED:"page.url-changed"},PLAYER:{UPCOMING_VIEW:"internal.player.upcoming-view",RIGHT_IN_VIEW:"internal.player.right-in-view"},CONTENT:{LOAD_START:"internal.content.load-start",LOAD_END:"internal.content.load-end",STARTED:"internal.content.started",ENDED:"internal.content.ended",PLAYING:"internal.content.playing",PAUSED:"internal.content.paused",VIDEO_ELEMENT_CHANGED:"internal.content.video-element-changed",TIME:"internal.content.time",PROGRESS:"internal.content.progress",HIDE:"internal.content.hide",ERROR:"internal.content.error"},AD:{REQUEST:"internal.ad.request",FETCHED:"internal.ad.fetched",INIT:"internal.ad.init",LOADED:"internal.ad.loaded",SLOT_END:"internal.ad.slot-end",UPCOMING_SLOT:"internal.ad.upcoming-slot",PAUSE_FOR_CONTENT:"internal.ad.pause-for-content",SLOT_START:"internal.ad.slot-start",RESET_BREAKING_ADS_TIMER:"internal.ad.reset-breaking-ads-timer",SESSION_END:"internal.ad.session-end",BLOCKED:"internal.ad.blocked",IMA_AD_LOADED:"internal.ad.ima-ad-loaded",SLOT_HAS_NOT_STARTED:"internal.ad.slot-does-not-started",SKIP_SLOT:"internal.ad.skip-slot",TIME_UPDATE:"internal.ad.time-update"},AUCTION:{START:"internal.auction.start",AD_FETCHED:"internal.auction.ad-fetched",END:"internal.auction.end",STOP:"internal.auction.stop"},PREBID:{LOADED:"internal.prebid.loaded",SERVER:{LOADED:"internal.prebid.server.loaded"}},GOOGLE_IMA:{ADS_MANAGER_LOADED:"ima.ads-manager.loaded",AD_ERROR:"ima.ad-error"},GOOGLE_TAG:{SLOT_IMPRESSION_VIEWABLE:"gtag.slot-impression-viewable",SLOT_RESPONSE_RECIEVED:"gtag.slot-response-recieved",SLOT_RENDER_ENDED:"gtag.slot-render-ended",SLOT_ONLOAD:"gtag.slot-onload"}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r=n(10),i=n(9),o=n(29),a=n(0),s=n(19),c="Exco",u="1.4.8",d=function(){function t(e,n,r,a){var s=this;this.OmidSessionClient=window.OmidSessionClient.default,this.partner=new this.OmidSessionClient.Partner(c,u),this.isNativeSdk=!1,this.players=e;var d=n.map((function(e){var n=t.replaceOmidMacros(e.resource);return new s.OmidSessionClient.VerificationScriptResource(n,e.vendor,e.parameters)}));this.position=this._getPosition(e),this.isAutoPlay=e.autoplay,this.isNativeSdk=e.isNativeSdk,this.context=new this.OmidSessionClient.Context(this.partner,d,Object(i.g)()),this.adDuration=a,this.videoEl=r.getElementsByTagName("video")[0],this.context.setVideoElement(this.videoEl),this.context.setServiceWindow(Object(o.c)())}return t.loadOmidScript=function(t){return window.OmidSessionClient?Promise.resolve():new Promise((function(e){t.isNativeSdk||Object(r.l)("https://cdn.ex.co/ad-player/feat/omsdk/omweb-v1.js"),Object(r.l)("https://cdn.ex.co/ad-player/feat/omsdk/omid-session-client-v1.js",!1,e)}))},t.replaceOmidMacros=function(t){return t.replace(/\[(OMID_PARTNER|OMIDPARTNER)\]/g,c)},t.prototype._getPosition=function(t){return t.isOutstream?"standalone":t.adSlotCurrentType===s.a.PLAYER_START?"preroll":"midroll"},t.prototype.startAdSession=function(t){var e=this;this.playerData=t,this.adSession=new this.OmidSessionClient.AdSession(this.context),this.adEvents=new this.OmidSessionClient.AdEvents(this.adSession),this.mediaEvents=new this.OmidSessionClient.MediaEvents(this.adSession),this.isNativeSdk||(this.adSession.setCreativeType("video"),this.adSession.setImpressionType("beginToRender")),this.adSession.isSupported()&&(this.isNativeSdk||this.adSession.start(),this.adSession.registerSessionObserver((function(t){if("sessionStart"===t.type){"definedByJavaScript"===t.data.creativeType&&e.adSession.setCreativeType("video"),"definedByJavaScript"===t.data.impressionType&&e.adSession.setImpressionType("beginToRender");var n=e.players.skipConfig.offset,r=e.players.skipConfig.enabled&&n>0,i=new e.OmidSessionClient.VastProperties(r,n,e.isAutoPlay,e.position);e.adEvents.loaded(i),e.adEvents.impressionOccurred()}else"sessionError"===t.type||t.type})),a.b.on(a.a.AD.MUTED,this.volumeChange.bind(this)),a.b.on(a.a.AD.UNMUTED,this.volumeChange.bind(this)),this.videoEl.addEventListener("click",(function(){e.mediaEvents.adUserInteraction("click")})),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach((function(t){e.videoEl.addEventListener(t,(function(){return e.videoPlayerStateChange()}))})))},t.prototype.volumeChange=function(t){this.mediaEvents.volumeChange(t.muted?0:1)},t.prototype.endAdSession=function(){this.isNativeSdk||this.adSession.finish()},t.prototype.videoDidCrossQuartile=function(t){if(this.mediaEvents)switch(t){case 0:this.mediaEvents.start(this.adDuration,this.videoEl.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}},t.prototype.videoPlayerStateChange=function(){if(this.mediaEvents){var t=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullScreen?"fullscreen":"normal";this.mediaEvents.playerStateChange(t)}},t}();e.c=d},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return u}));var r,i=n(1),o=n(6),a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},s=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(t){t.HOUSE="house",t.DIRECT="direct",t.REGULAR="regular",t.SPONSORED="sponsored",t.DEFAULT="default",t.UNDEFINED="undefined"}(r||(r={}));var c=function(t,e){var n,r=e.networkId,i=e.creativeId,a=e.type,s={data:{demandId:t.vastId,networkId:r,creativeId:i},category:{main:o.a.MONETIZATION,sub:o.b.CREATIVE}};try{t.ad&&(s.data.ad=(n=t.ad)&&n.data&&{adId:n.data.adId,adSystem:n.data.adSystem,adQueryId:n.data.adQueryId,adWrapperCreativeIds:n.data.adWrapperCreativeIds,adWrapperIds:n.data.adWrapperIds,adWrapperSystems:n.data.adWrapperSystems,creativeAdId:n.data.creativeAdId,creativeId:n.data.creativeId},void 0!==a&&(s.data.info={type:a,adType:t.publishersAdType,priority:t.priority}))}catch(t){s.error=t}return s},u=function(t){return new Promise((function(e){var n,o,u,d=t.getNetworkId(),l=t.getCreativeId();if(i.a.remote("".concat("[creative-info]"," Fetching"),c(t,{networkId:d,creativeId:l})),t.priority=-1,t.gpvDemand.priority=-1,t.publishersAdType=r.DEFAULT,!d||!l)return i.a.error("".concat("[creative-info]"," Missing networkId or creativeId"),c(t,{networkId:d,creativeId:l})),e();(n="".concat("https://player.ex.co","/ct?id=").concat(d,"_").concat(l),o={timeout:500},u=(void 0===o?{}:o).timeout,a(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,e){try{var r=new AbortController,i=setTimeout((function(){return r.abort("Timeout")}),u);fetch(n,{signal:r.signal}).then((function(t){return clearTimeout(i),t&&200===t.status?t.json():{}})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}catch(t){e(t)}}))]}))}))).then((function(n){n&&void 0!==n.type?(0===n.type?(t.priority=-1,t.gpvDemand.priority=-1,t.publishersAdType=r.HOUSE):1===n.type?(t.priority=0,t.gpvDemand.priority=0,t.publishersAdType=r.REGULAR):2===n.type?(t.priority=1e3,t.gpvDemand.priority=1e3,t.publishersAdType=r.DIRECT):3===n.type&&(t.priority=1e3,t.gpvDemand.priority=1e3,t.publishersAdType=r.SPONSORED),i.a.remote("".concat("[creative-info]"," Fetched"),c(t,{networkId:d,creativeId:l,type:n.type}))):(t.priority=0,t.gpvDemand.priority=0,t.publishersAdType=r.UNDEFINED),e()})).catch((function(n){i.a.error("".concat("[creative-info]"," Fetch error"),n,c(t,{creativeId:l,networkId:d})),e()}))}))}},function(t,e,n){"use strict";var r,i,o;n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return E})),function(t){t.ERROR="error",t.LOADED="loaded"}(i||(i={})),function(t){t.SIGNAL_STATUS="signalStatus",t.CMP_STATUS="cmpStatus",t.SECTION_CHANGE="sectionChange",t.LISTENER_REGISTERED="listenerRegistered",t.DISPLAY_STATUS="cmpDisplayStatus"}(o||(o={}));var a="CA",s="VA",c="CO",u="UT",d="CT",l="FL",p="MT",h="OR",f="TX",v="DE",m="IA",A="NE",y="NH",b="NJ",g="TN",E=[a,s,c,u,d,l,p,h,f,v,m,A,y,b,g];(r={EU_TCF_V2:"2:tcfeuv2",CANADIAN_TCF:"5:tcfcav1",US_PRIVACY_STRING:"6:uspv1",MSPA_US_NATIONAL:"7:usnat"})[a]="8:usca",r[s]="9:usva",r[c]="10:usco",r[u]="11:usut",r[d]="12:usct",r[l]="13:usfl",r[p]="14:usmt",r[h]="15:usor",r[f]="16:ustx",r[v]="17:usde",r[m]="18:usia",r[A]="19:usne",r[y]="20:usnh",r[b]="21:usnj",r[g]="22:ustn"},function(t,e,n){"use strict";n.d(e,"d",(function(){return A})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return T}));var r=n(65),i=n(81),o=n(72),a=n(36),s=function(t){var e=t.domain,n=t.customVars,r="8=".concat(e,"&10=").concat(n.IP,"&12=").concat(window.navigator.userAgent),i=encodeURI(r);return btoa(i)},c=n(24),u=n(92),d=n(29),l=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},p=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h={enabled:!1},f=function(t){return l(void 0,void 0,void 0,(function(){return p(this,(function(e){return[2,new Promise((function(e){t.que.push((function(){e(t.getUserIdsAsEids())}))}))]}))}))},v=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},A=function(t){return v(void 0,void 0,void 0,(function(){var e,n;return m(this,(function(i){switch(i.label){case 0:return e=g(t),[4,Promise.all(e.map((function(e){return Object(c.a)(e(t),1e3)})))];case 1:return n=i.sent(),t.eids=E(n,t),Object(r.d)(t),[2]}}))}))},y=function(t){return function(t){var e;if(!1===t.userIdentities)return[];var n=[{name:"lotamePanoramaId"},{name:"pubCommonId",storage:{name:"pubCommonId",type:"html5",expires:15}},{name:"sharedId",storage:{name:"_sharedID",type:"html5",expires:15}},{name:"identityLink",params:{pid:"13963",notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=343asog&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"id5Id",partnerId:1235,params:{partner:1235,pd:s(t),abTesting:{enabled:!0,controlGroupPct:0}},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:7200}}];return["US","CA"].includes(t.country)&&n.push({name:"33acrossId",params:{pid:"0015a00003EkOH8AAN"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}}),Object(i.c)(t)&&n.push(i.a),(null===(e=t.liveintentConfig)||void 0===e?void 0:e.enabled)&&(n.push(Object(o.a)(t.liveintentConfig)),t.eventDispatcher.send(a.b.MCD_LIVE_INTENT,{extraData:{liveintentConfig:t.liveintentConfig}})),n}(t)};var b=function(t){var e=t.players,n=t.prebid,r=t.isPBS,i=void 0!==r&&r;return v(void 0,void 0,void 0,(function(){var t,r,o;return m(this,(function(a){switch(a.label){case 0:return[4,Promise.all([Object(u.a)(null==e?void 0:e.excoUserIdentityConfig),(s=n,c=null==e?void 0:e.pubUserIdentityConfig,void 0===c&&(c=h),l(void 0,void 0,void 0,(function(){var t,e,n,r;return p(this,(function(i){switch(i.label){case 0:return c.enabled?(t=Object(d.b)(c.publisherPBJSGlobal))?[4,Promise.all([f(t),f(s)])]:[3,2]:[2,[]];case 1:return e=i.sent(),n=e[0],r=e[1],[2,n.filter((function(t){return t.uids.every((function(t){return t.id}))&&!r.find((function(e){return e.source===t.source}))}))];case 2:return[2,[]]}}))})))])];case 1:return t=a.sent(),r=t[0],o=t[1],i&&function(t,e){var n=_(t);e.que.push((function(){e.mergeConfig({userSync:{userIds:[{name:"pubProvidedId",params:{eids:n}}]}}),e.refreshUserIds({submoduleNames:["pubProvidedId"]})}))}(e,n),r&&n.que.push((function(){n.setConfig({user:{id:r}})})),o&&o.length&&!1!==e.userIdentities&&n.que.push((function(){n.mergeConfig({userSync:{userIds:[{name:"pubProvidedId",params:{eids:o}}]}}),n.refreshUserIds({submoduleNames:["pubProvidedId"]})})),[2]}var s,c}))}))},g=function(t){return!1===t.userIdentities?[]:[r.b]},E=function(t,e){if(t){var n=function(t,e){return t.find((function(t){return t&&t.provider===e}))||{provider:e,eids:[]}}(t,"iiq");return e.iiq&&(n.abTestGroup=e.iiq.actualGroup),{iiq:n}}},_=function(t){var e=t.prebidJS;return t&&e&&e.getUserIdsAsEids?e.getUserIdsAsEids():[]},T=function(t){var e=_(t),n=!1;return e&&e.length&&(n=e.some((function(t){return"liveintent.com"===t.source||t.uids&&t.uids.some((function(t){return t.ext&&"liveintent.com"===t.ext.provider}))}))),n}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o}));var r=function(t){return!0===t.info.mobile},i=function(t){return"Android"===t.info.os},o=function(t){return"iOS"===t.info.os}},function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return l}));var r=n(2),i=n(29),o=n(34),a=n(70),s=function(t){if(!(null==t?void 0:t.enabled))return!1;if(t.enabledByGlobal){var e=Object(i.b)(t.enabledByGlobal);if(null!==e)return Boolean(e)}return Object(o.a)((null==t?void 0:t.percentage)||0)},c=function(t){return"N/A"===(null==t?void 0:t.publisherId)},u=function(t){var e=t.publisherId,n=t.distributorId,o=t.emailHash,a=t.storageName,s=t.storageType,c=t.requestedAttributesOverrides,u=t.bidders,d=void 0===u?[]:u,l=r.b.customVars,p=void 0===l?{}:l;return{name:"liveIntentId",bidders:d,params:{publisherId:e,distributorId:n,emailHash:Object(i.b)(o),ipv4:p.IP,requestedAttributesOverrides:(c||[]).reduce((function(t,e){return t[e]=!0,t}),{})},storage:{type:s||"html5",name:a||"__tamLIResolveResult",expires:1}}},d=function(t,e){void 0===t&&(t={});var n=t.bidders;return(void 0===n?[]:n).includes(e)};function l(t){var e="";return e=t.liveintentConfig.active?"t1":"t0",e+=t.liveintentConfig.active&&Object(a.a)(t)?"-e1":"-e0"}},function(t,e,n){"use strict";var r=n(56);n.d(e,"e",(function(){return r.f})),n.d(e,"c",(function(){return r.d})),n.d(e,"a",(function(){return r.b})),n.d(e,"b",(function(){return r.c})),n.d(e,"d",(function(){return r.e}))},function(t,e,n){"use strict";var r=n(29);e.a={get:function(t){var e=null,n=Object(r.c)().document.cookie.match(new RegExp("".concat(t,"=([^;]+)")));return n&&n[1]&&(e=decodeURIComponent(n[1])),e},set:function(t,e,n,i){void 0===n&&(n=2592e3),void 0===i&&(i="");var o="".concat(t,"=").concat(e,"; max-age=").concat(n,"; SameSite=None; Secure;");i&&(o="".concat(o," path=").concat(i,";")),Object(r.c)().document.cookie=o},remove:function(t){Object(r.c)().document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c}));var r=n(3),i=function(){this.demandMaxAdStarts=null,this.initVpaidOnStart=!1,this.expectedSureFastStart=null,this.iframeSlot=!0,this.impressionOnlyWithVideoStart=!1,this.suggestedDuration=10,this.useIMA=null,this.isVidible=!1,this.vastPreferType=null,this.vpaidUseJSV=!0,this.moat=null,this.intent=!1},o=function(t,e,n,i){void 0===i&&(i=r.a),this.parser=t,this.parName=e,this.prio=n,this.filter=i},a={originalType:new o(r.j,"originalType"),adContent:new o((function(t){return t}),"adContent"),allowLongImpressions:new o(r.e,"ali",(function(t,e){return t&&e})),clickText:new o(r.j,"actext"),clickTextEnabled:new o(r.e,"actcall"),controlBar:new o(r.e,"co"),initVpaidOnStart:new o(r.e,"initVpaidOnStart"),demandMaxAdStarts:new o(r.i,"dmas",Math.min),enableAdUI:new o(r.e,"adui"),expectedSureFastStart:new o(r.e,"sff"),iframeSlot:new o(r.e,"ifsl"),impressionOnlyWithVideoStart:new o(r.e,"strictImp"),isVidible:new o(r.e,"vidible"),keepAlive:new o(r.i,"ka",Math.min),sandbox:new o(r.e,"sb"),suggestedDuration:new o(r.i,"sdur",Math.min),useIMA:new o(r.e,"IMA"),vastPreferType:new o(r.i,"vt"),viewableOnStart:new o(r.e,"vos"),vpaidUseJSV:new o(r.e,"vjsv"),moat:new o((function(t){return t}),"moat",(function(t,e){return Object(r.c)({},e,t)})),impDetail:new o(r.e,"impDetail"),reqLimit:new o(r.i,"reqLimit"),requireViewability:new o(r.e,"vb"),scho:new o((function(t){return t}),"scho")};function s(t,e,n){var i={};Object(r.f)((function(r,o){var a=[r.parser(n[r.parName]),t[o]].filter(r.filter);a.length>1&&r.prio?e[o]=r.prio(a[0],a[1]):a.length>0&&(e[o]=a[0]),i[o]=e[o]}),a)}function c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i={};Object(r.f)((function(n,r){var o=e.map((function(t){return n.parser(t[n.parName])})).filter(n.filter);o.length?t[r]=i[r]=o[0]:t[r]=void 0}),a)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u}));var r=n(1),i=n(6),o=null;function a(t){return s(t)?t.localStorage:null}function s(t){if(null!==o)return o;try{var e=null==t?void 0:t.localStorage;if(e){e.setItem("__storage_test__","test"),e.removeItem("__storage_test__"),o=!0}else o=!1}catch(t){o=!1}return o}function c(t,e,n){var o=(null==n?void 0:n.window)||window;if(null==n?void 0:n.ttl)return function(t,e,n){var o=(null==n?void 0:n.window)||window,s=(null==n?void 0:n.ttl)||0,c=a(o),u=Date.now()+s,d={value:e,expiration:u};if(c)try{c.setItem(t,JSON.stringify(d))}catch(t){return r.a.error("Failed to set item in local storage with TTL",t,{category:{main:i.a.MONETIZATION,sub:i.b.STORAGE}}),null}return null}(t,e,n);if(!s(o))return null;try{return o.localStorage.setItem(t,JSON.stringify(e)),null}catch(t){return r.a.error("Failed to set item in local storage",t,{category:{main:i.a.MONETIZATION,sub:i.b.STORAGE}}),null}}function u(t,e){var n=a((null==e?void 0:e.window)||window);if(n)try{var o=n.getItem(t)||null;if(null===o)return null;try{var s=JSON.parse(o);return function(t){void 0===t&&(t=null);return!!t&&"object"==typeof t&&"value"in t&&"expiration"in t&&"number"==typeof t.expiration}(s)?s.expiration>=Date.now()?s.value:(function(t,e){var n;null===(n=a((null==e?void 0:e.window)||window))||void 0===n||n.removeItem(t)}(t,e),null):s}catch(t){return o}}catch(t){return r.a.error("Failed to get item from local storage",t,{category:{main:i.a.MONETIZATION,sub:i.b.STORAGE}}),null}return null}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));var r=n(0),i=n(90),o=3;function a(t){return new Promise((function(e){var n=function(){var n=function(){(function(t){return!t.paused})(t)||t.play().then((function(){r.b.emit(r.a.PLAYER.AUTOPLAY_UNBLOCKED),document.body.removeEventListener("gesturechange",n),document.body.removeEventListener("touchstart",n),document.body.removeEventListener("touchmove",n),document.body.removeEventListener("touchend",n),document.body.removeEventListener("scroll",n),document.body.removeEventListener("click",n),e()}))},i=function(){r.b.emit(r.a.PLAYER.AUTOPLAY_BLOCKED),document.body.addEventListener("gesturechange",n,{passive:!0}),document.body.addEventListener("touchstart",n,{passive:!0}),document.body.addEventListener("touchmove",n,{passive:!0}),document.body.addEventListener("touchend",n,{passive:!0}),document.body.addEventListener("scroll",n,{passive:!0}),document.body.addEventListener("click",n,{passive:!0})},o=!function(t){return t.muted}(t);t.play().then((function(){return e()})).catch((function(){o?(r.b.emit(r.a.PLAYER.MUTED),t.play().then((function(){return e()})).catch((function(){i()}))):i()}))};!function(t){return t.readyState>=o}(t)?(t.preload="auto",t.addEventListener("canplay",(function(){return n()}),{once:!0})):n()}))}function s(){return new Promise((function(t){var e=Object(i.b)();document.body.appendChild(e),e.load(),a(e).then((function(){e&&e.pause(),e&&e.parentNode&&e.parentNode.removeChild(e),t()}))}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u}));var r=n(3),i=n(17),o=n(9),a=n(10);function s(t){var e=Object(r.i)(t.p);if(!e)return null;var n=new i.b;Object(r.c)(n,{playerId:e,isApp:Object(r.e)(t.app,!1),domain:Object(r.j)(t.d,""),cacheBuster:Object(r.j)(t.cb,""),networkId:Object(r.i)(t.ni)}),Object(r.c)(n,{divId:Object(r.j)(t.did,"video"+e+n.cacheBuster),sessionId:Object(r.j)(t.se,d()),width:Object(r.i)(t.w),height:Object(r.i)(t.h),subid:Object(r.j)(t.sid,""),htmlOnly:Object(r.e)(t.ho,n.isApp),isDebugVersion:!0,playerVersion:Object(r.j)(t.pv||t.playerVersion,"100.0"),playerUrl:Object(r.j)(t.playerUrl)});var s=Object(r.e)(t.ssl),c=Object(r.j)(t.mid),l=Object(r.j)(t.sd,c.split(".").slice(1).join("."));c=c.split(".")[0],Object(r.c)(n,{machineId:c,serverDomain:l,keepDetailedDebugLog:3==Object(r.i)(t.sl),logDebugToConsole:2==Object(r.i)(t.cnl),eventConsoleLog:Object(r.i)(t.cnl)>0,keepDebugLog:2==Object(r.i)(t.sdl),logVastResponse:Object(r.e)(t.lvr,!1),jsCallingVpaid:Object(r.j)(t.job),beingVpaidUseSlot:Object(r.e)(t.vslot),vpaidContent:Object(r.e)(t.vcontent),pageLoadUid:Object(r.j)(t.puid),country:Object(r.j)(t.geo),os:Object(r.j)(t.os),browser:Object(r.j)(t.browser),isAmp:Object(r.e)(t.isAmp),reportViewability:Object(r.e)(t.rv,!1),iabCategories:t.iab_categories,inStream:t.inStream,isInStream:Object(r.e)(t.isInStream)}),n.tagConfig=t,u(n,t);var p={},h={d:!0,sid:!0,did:!0,p:!0,cb:!0,playerVersion:!0,mid:!0,cnl:!0,sv:!0,ap:!0,sdl:!0,se:!0,w:!0,h:!0,lvr:!0,app:!0,jsv:!0,ob:!0,pv:!0},f={};for(var v in t)isNaN(v)&&!h[v]&&t.hasOwnProperty(v)&&(p[v]||(p[v]=t[v]));n.gpvExtraParams=p,n.customParams=Object.keys(f).length?f:null,n.logDebugToConsole=n.logDebugToConsole||n.keepDetailedDebugLog;var m=Object(o.g)();if(n.domain||(n.domain=m),n.domainDetected=Object(o.h)(m).substr(0,100),n.protocol=Object(o.i)(s),n.serverHost=function(t){return n.protocol+"//"+(t||n.machineId)+"."+n.serverDomain},n.conf.sUrl=n.serverHost("c"),n.conf.pJsvUrl=n.conf.sUrl+"/player/jsv_pure_2.js",n.conf.maxDomLoadTimes=60,n.conf.domLoadRetryTimeout=200,n.conf.domLoadInitTimeout=500,t.is){var A=Object(o.t)(n.protocol,t.is),y=(new Date).getTime().toString();A=A.replace(/\[CB\]/g,y),Object(a.l)(A)}return n}function c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0,o=e;i<o.length;i++){var a=o[i];if(t===a)return a}return Object(r.e)(t)}function u(t,e){Object(r.d)(r.a,t,{allowLongImpressions:Object(r.e)(e.ali),allowPausedImpressions:Object(r.e)(e.pausedImpressions),anvato:Object(r.e)(e.anvato),autoScheduleReset:Object(r.e)(e.asr),blackListName:Object(r.j)(e.bl),checkDomPresence:Object(r.e)(e.checkdom),checkDetectedSize:Object(r.e)(e.checkdetected),clickText:Object(r.j)(e.actext),clickTextEnabled:Object(r.e)(e.actcall),closeButton:Object(r.e)(e.scb),controlBar:Object(r.e)(e.co),controlBarMaybe:Object(r.e)(e.com),controlBarType:Object(r.j)(e.cotype),controlsTouch:Object(r.e)(e.cot),enableAdUI:Object(r.e)(e.adui),event2RateLow:Object(r.i)(e.erate_low),eventCookie:Object(r.j)(e.evck),eventServer:Object(r.j)(e.esrv),eventServer2:Object(r.j)(e.esrv2),iframe:Object(r.e)(e.iframe),mainAutoplay:c(e.ap,"ads"),maxAdStarts:Object(r.i)(e.mas),maxFailedVastRetries:Object(r.i)(e.mvr),maxTotalVastRetries:Object(r.i)(e.tvr),mediaPreview:Object(r.e)(e.mediaPreview),prerollTimeout:Object(r.i)(e.pretime),restTime:Object(r.i)(e.rest),requireSound:Object(r.e)(e.rs),secureIMA:Object(r.e)(e.secureima),showBrandMenu:Object(r.e)(e.showBrandMenu),showNextNavigation:Object(r.e)(e.showNextNavigation),sizeTolerance:Object(r.i)(e.sizeTol),videoPreload:Object(r.j)(e.vp),viewAutoplay:Object(r.i)(e.apv,0),vpaidInitLimit:Object(r.i)(e.vpl),flModel:e.fl,location:e.loc,isPriceFromMLModel:Object(r.e)(e.isPriceCalc)})}function d(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t,e){this.DELAY=2e3,this._element=null,this._timerId=null,this._visible=!1,this._onChange=function(){},this._element=t,this._threshold=(null==e?void 0:e.threshold)||0,(null==e?void 0:e.margin)&&(this._margin=null==e?void 0:e.margin)}return t.prototype.observe=function(t,e){var n=this;this._element=t,this._onChange=function(t){var r=n._getEntryState(t),i=r.state,o=r.entry;e({visible:"in"===i,entry:o,observer:n})},this._observer=new IntersectionObserver(this._onChange,{threshold:this._threshold,rootMargin:this._margin}),this._observer.observe(this._element)},t.prototype.disconnect=function(){this._observer.disconnect()},t.prototype._isIntersecting=function(t){return Array.isArray(this._threshold)?this._threshold.some((function(e){return t>e})):t>this._threshold},t.prototype._getEntryState=function(t){var e=[t.find((function(t){return t.isIntersecting})),t.find((function(t){return!t.isIntersecting}))],n=e[0]||e[1],r="";return n&&(r=this._isIntersecting(n.intersectionRatio)?"in":"out"),{entry:n,state:r}},t.prototype.on=function(t){var e=this;this._onChange=function(n){n.filter((function(t){return t.target==e._element})).forEach((function(t){return e._lastRatio=t.intersectionRatio}));var r=e._isIntersecting(e._lastRatio);!e._timerId||null!==e._visible&&e._visible!==r||(clearTimeout(e._timerId),e._timerId=null),e._visible!==r&&(e._timerId=setTimeout((function(){t(r?"viewable":"notviewable"),e._visible=r,e._timerId=null}),e.DELAY))},this._observer=new IntersectionObserver(this._onChange,{threshold:this._threshold}),this._observer.observe(this._element)},t.prototype.off=function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=null),this._observer.unobserve(this._element)},t.isAvailable=function(t){return!!t.IntersectionObserver},t}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(11);function i(t){return Object.keys(t).reduce((function(e,n){return e[n.toUpperCase()]=t[n],e}),{})}function o(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!r.a.object(t)||!r.a.object(e))return t;var n=Object.keys(t),i=Object.keys(e);return n.forEach((function(n){i.includes(n)||(e[n]=t[n])})),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));var r={name:"hadronId",params:{partnerId:887},storage:{name:"hadronId",type:"html5",expires:14}},i={name:"hadron",waitForIt:!0,params:{segmentCache:!0,partnerId:887}},o=function(t){var e,n,r=function(t){var e,n;return(null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.adsConfig)||void 0===n?void 0:n.hadronIdConfig)||{enabled:!1,countries:[]}}(t),i=null!==(e=r.enabled)&&void 0!==e&&e,o=null!==(n=r.countries)&&void 0!==n?n:[];return i&&o.includes(t.country)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return h}));var r,i=n(24),o=n(1),a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},s=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=(null===(r=window.__EXCO)||void 0===r?void 0:r.EXBSDK_NAMESPACE)||"exbd",u=window[c];function d(t,e){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var n,r,c=this;return s(this,(function(d){return n=(e||{}).timeout,r=void 0===n?1e3:n,[2,new Promise((function(e){if(!u||!u.inited||!v(t))return e(null);u.q.push((function(){return a(c,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,Object(i.a)(u.getAdServerResponseSync(),r)];case 1:return(t=n.sent())&&m(t),o.a.info("BidBird server response result: ".concat(t?"received":"timedout"),t),e(t||null),[2]}}))}))}))}))]}))}))}function l(t,e){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var n,r,c=this;return s(this,(function(d){return n=(e||{}).timeout,r=void 0===n?1e3:n,[2,new Promise((function(e){if(!u||!u.inited||!v(t))return e(null);u.q.push((function(){return a(c,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,Object(i.a)(u.getCachedBidsSync(),r)];case 1:return(t=n.sent())||(t=u.getCachedBids()),t&&m(t),o.a.info("BidBird cache result: ".concat(t?"received":"timedout"),t),e(t||null),[2]}}))}))}))}))]}))}))}function p(t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){return u&&u.inited&&v(t)?[2,new Promise((function(t){u.q.push((function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,u.getCachedBidsSync()];case 1:return(e=n.sent())&&m(e),o.a.info("BidBird cache sync result: ".concat(e?"received":"not found"),e),t(e||null),[2]}}))}))}))}))]:[2,null]}))}))}function h(t){if(!t||!t.demand_list||!t.bids||0===t.bids.length)return[];var e=[],n=t.bids||[];return t.demand_list.forEach((function(t){t.bidbird&&n.forEach((function(n){n.adUnitCode&&n.adUnitCode.includes(t.id)&&(t.cachedBids=[n],e.push(t)),t.tam&&t.tam.slotId&&n.slotID&&t.tam.slotId===n.slotID&&(t.cachedBids=[n],e.push(t))}))})),e}function f(t){return void 0===t&&(t={}),t.gpid||null}function v(t){if(void 0===t&&(t={}),u.getExtraParams){var e=t.customMacros,n=f(void 0===e?{}:e),r=f(u.getExtraParams());if(n&&r&&n!==r)return!1}return!0}function m(t){return void 0===t&&(t=null),t&&t.supply_params&&(t.supply_params.bb=!0),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r,i=n(46);!function(t){t.AD_STARTED="ad.started",t.AD_PLAYING="ad.playing",t.AD_PROGRESS="ad.progress",t.AD_COMPLETE="ad.completed",t.AD_SKIPPED="ad.skipped",t.AD_ERROR="ad.error",t.SLOT_START="player.slot-start",t.SLOT_END="player.slot-end",t.CONTENT_COMPLETED="content.completed",t.CONTENT_START="content.start",t.CONTENT_ERROR="content.error",t.CONTENT_STARTED="content.started",t.CONTENT_RESUMED="content.resumed",t.CONTENT_SKIPPED="content.skipped",t.PLAYER_IN_VIEW="player.in-view",t.PLAYER_OUT_OF_VIEW="player.out-of-view",t.PLAYER_FIRST_VIEW="player.first-view"}(r||(r={}));var o=new i.EventEmitter2},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={AD:{ANY:"ad.*",INIT:"ad.init",STARTED:"ad.started",PLAYING:"ad.playing",TIME_UPDATE:"ad.time-update",IMPRESSION:"ad.impression",PROGRESS:"ad.progress",FIRST_QUARTILE:"ad.first-quartile",MIDPOINT:"ad.midpoint",THIRD_QUARTILE:"ad.third-quartile",COMPLETED:"ad.completed",CLICKED:"ad.clicked",SKIPPED:"ad.skipped",VIDEO_CLICKED:"ad.video-clicked",ERROR:"ad.error",PLAYBACK_ERROR:"ad.playback-error",VIEWABILITY:"ad.viewability",XML_PARSED:"ad.xml-parsed",PAUSE:"ad.pause",PLAY:"ad.play",MUTED:"ad.muted",UNMUTED:"ad.unmuted",SLOT_AUCTION_END:"ad.slot-auction-end"},CONTENT:{ANY:"content.*",START:"content.start",PAUSE:"content.pause",RESUMED:"content.resumed",SKIPPED:"content.skipped",COMPLETED:"content.completed",CHANGED_BY_INDEX:"content.changed-by-index",CC_TRACK_ADDED:"content.cc-track-added"},PLAYLIST:{COMPLETED:"playlist.completed"},PLAYER:{ANY:"player.*",READY:"player.ready",INIT:"player.init",LOAD:"player.load",MUTED:"player.muted",UNMUTED:"player.unmuted",PLAYING:"player.playing",PAUSED:"player.paused",CLOSED:"player.closed",SLOT_START:"player.slot-start",SLOT_END:"player.slot-end",IN_VIEW:"player.in-view",OUT_OF_VIEW:"player.out-of-view",FIRST_VIEW:"player.first-view",CTA_CLICKED:"player.cta-clicked",AUTOPLAY_BLOCKED:"player.autoplay-blocked",AUTOPLAY_UNBLOCKED:"player.autoplay-unblocked",ACTION:{HIDE:"player.action.hide",SHOW:"player.action.show",CLOSE:"player.action.close",PAUSE:"player.action.pause",PLAY:"player.action.play"},RESIZE:"player.resize"},STICKY:{CLOSED:"sticky.closed",OPENED:"sticky.opened",ACTION:{CLOSE:"sticky.action.close",HIDE:"sticky.action.hide"}},PLUGIN:{ANY:"plugin.*",EVENT:"plugin.event",ENABLED:"plugin.enabled",AUCTION:"plugin.auction",ACTION:{AUCTION:"plugin.action.auction"}},STATE:{UPDATE:"state.update"}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return f}));var r,i,o=n(57),a=n(25),s=n(62),c=n(54),u=n(1),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){t.parent.postMessage({sentinel:"amp",type:s.a.REQUEST_CONSENT},"*")},p=function(t,e){t.addEventListener("message",(function(n){(function(t,e){return!!e&&!!e.data&&"amp"===e.data.sentinel&&e.data.type===s.a.CONSENT_DATA&&e.source===t.parent&&e.origin!==t.location.origin})(t,n)&&e(n.data)}))},h=function(t){function e(e,n){var r=t.call(this,a.a.AMP,n)||this;return r._window=e,r}return d(e,t),e.prototype.listen=function(){this.startListening(),l(this._window)},e.prototype.startListening=function(){var t,e;t=this._window,e=this.onConsentEvent.bind(this),p(t,(function(t){Object(c.b)(t)?e(t):u.a.remote("Consent (amp-iframe): was not able to detect consent string type",{consentData:t})}))},e.prototype.onConsentEvent=function(t){this.setUpdatedConsentData({consentString:t.consentString,apiResponseData:Object(c.c)(t),consentType:Object(c.d)(t)})},e}(o.a),f=function(t,e){return i||(i=new h(t,e)),i}},function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return d}));var r,i=n(15),o=n(10),a=n(0),s=n(1),c=function(t){r||(s.a.info("IMA Provider created"),r=new l(t))},u=function(){r&&(s.a.info("IMA Provider destroyed"),r.destroy(),r=null)},d=function(){return r},l=function(){function t(t){this.players=t,this._on={},this.vastId="static_ima",this.uniqId=0,this.loaded=Promise.all([Object(i.e)(t,this),this.loadSDK()])}return Object.defineProperty(t.prototype,"displayContainer",{get:function(){return this._adDisplayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.adContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loader",{get:function(){return this._adsLoader},enumerable:!1,configurable:!0}),t.prototype.createAdContainer=function(){return this._adDisplayContainer||(this._imaAdSlot||(this._imaAdSlot=document.createElement("div"),this._imaAdSlot.className="__exco_ad_ima_slot",this.adContainer.appendChild(this._imaAdSlot)),this._adDisplayContainer=new google.ima.AdDisplayContainer(this._imaAdSlot),this._adDisplayContainer.initialize()),this._adDisplayContainer},t.prototype.createLoader=function(){return this._adsLoader||(this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.getSettings().setAutoPlayAdBreaks(!1),this._adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.players.secureIMA||this._adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){a.b.emit(a.a.INTERNAL.GOOGLE_IMA.ADS_MANAGER_LOADED,t)})),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){a.b.emit(a.a.INTERNAL.GOOGLE_IMA.AD_ERROR,t)}))),this._adsLoader},t.prototype.loadSDK=function(){return"undefined"==typeof google||void 0===google.ima?new Promise((function(t){return Object(o.m)("google-ima-script-new",(function(){return"//imasdk.googleapis.com/js/sdkloader/ima3.js"}),(function(){return t()}),!0)})):new Promise((function(t){return t()}))},t.prototype.on=function(t,e,n){this._on["".concat(t,"_").concat(e)]=n,this._sub(t,e,this._adsLoader)},t.prototype.off=function(t,e){this._unsub(t,e,this._adsLoader)},t.prototype._sub=function(t,e,n){n&&n.addEventListener(e,this._on["".concat(t,"_").concat(e)])},t.prototype._unsub=function(t,e,n){n&&n.removeEventListener(e,this._on["".concat(t,"_").concat(e)])},t.prototype.destroy=function(){this._adsLoader&&(this._adsLoader.destroy(),this._adsLoader=null),this._adDisplayContainer&&(this._adDisplayContainer.destroy(),this._adDisplayContainer=null),this.adContainer&&(this.adContainer.innerHTML="",this.adContainer=null),this._imaAdSlot=null,this._on={}},t}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return h}));var r,i,o=n(57),a=n(66),s=n(25),c=n(54),u=n(1),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e){t.on(a.a.USER.AMP_VIDEO_CONSENT,(function(t){e(t)}))},p=function(t){function e(e,n){var r=t.call(this,s.a.AMP_VIDEO,n)||this;return r.ngEvents=e,r}return d(e,t),e.prototype.listen=function(){this.startListening()},e.prototype.startListening=function(){var t,e;t=this.ngEvents,e=this.onConsentEvent.bind(this),l(t,(function(t){Object(c.b)(t)?e(t):u.a.remote("Consent (amp-video-iframe): was not able to detect consent string type",{consentData:t})}))},e.prototype.onConsentEvent=function(t){this.setUpdatedConsentData({consentString:Object(c.a)(t),apiResponseData:Object(c.c)(t),consentType:Object(c.d)(t)})},e}(o.a),h=function(t,e){return i||(i=new p(t,e)),i}},function(t,e,n){"use strict";var r,i;function o(t){var e=new URL(t.adServerURL);e.searchParams.set(r.APP_BUNDLE,t.appParams.bundle),e.searchParams.set(r.APP_NAME,t.appParams.name),t.appParams.category&&e.searchParams.set(r.APP_CATEGORY,t.appParams.category),t.appParams.storeId&&e.searchParams.set(r.APP_STORE_ID,t.appParams.storeId),t.appParams.storeUrl&&e.searchParams.set(r.APP_STORE_URL,t.appParams.storeUrl),t.appParams.version&&e.searchParams.set(r.APP_VERSION,t.appParams.version),t.appParams.deviceId&&e.searchParams.set(r.DEVICE_ID,t.appParams.deviceId),t.appParams.ifa&&e.searchParams.set(r.IFA,t.appParams.ifa),t.appParams.domain&&e.searchParams.set(r.DOMAIN,t.appParams.domain),t.adServerURL=e.toString()}function a(t,e){var n,r,i,o,a,s,c,u;return(null===(n=e.appParams)||void 0===n?void 0:n.name)&&(t=t.replace(/\[APP_NAME]/g,encodeURIComponent(e.appParams.name))),(null===(r=e.appParams)||void 0===r?void 0:r.bundle)&&(t=t.replace(/\[APP_BUNDLE]/g,encodeURIComponent(e.appParams.bundle))),e.isNetwork&&((null===(i=e.appParams)||void 0===i?void 0:i.category)&&(t=t.replace(/\[APP_CATEGORY]/g,encodeURIComponent(e.appParams.category))),(null===(o=e.appParams)||void 0===o?void 0:o.storeId)&&(t=t.replace(/\[APP_STORE_ID]/g,encodeURIComponent(e.appParams.storeId))),(null===(a=e.appParams)||void 0===a?void 0:a.storeUrl)&&(t=t.replace(/\[APP_STORE_URL]/g,encodeURIComponent(e.appParams.storeUrl))),(null===(s=e.appParams)||void 0===s?void 0:s.version)&&(t=t.replace(/\[APP_VER]/g,encodeURIComponent(e.appParams.version))),(null===(c=e.appParams)||void 0===c?void 0:c.deviceId)&&(t=t.replace(/\[DEVICEID]/g,encodeURIComponent(e.appParams.deviceId))),(null===(u=e.appParams)||void 0===u?void 0:u.ifa)&&(t=t.replace(/\[IFA]/g,encodeURIComponent(e.appParams.ifa)))),t}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),function(t){t.APP_ID="appid",t.APP_BUNDLE="appb",t.APP_CATEGORY="appc",t.APP_NAME="appn",t.APP_STORE_ID="appsi",t.APP_STORE_URL="appsu",t.APP_VERSION="appv",t.DEVICE_ID="deviceid",t.IFA="ifa",t.DOMAIN="d"}(r||(r={})),function(t){t.APP_NAME="an",t.APP_BUNDLE="msid"}(i||(i={}))},function(t,e,n){"use strict";var r;function i(t){var e=new URL(t.adServerURL);t.networkParams.cb&&e.searchParams.set(r.CACHE_BUSTER,t.networkParams.cb),t.networkParams.country&&e.searchParams.set(r.COUNTRY,t.networkParams.country),t.networkParams.location&&e.searchParams.set(r.LOCATION,t.networkParams.location),t.networkParams.latitude&&e.searchParams.set(r.LATITUDE,t.networkParams.latitude),t.networkParams.longitude&&e.searchParams.set(r.LONGITUDE,t.networkParams.longitude),t.networkParams.gdpr&&e.searchParams.set(r.GDPR,t.networkParams.gdpr),t.networkParams.gdprConsent&&e.searchParams.set(r.GDPR_CONSENT,t.networkParams.gdprConsent),t.networkParams.usPrivacy&&e.searchParams.set(r.US_PRIVACY,t.networkParams.usPrivacy),e.searchParams.set(r.SCHAIN,t.networkParams.schain||""),t.networkParams.custom1&&e.searchParams.set(r.CUSTOM1,t.networkParams.custom1),t.networkParams.custom2&&e.searchParams.set(r.CUSTOM2,t.networkParams.custom2),t.networkParams.custom3&&e.searchParams.set(r.CUSTOM3,t.networkParams.custom3),t.networkParams.custom4&&e.searchParams.set(r.CUSTOM4,t.networkParams.custom4),t.networkParams.custom5&&e.searchParams.set(r.CUSTOM5,t.networkParams.custom5),t.networkParams.custom6&&e.searchParams.set(r.CUSTOM6,t.networkParams.custom6),t.networkParams.subId&&e.searchParams.set(r.SUB_ID,t.networkParams.subId),t.networkParams.width&&e.searchParams.set(r.WIDTH,t.networkParams.width),t.networkParams.height&&e.searchParams.set(r.HEIGHT,t.networkParams.height),t.adServerURL=e.toString()}function o(t,e){return(null==e?void 0:e.country)&&(t=t.replace(/\[COUNTRY_ID]/g,encodeURIComponent(e.country))),(null==e?void 0:e.location)&&(t=t.replace(/\[LOCATION]/g,encodeURIComponent(e.location))),(null==e?void 0:e.latitude)&&(t=t.replace(/\[LOCATION_LAT]/g,encodeURIComponent(e.latitude))),(null==e?void 0:e.longitude)&&(t=t.replace(/\[LOCATION_LONG]/g,encodeURIComponent(e.longitude))),(null==e?void 0:e.gdprConsent)&&(t=t.replace(/\[GDPR_CONSENT]/g,encodeURIComponent(e.gdprConsent))),(null==e?void 0:e.gdpr)&&(t=t.replace(/\[GDPR]/g,encodeURIComponent(e.gdpr))),(null==e?void 0:e.usPrivacy)&&(t=t.replace(/\[US_PRIVACY]/g,encodeURIComponent(e.usPrivacy))),(null==e?void 0:e.schain)&&(t=t.replace(/\[SCHAIN]/g,encodeURIComponent(e.schain))),(null==e?void 0:e.custom1)&&(t=t.replace(/\[CUSTOM1]/g,encodeURIComponent(e.custom1))),(null==e?void 0:e.custom2)&&(t=t.replace(/\[CUSTOM2]/g,encodeURIComponent(e.custom2))),(null==e?void 0:e.custom3)&&(t=t.replace(/\[CUSTOM3]/g,encodeURIComponent(e.custom3))),(null==e?void 0:e.custom4)&&(t=t.replace(/\[CUSTOM4]/g,encodeURIComponent(e.custom4))),(null==e?void 0:e.custom5)&&(t=t.replace(/\[CUSTOM5]/g,encodeURIComponent(e.custom5))),(null==e?void 0:e.custom6)&&(t=t.replace(/\[CUSTOM6]/g,encodeURIComponent(e.custom6))),(null==e?void 0:e.subId)&&(t=t.replace(/\[(SUBID|SUB_ID)]/g,encodeURIComponent(e.subId))),(null==e?void 0:e.width)&&(t=t.replace(/\[(WIDTH|CONTAINER_WIDTH)]/g,encodeURIComponent(e.width))),(null==e?void 0:e.height)&&(t=t.replace(/\[(HEIGHT|CONTAINER_HEIGHT)]/g,encodeURIComponent(e.height))),t}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),function(t){t.CACHE_BUSTER="cb",t.COUNTRY="country",t.LOCATION="loc",t.LATITUDE="loclat",t.LONGITUDE="loclong",t.GDPR="gdpr",t.GDPR_CONSENT="gdpr_consent",t.US_PRIVACY="us_privacy",t.SCHAIN="schain",t.CUSTOM1="c1",t.CUSTOM2="c2",t.CUSTOM3="c3",t.CUSTOM4="c4",t.CUSTOM5="c5",t.CUSTOM6="c6",t.SUB_ID="sid",t.WIDTH="w",t.HEIGHT="h"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",i=function(t){void 0===t&&(t=!0);var e=document.createElement("video");return e.src=r,e.muted=t,e.playsInline=!0,e.style.display="none",e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r,i,o=n(0);!function(t){t.PLAYING="playing",t.PAUSED="paused",t.STOPPED="stopped",t.RUNNING="running",t.FETCHING="fetching",t.ENDED="ended"}(r||(r={})),function(t){t.CONTENT="content",t.AUCTION="auction",t.SLOT="slot",t.ADS="ads"}(i||(i={}));var a=function(){function t(){this._listen()}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"auction",{get:function(){return this._auction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slot",{get:function(){return this._slot},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ads",{get:function(){return this._ads},enumerable:!1,configurable:!0}),t.prototype.onChange=function(t){o.b.on(o.a.STATE.UPDATE,(function(e){return t(e)}))},t.prototype.set=function(t){var e=this;void 0===t&&(t={}),Object.entries(t).forEach((function(t){var n=t[0],r=t[1];e._updateState(n,r)}))},t.prototype._updateState=function(t,e){if(t in this){var n=this["_".concat(t)],r=e;n!==r&&(this["_".concat(t)]=r,o.b.emit(o.a.STATE.UPDATE,{type:t,next:r,prev:n}))}},t.prototype._listen=function(){var t=this;o.b.on(o.a.AD.COMPLETED,(function(){return t._updateState(i.ADS,r.STOPPED)})),o.b.on(o.a.AD.STARTED,(function(){return t._updateState(i.ADS,r.PLAYING)})),o.b.on(o.a.AD.PLAY,(function(){return t._updateState(i.ADS,r.PLAYING)})),o.b.on(o.a.AD.PAUSE,(function(){return t._updateState(i.ADS,r.PAUSED)})),o.b.on(o.a.INTERNAL.CONTENT.STARTED,(function(){return t._updateState(i.CONTENT,r.PLAYING)})),o.b.on(o.a.INTERNAL.CONTENT.PLAYING,(function(){return t._updateState(i.CONTENT,r.PLAYING)})),o.b.on(o.a.INTERNAL.CONTENT.PAUSED,(function(){return t._updateState(i.CONTENT,r.PAUSED)})),o.b.on(o.a.INTERNAL.CONTENT.ENDED,(function(){return t._updateState(i.CONTENT,r.ENDED)})),o.b.on(o.a.INTERNAL.AD.SLOT_START,(function(){return t._updateState(i.SLOT,r.RUNNING)})),o.b.on(o.a.INTERNAL.AD.SLOT_END,(function(){return t._updateState(i.SLOT,r.STOPPED)})),o.b.on(o.a.INTERNAL.AUCTION.START,(function(){return t._updateState(i.AUCTION,r.RUNNING)})),o.b.on(o.a.INTERNAL.AUCTION.END,(function(){return t._updateState(i.AUCTION,r.ENDED)})),o.b.on(o.a.INTERNAL.AUCTION.STOP,(function(){return t._updateState(i.AUCTION,r.STOPPED)}))},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(29),i=n(64),o={enabled:!1},a=null,s=function(t){return void 0===t&&(t=o),a||(t.enabled?t.ppidEnabled&&t.ppidSource&&(a=Object(r.b)(t.ppidSource))?("upper"===t.ppidModify?a=a.toUpperCase():"lower"===t.ppidModify&&(a=a.toLowerCase()),a):a=Object(i.b)().excoCookie:a)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(12),i=n(13),o=n(8),a=n(22),s=n(53),c=n(4),u=n(0),d=n(15),l=n(14),p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t,e,n,h){return Object(a.c)("playPlayer",{players:t,playerData:e,log:!0},(function(){if(!(null==e?void 0:e.allowedDueToSound(n)))return!1;var a;!function(t,e){if(!e.durationKnown)if("jsvpaid"==e.adType)e.duration=e.suggestedDuration;else if("video"==e.adType){e.durationKnown=!0;try{e.duration=e.videoElement.duration}catch(t){}}}(0,e),e.gotAdImpression=!1,e.adStartCount=0,e.startAdTime=Date.now(),e.state=c.a.Started;try{t.serverEvents.demandEvent(e,p({name:"startAd"},h));var f=Object(s.b)(t);f&&t.width!==f.width&&t.height!==f.height&&Object(o.e)(t,"normal"),t.eventDispatcher.sendStartAdEvent(e,t),u.b.emit(u.a.AD.STARTED,Object(d.c)(e)),u.b.emit(u.a.AD.PLAY,p({interaction:n},Object(d.c)(e))),a=e.startAd()}catch(t){a=t.message}return a&&(Object(i.h)(t,e.vastId,42,a,null,e,!1),Object(r.b)(t,e,17,{code:42,iabError:l.b.UNDEFINED_ERROR,message:a})),!a}),(function(){return!1}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var r=n(46),i=n(30),o=n(3),a=n(10),s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=[/^Intent/,/^Custom/],u=function(){function t(t,e){var n,o=this;this.players=t,this.postData=e,this.EventDeferTime=((n={}).AdImpression=50,n.SupplyStarted=500,n.VastFetched=500,n.startAd=500,n.default=2500,n),this.EventSendRate={default:1},this.LowPriorityEvents=["VastFetched","VastError","VastFetchError","AdError","AdLoadError","AdImpressionError","startVastPrefetch","VastPrefetchError","requestAds","AdsRequestError"],this.DryRun=!1,this.serverEventUrl="https://e.channelexco.com/events",this.serverEventRoute="/events",this.firstEvent=!0,this.supplyEvents=[],this.customSupplyEvents=[],this.demandEvents=[],this.emitter=new r.EventEmitter2({wildcard:!0,maxListeners:5}),this.scheduledTimer=new i.a,null!=t.event2RateLow&&this.LowPriorityEvents.forEach((function(e){return o.EventSendRate[e]=t.event2RateLow/100}))}return t.prototype.isDryRun=function(t){var e=Object(o.h)(this.EventSendRate[t],this.EventSendRate.default);return this.DryRun||Math.random()>e},t.prototype.isExternalEvent=function(t){for(var e=0,n=c;e<n.length;e++){var r=n[e];if(t.match(r))return!0}},t.prototype.supplyEvent=function(t,e){var n=this.isDryRun(t.name);this.extractSupplyParams();var r=this.stamp(t,e);n||this.supplyEvents.push(r),this.postEvent(t.name,n,r)},t.prototype.demandEvent=function(t,e){try{this._demandEvent(t,e)}catch(t){}},t.prototype.demandTimedEvent=function(t,e){this._demandEvent(t,e,t.flowTimeout)},t.prototype._demandEvent=function(t,e,n){var r=this.isDryRun(e.name);this.extractSupplyParams();var i=Object(a.a)(this.demandEvents,(function(e){return e.playerData==t}));i||(i={playerData:t,demandData:d(t),events:[]},r||this.demandEvents.push(i));var o=this.stamp(e,n);r||i.events.push(o),this.postEvent(e.name,r,o,i.demandData)},t.prototype.stamp=function(t,e){var n=Object(o.i)(this.EventSendRate[t.name]);return Object(o.c)({},t,{ts:this.fromStartNow()},null!=n&&n<1&&{rate:n},e&&{elapsed:this.toSeconds(e.elapsed)})},t.prototype.toSeconds=function(t){return parseFloat((t/1e3).toFixed(2))},t.prototype.fromStartNow=function(){return parseFloat(((Date.now()-this.players.startTime)/1e3).toFixed(2))},t.prototype.extractSupplyParams=function(){this.supplyData?this.supplyData.domain=this.players.domain:this.supplyData=function(t){var e=function(t){return+t.toFixed(1)},n={supplyId:t.playerId,subid:t.subid,domain:t.domain,sessionId:t.sessionId,detect:t.detect,cookieJson:t.supplyCookieJson,gpvCookie:t.gpvCookie,detectedDomain:l(t.domainDetected),width:t.width,height:t.height,detectedWidth:null!=t.widthDetected?e(t.widthDetected):null,detectedHeight:null!=t.heightDetected?e(t.heightDetected):null,startTime:Math.floor(t.startTime/1e3)};if(t.isApp)return s(s({},n),t.appParams);return n}(this.players)},t.prototype.postEvent=function(t,e,n,r){var i=this;try{this.emitter.emit(t,n,e,this.supplyData,r)}catch(t){}if(!e){var a=function(){i.sendStoredEvent()};this.firstEvent&&(this.firstEvent=!1,window.addEventListener("pagehide",a,!1),window.addEventListener("visibilitychange",a,!1));var s=Object(o.h)(this.EventDeferTime[t],this.EventDeferTime.default);null!=this.scheduledTime&&Date.now()+s>this.scheduledTime||(this.scheduledTime=Date.now()+s,this.scheduledTimer.reset(s).start().then((function(){i.scheduledTime=null,i.sendStoredEvent()})).catch((function(){})))}},t.prototype.sendStoredEvent=function(){var t={supply:{},demand:[]};if(![this.supplyEvents,this.customSupplyEvents,this.demandEvents].every((function(t){return 0==t.length}))){if(Object(o.d)(o.a,t.supply,this.supplyData),this.supplyEvents.length&&(t.supply.e=this.supplyEvents),this.customSupplyEvents.length&&(t.supply.c=this.customSupplyEvents),this.demandEvents.forEach((function(e){var n={e:[]};Object(o.d)(o.a,n,e.demandData),n.e=e.events,t.demand.push(n)})),t.demand.length||delete t.demand,this.serverEventUrl){var e=JSON.stringify(t,null,2);this.postData(this.serverEventUrl,e)}this.demandEvents=[],this.supplyEvents=[],this.customSupplyEvents=[]}},t}();function d(t){return{uniqId:t.uniqId,vastId:t.vastId,demandId:t.demandId,adType:t.adType,rotationNo:t.rotationNo,gpvNo:t.uniqId,group:t.group,cookie:t.cookie,cookieJson:t.cookieJson}}function l(t){return"string"==typeof t&&(t.match(/^data:/)&&(t=t.split(";")[0]),t.length>256&&(t.match(/^[\/|http:]/)&&(t=t.split("?")[0]),t=t.slice(0,256))),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return C}));var r=n(3),i=n(78),o=n(28),a=n(12),s=n(15),c=n(38),u=function(t,e){this.duplicate=10,this.requestAds=60,this.prefetchVast=86400,this.fetchVast=86400,this.prebidReauction=3,this.loadAd=60,this.impressionAfterStart=3,this.longImpression=70,this.startMore=3,this.startAdParallel=70,this.startAdNonParallel=20,this.startAd=20,this.auction=9,this.waitHigherGroup=[5,12,12,0],t&&Object(r.c)(this,t),this.startAd=e?this.startAdParallel:this.startAdNonParallel,this.requestAds=this.prefetchVast=this.fetchVast=this.loadAd=this.startAd=this.auction,t&&Object(r.c)(this,t)},d=n(9),l=n(10),p=n(75),h=n(46),f=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};window.CEDATO_API=window.CEDATO_API||{registerPlayer:function(t,e){m[t]=m[t]||new v,m[t]._ready=!0;var n=function(t){var e=window.CEDATO_INIT;if(e){if("function"==typeof e)return e;if("object"==typeof e)for(var n=0,r=t;n<r.length;n++){var i=r[n];if("function"==typeof e[i])return e[i]}}return null}(f([t],e||[],!0));n&&(m[t].init=n);return setTimeout((function(){m[t].trigger("ready")}),0),m[t]},getPlayer:function(t){void 0===m[t]&&(m[t]=new v);return m[t]}};var v=function(){function t(){this._ready=!1,this.eventEmitter=new h.EventEmitter2({wildcard:!0,maxListeners:20}),this.triggeredWithoutListeners=[]}return t.prototype.on=function(t,e){var n=this,r=t.toLowerCase();if("ready"!==r||!this._ready)return this.eventEmitter.on(r,e),this;setTimeout((function(){return e({name:"ready",player:n})}),0)},t.prototype.off=function(t,e){var n=t.toLowerCase();return e?this.eventEmitter.off(n,e):this.eventEmitter.removeAllListeners(n),this},t.prototype.trigger=function(t,e){var n=t.toLowerCase();return this.eventEmitter.emit(n,{name:n,player:this,data:null==e?{}:e}),this},t.prototype.removeAllListeners=function(){this.eventEmitter.removeAllListeners()},t}(),m={};var A=n(23),y=n(36),b=n(7),g=n(5),E=n(73),_=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},T=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function I(t){switch(typeof t){case"boolean":return{muted:!t};case"number":if(t>=0&&t<=1)return{volume:t};break;case"string":if("on"===t||"off"===t)return{muted:"on"===t}}return null}function O(t,e){for(var n=[],r=0,i=b.b;r<i.length;r++){var o=i[r];o.demandId?o.demandId==e&&n.push(o):(o.vastId==e||o.cxvid&&o.cxvid==e)&&n.push(o)}t.anyPlaying=n.length>0||t.anyPlaying;for(var c=0,u=n;c<u.length;c++){var d=u[c];t.anyPlaying=t.anyPlaying&&Object(a.a)(t,d),Object(s.b)(t,d)}return n.length}function S(t,e){if(Object(i.c)(t,e),Object(i.c)(t,t.tagConfig),Object(p.c)(t,t.tagConfig,e),Object(r.d)(r.a,t,{moat:e.moat,customVars:e.cvars,gpvCookie:e.gpvck,supplyCookieJson:e.cookieJson,gpvUrl:e.gpvurl,networkId:Object(r.i)(e.ni),retryTestGroup:Object(r.i)(e.rtg),vastWaitFactor:Object(r.i)(e.vwf,1),gpvMethod:Object(r.i)(e.gpvm),areqMethod:Object(r.i)(e.areqm),multipleEventMethod:Object(r.i)(e.multim),reportViewability:Object(r.e)(e.rv,t.reportViewability),ivtBlock:Object(r.e)(e.ivtb),adServerError:Object(r.e)(e.adServerError),pt:e.pt}),t.timers=new u(e.timers,!1),Object(r.d)(r.b,t,{keepDebugLog:Object(r.e)(e.sdl),debugLogReason:Object(r.j)(e.sdlr),logVastResponse:Object(r.e)(e.lvr),submitDebugLogOnPlayerError:Object(r.e)(e.sdlpe),submitDebugLogOnVastError:Object(r.e)(e.sdlve),submitDebugLogForVastId:Object(r.i)(e.vd)}),e.rvu&&(t.urlReplacer=[],t.urlReplacer.vastId=e.rvu.v,t.urlReplacer.searchFor=e.rvu.s,t.urlReplacer.replaceWith=e.rvu.r),e.ho&&1==e.ho&&(t.htmlOnly=!0),e.grh&&Object(E.b)(t,e.grh),Object(E.a)(t,e.grh),!t.gpvConfLoaded){t.vastWaitFactor=t.vastWaitFactor/2,t.maxFailedVastRetries>1&&t.maxFailedVastRetries<50&&(t.maxFailedVastRetries=2*t.maxFailedVastRetries);for(var n,a,s={},c=function(e){var o=e.name,c=e.value;switch(o){case"monetize":t.monetize=c;break;case"autoplay":t.mainAutoplay=Object(i.a)(c,"ads");break;case"content":n=c;break;case"schedule":a=c;break;case"moat":t.moat=c;break;case"contentUrl":case"contentClickUrl":case"contentImage":case"contentImagePosition":case"contentExternal":s[o.substr(7)]=c;break;case"rotate":switch(c){case!0:c=null;break;case!1:c=1;break;default:c*=1}t.maxAdStarts=c;break;case"sound":var u=I(c);null!=u&&(t.volume=null!=u.volume?u.volume:u.muted?0:1,t.muted=null!=u.muted?u.muted:!u.volume);break;case"allowSound":"must"==c?(c=!0,t.info.mobile&&(t.mainAutoplay=!1)):"dynamic"==c&&(t.dynamicSound=!0,c=!1);case"closeButton":null!=c&&(t[o]=c);break;case"injectScript":!function(t,e){e=Object(l.f)(e);for(var n=0,r=e;n<r.length;n++){var i=r[n],o=Object(d.t)(t.protocol,i),a=(new Date).getTime().toString();o=o.replace(/\[CB\]/g,a).replace(/\[DIVID\]/g,t.divId),Object(l.l)(o)}}(t,c);break;case"prebid":t.prebidConfig="function"==typeof c?c(Object(A.e)(t)):c;break;case"viewability":t.externalViewabilityFunction="function"==typeof c?c:function(){return c};break;case"gpvExtraParams":t.gpvExtraParams=Object(r.c)(t.gpvExtraParams,c);break;case"hlsConfig":t.hlsConfig=c;break;case"customParams":t.customParams=Object(r.c)(t.customParams,c);break;case"adViewabilityDelay":t.adViewabilityDelay=c;break;case"iiqPercentage":t.iiqPercentage=c;break;case"eventDispatcher":t.eventDispatcher=new y.a(c)}if(t.isDebugVersion)switch(o){case"timers":t.timers=Object(r.c)(t.timers,c);break;case"debug":case"customVars":Object(r.d)(r.a,t[o],c)}},h=0,f=t.initOverrides;h<f.length;h++){c(f[h])}t.initOverrides=T([],t.initOverrides.filter((function(t){return"demands"===t.name})),!0),t.gpvConfLoaded=!0,t.viewAutoplay&&(t.mainAutoplay=!1),t.beingVpaid?t.mainAutoplay=!1:(t.clickToPlay&&(t.mainAutoplay=!1),t.mainAutoplay||(t.usejsv=!1)),t.volume=null!=t.volume?t.volume:t.allowSound?1:0,t.muted=null!=t.muted?t.muted:!t.allowSound,t.dynamicSound=null!=t.dynamicSound?t.dynamicSound:!t.muted,t.controlBar&&t.usejsv&&"native"==t.controlBarType&&(t.controlBar=!1),Object(o.k)(t,e.content,n,s),function(t,e,n,i){!n&&e&&(t.postRoll=!!e.cpf);var o=Object(r.c)({},n,t.prerollTimeout?{content:{wait:t.prerollTimeout}}:{},i);o.api=!!o.api,(o.time||o.content||o.api||o.auto)&&(t.schedule=o)}(t,e.content,e.schedule,a),t.autoplay=!1,t.paused=!0,t.beingVpaid&&(t.contentDefinition.wait=!0)}}function C(t,e,n){var i,o,s,u,d;if(Array.isArray(e)){e=e.filter((function(t){return!t.demand_display_fallback})),t.waitingForAds=!1,t.gpvTime=Object(l.h)(t.startTime),function(t){var e=[""+t.playerId];t.cacheBuster&&e.push(t.cacheBuster);var n=function(t){var e=window.CEDATO_PARAM,n=null;if(e&&"object"==typeof e)for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o&&null!=e[o]){n=e[o];break}}var a=[];if(n)for(var s in n)n.hasOwnProperty(s)&&a.push({name:s,value:n[s]});return a}(e);t.initOverrides=T(T([],t.initOverrides,!0),n,!0)}(t),(t.initOverrides||n)&&(e=function(t,e,n){var r=t.find((function(t){return"config"==t.name})),i={};r&&r.value&&(i=Object(l.d)(r.value,{id:"c"}));n&&(i=Object(l.d)(i,n));return e.map((function(t){return t.id===g.a?Object(l.d)(t,i):t}))}(t.initOverrides||[],e,n),e=function(t,e){var n,i,o=function(){var t,e,n,r;if(null===(e=null===(t=window.__EXCO)||void 0===t?void 0:t.SIM)||void 0===e?void 0:e.DEMANDS)return{value:null===(r=null===(n=window.__EXCO)||void 0===n?void 0:n.SIM)||void 0===r?void 0:r.DEMANDS};return null}()||t.find((function(t){return"demands"==t.name}));if(!o)return e;if("function"==typeof o.value)return o.value(e);var a=function(t){return Object(l.f)(t).map((function(t,e){if("string"==typeof t&&(t={url:t}),"delete"==t.$op||"reset"==t.$op)return t;var n=t.dmid||""+(10000000001+e),r=t.id||n.split("-").slice(-1)[0];return _({$op:"upsert",id:r,dmid:n},t)}))}(o.value),s=e.filter((function(t){return"c"==t.id}));if(null===(i=null===(n=window.__EXCO)||void 0===n?void 0:n.SIM)||void 0===i?void 0:i.DEMANDS)return T(T([],a,!0),s,!0);a.find((function(t){return"reset"==t.$op}))&&(e=s);e=e.filter((function(t){return!a.find((function(e){return"delete"==e.$op&&e.dmid==t.dmid}))}));var c=Object(r.g)((function(t){return"c"==t.id||"delete"==t.$op||"reset"==t.$op?null:("update"!=t.$op||e.find((function(e){return e.dmid==t.dmid})))&&t.dmid}),e,a);return T(T([],c,!0),s,!0)}(t.initOverrides||[],e)),t.urlReplacer=null;for(var p=0,h=e;p<h.length;p++){if((m=h[p]).id===g.a&&"d"===m.c)return void Object(a.c)(t);m.id===g.a?S(t,m):"d"===m.c&&O(t,m.id)}for(var f=0,v=e;f<v.length;f++){var m;(m=v[f]).id&&m.id!==g.a&&"d"!==m.c&&(m.type===g.b.RTB&&P(m),b.b.push(new c.b(m)))}return(null===(i=window.__EXCO)||void 0===i?void 0:i.SIM)&&(null===(s=null===(o=window.__EXCO)||void 0===o?void 0:o.SIM)||void 0===s?void 0:s.DEMANDS_CB)&&(null===(d=null===(u=window.__EXCO)||void 0===u?void 0:u.SIM)||void 0===d||d.DEMANDS_CB(e)),!t.isInStream&&t.inStream&&t.inStream.selectors&&t.inStream.selectors.forEach((function(e){Object(l.e)(e)&&(t.isInStream=!0)})),e=e.map((function(e){if(t.isInStream&&e.type===g.b.TAM){var n=t.inStream.tamSlotIdMapper;return n&&e.tam&&e.tam.slotId&&n[e.tam.slotId]&&(e.tam.slotId=n[e.tam.slotId]),e}return e}))}}function P(t){var e;try{var n=new URL(t.url);t.originalType=t.type,t.type="prebid",t.prebid={bidder:"exco",floorPrice:(null===(e=null==t?void 0:t.impressionData)||void 0===e?void 0:e.price)||.3,params:{},ext:{ap:n.searchParams.get("ap"),name:t.dp}}}catch(t){}return t}},,,,,function(t,e,n){var r,i=document.currentScript;n.p=(r=(null==i?void 0:i.src)||"/").includes("localhost")?r.replace("https:","http:").replace(/\?exng|player\.js/g,""):r.replace(/http:|https:|player\.js/g,"")},,,,,,,,,function(t,e,n){var r=n(110);r&&r.__esModule&&(r=r.default),t.exports="string"==typeof r?r:r.toString()},function(t,e,n){(e=n(111)(!1)).push([t.i,'/* TBD - Opacity only? */\n.__exco_flexbox {\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: flex;\n}\n.__exco_full_size,\n.__exco_ad_container,\n.__exco_ad_ima_slot,\n.__exco_content_poster,\n.__exco_content_container {\n  width: 100%;\n  height: 100% !important;\n  position: absolute;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  padding: 0;\n  margin: 0;\n}\n.__exco_visible {\n  opacity: 1;\n}\n.__exco_hidden {\n  opacity: 0;\n}\n/* Internal not for user override */\n.__exco_root_container,\n#__exco_root_container {\n  background-color: #000;\n  border: 0 none;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  top: 0;\n  width: 100%;\n}\n.__exco_root_container *,\n#__exco_root_container * {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.__exco_root_container .__exco_hidden,\n#__exco_root_container .__exco_hidden {\n  display: none;\n}\n.__exco_ad_container {\n  background-color: #000;\n  z-index: -1;\n}\n.__exco_content_video,\n.__exco_video_element,\n#__exco_content_video,\n#__exco_video_element {\n  height: 100% !important;\n  width: 100%;\n  position: relative;\n  top: 0;\n  left: 0;\n  display: block;\n}\n.__exco_content_poster {\n  z-index: 1;\n  background: #000 center center no-repeat;\n}\n.__exco_content_container {\n  background: #000;\n  z-index: 10001;\n}\n.__exco_content_container .__exco_content_video {\n  z-index: 0;\n}\n.__exco_video_element {\n  background-color: #000;\n}\n.__exco_jsv_marker::before {\n  content: "JSV";\n  display: block;\n  color: #fff;\n  background: #333;\n  top: 0;\n  left: 0;\n  position: absolute;\n  padding: 10px;\n  -webkit-box-shadow: 0 0 7px #fff;\n  -moz-box-shadow: 0 0 7px #fff;\n  box-shadow: 0 0 7px #fff;\n}\n',""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],d=!1,l=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!d){var t=s(p);d=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,d=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||d||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r={".":[45,9],"./":[45,9],"./display-fallback":[98,9,3],"./display-fallback/":[98,9,3],"./display-fallback/index":[98,9,3],"./display-fallback/index.ts":[98,9,3],"./display-fallback/src/constants":[97,9,4],"./display-fallback/src/constants/":[97,9,4],"./display-fallback/src/constants/index":[97,9,4],"./display-fallback/src/constants/index.ts":[97,9,4],"./display-fallback/src/stage-runner":[107,9,6],"./display-fallback/src/stage-runner.ts":[107,9,6],"./index":[45,9],"./index.ts":[45,9],"./public-path":[100,7],"./public-path.ts":[100,7],"./tbla":[99,9,0],"./tbla/":[99,9,0],"./tbla/index":[99,9,0],"./tbla/index.ts":[99,9,0],"./tbla/src/api":[106,9,1],"./tbla/src/api.ts":[106,9,1],"./tbla/src/callbacks":[102,9,7],"./tbla/src/callbacks.ts":[102,9,7],"./tbla/src/constants":[96,9,2],"./tbla/src/constants/":[96,9,2],"./tbla/src/constants/api.constants":[103,9,8],"./tbla/src/constants/api.constants.ts":[103,9,8],"./tbla/src/constants/demand.constants":[101,9,9],"./tbla/src/constants/demand.constants.ts":[101,9,9],"./tbla/src/constants/events.constants":[104,9,10],"./tbla/src/constants/events.constants.ts":[104,9,10],"./tbla/src/constants/index":[96,9,2],"./tbla/src/constants/index.ts":[96,9,2],"./tbla/src/events":[105,9,1],"./tbla/src/events.ts":[105,9,1],"./tbla/src/moat":[108,9,5],"./tbla/src/moat.ts":[108,9,5]};function i(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],i=e[0];return Promise.all(e.slice(2).map(n.e)).then((function(){return n.t(i,e[1])}))}i.keys=function(){return Object.keys(r)},i.id=113,t.exports=i},function(t,e,n){!function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:t.id||null,adId:t.adId||null,sequence:t.sequence||null,apiFramework:t.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var m=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=g(t);for(var o in!e.ERRORCODE||n.isCustomCode||/^[0-9]{3}$/.test(e.ERRORCODE)||(e.ERRORCODE=900),e.CACHEBUSTING=I(Math.round(1e8*Math.random())),e.TIMESTAMP=(new Date).toISOString(),e.RANDOM=e.random=e.CACHEBUSTING,e)e[o]=T(e[o]);for(var a in i){var s=i[a];"string"==typeof s&&r.push(y(s,e))}return r}function y(t,e){var n=(t=b(t,e)).match(/[^[\]]+(?=])/g);if(!n)return t;var r=n.filter((function(t){return m.indexOf(t)>-1}));return 0===r.length?t:b(t,r=r.reduce((function(t,e){return t[e]=-1,t}),{}))}function b(t,e){var n=t;for(var r in e){var i=e[r];n=n.replace(new RegExp("(?:\\[|%%)(".concat(r,")(?:\\]|%%)"),"g"),i)}return n}function g(t){return Array.isArray(t)?t.map((function(t){return t&&t.hasOwnProperty("url")?t.url:t})):t}function E(t,e){for(var n=0;n<e.length;n++)if(_(e[n],t))return!0;return!1}function _(t,e){if(t&&e){var n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);return n.length===r.length&&t.id===e.id&&t.url===e.url}return!1}function T(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16))}))}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return t.toString().padStart(e,"0")}var O={track:function(t,e,n){A(t,e,n).forEach((function(t){"undefined"!=typeof window&&null!==window&&((new Image).src=t)}))},resolveURLTemplates:A,extractURLsFromTemplates:g,containsTemplateObject:E,isTemplateObjectEqual:_,encodeURIComponentRFC3986:T,replaceUrlMacros:y,isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},flatten:function t(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t(n):n)}),[])},joinArrayOfUniqueTemplateObjs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],i=n.concat(r);return i.reduce((function(t,e){return E(e,t)||t.push(e),t}),[])},isValidTimeValue:function(t){return Number.isFinite(t)&&t>=-2},addLeadingZeros:I};function S(t){return-1!==["true","TRUE","True","1"].indexOf(t)}var C={childByName:function(t,e){var n=t.childNodes;for(var r in n){var i=n[r];if(i.nodeName===e)return i}},childrenByName:function(t,e){var n=[],r=t.childNodes;for(var i in r){var o=r[i];o.nodeName===e&&n.push(o)}return n},resolveVastAdTagURI:function(t,e){if(!e)return t;if(0===t.indexOf("//")){var n=location.protocol;return"".concat(n).concat(t)}if(-1===t.indexOf("://")){var r=e.slice(0,e.lastIndexOf("/"));return"".concat(r,"/").concat(t)}return t},parseBoolean:S,parseNodeText:function(t){return t&&(t.textContent||t.text||"").trim()},copyNodeAttribute:function(t,e,n){var r=e.getAttribute(t);r&&n.setAttribute(t,r)},parseAttributes:function(t){for(var e=t.attributes,n={},r=0;r<e.length;r++)n[e[r].nodeName]=e[r].nodeValue;return n},parseDuration:function(t){if(null==t)return-1;if(O.isNumeric(t))return parseInt(t);var e=t.split(":");if(3!==e.length)return-1;var n=e[2].split("."),r=parseInt(n[0]);2===n.length&&(r+=parseFloat("0.".concat(n[1])));var i=parseInt(60*e[1]),o=parseInt(60*e[0]*60);return isNaN(o)||isNaN(i)||isNaN(r)||i>3600||r>60?-1:o+i+r},splitVAST:function(t){var e=[],n=null;return t.forEach((function(r,i){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){var o=t[i-1];if(o&&o.sequence===r.sequence-1)return void(n&&n.push(r));delete r.sequence}n=[r],e.push(n)})),e},assignAttributes:function(t,e){if(t)for(var n in t){var r=t[n];if(r.nodeName&&r.nodeValue&&e.hasOwnProperty(r.nodeName)){var i=r.nodeValue;"boolean"==typeof e[r.nodeName]&&(i=S(i)),e[r.nodeName]=i}}},mergeWrapperAdData:function(t,e){t.errorURLTemplates=e.errorURLTemplates.concat(t.errorURLTemplates),t.impressionURLTemplates=e.impressionURLTemplates.concat(t.impressionURLTemplates),t.extensions=e.extensions.concat(t.extensions),e.viewableImpression.length>0&&(t.viewableImpression=[].concat(h(t.viewableImpression),h(e.viewableImpression))),t.followAdditionalWrappers=e.followAdditionalWrappers,t.allowMultipleAds=e.allowMultipleAds,t.fallbackOnNoAd=e.fallbackOnNoAd;var n=(e.creatives||[]).filter((function(t){return t&&"companion"===t.type})),r=n.reduce((function(t,e){return(e.variations||[]).forEach((function(e){(e.companionClickTrackingURLTemplates||[]).forEach((function(e){O.containsTemplateObject(e,t)||t.push(e)}))})),t}),[]);t.creatives=n.concat(t.creatives);var i=e.videoClickTrackingURLTemplates&&e.videoClickTrackingURLTemplates.length,o=e.videoCustomClickURLTemplates&&e.videoCustomClickURLTemplates.length;t.creatives.forEach((function(t){if(e.trackingEvents&&e.trackingEvents[t.type])for(var n in e.trackingEvents[t.type]){var a=e.trackingEvents[t.type][n];Array.isArray(t.trackingEvents[n])||(t.trackingEvents[n]=[]),t.trackingEvents[n]=t.trackingEvents[n].concat(a)}"linear"===t.type&&(i&&(t.videoClickTrackingURLTemplates=t.videoClickTrackingURLTemplates.concat(e.videoClickTrackingURLTemplates)),o&&(t.videoCustomClickURLTemplates=t.videoCustomClickURLTemplates.concat(e.videoCustomClickURLTemplates)),!e.videoClickThroughURLTemplate||null!==t.videoClickThroughURLTemplate&&void 0!==t.videoClickThroughURLTemplate||(t.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate)),"companion"===t.type&&r.length&&(t.variations||[]).forEach((function(t){t.companionClickTrackingURLTemplates=O.joinArrayOfUniqueTemplateObjs(t.companionClickTrackingURLTemplates,r)}))})),e.adVerifications&&(t.adVerifications=t.adVerifications.concat(e.adVerifications)),e.blockedAdCategories&&(t.blockedAdCategories=t.blockedAdCategories.concat(e.blockedAdCategories))}};function P(t,e){var n=function(){var t=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=t.id,n=t.adId,r=t.sequence,i=t.apiFramework;return{id:e,adId:n,sequence:r,apiFramework:i,type:"companion",required:null,variations:[]}}(e);return n.required=t.getAttribute("required")||null,n.variations=C.childrenByName(t,"Companion").map((function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:t.id||null,adType:"companionAd",width:t.width||0,height:t.height||0,assetWidth:t.assetWidth||null,assetHeight:t.assetHeight||null,expandedWidth:t.expandedWidth||null,expandedHeight:t.expandedHeight||null,apiFramework:t.apiFramework||null,adSlotID:t.adSlotID||null,pxratio:t.pxratio||"1",renderingMode:t.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(C.parseAttributes(t));e.htmlResources=C.childrenByName(t,"HTMLResource").reduce((function(t,e){var n=C.parseNodeText(e);return n?t.concat(n):t}),[]),e.iframeResources=C.childrenByName(t,"IFrameResource").reduce((function(t,e){var n=C.parseNodeText(e);return n?t.concat(n):t}),[]),e.staticResources=C.childrenByName(t,"StaticResource").reduce((function(t,e){var n=C.parseNodeText(e);return n?t.concat({url:n,creativeType:e.getAttribute("creativeType")||null}):t}),[]),e.altText=C.parseNodeText(C.childByName(t,"AltText"))||null;var n=C.childByName(t,"TrackingEvents");n&&C.childrenByName(n,"Tracking").forEach((function(t){var n=t.getAttribute("event"),r=C.parseNodeText(t);n&&r&&(Array.isArray(e.trackingEvents[n])||(e.trackingEvents[n]=[]),e.trackingEvents[n].push(r))})),e.companionClickTrackingURLTemplates=C.childrenByName(t,"CompanionClickTracking").map((function(t){return{id:t.getAttribute("id")||null,url:C.parseNodeText(t)}})),e.companionClickThroughURLTemplate=C.parseNodeText(C.childByName(t,"CompanionClickThrough"))||null;var r=C.childByName(t,"AdParameters");return r&&(e.adParameters=C.parseNodeText(r),e.xmlEncoded=r.getAttribute("xmlEncoded")||null),e})),n}function w(t){return"linear"===t.type}function R(t,e){var n,r=function(){var t=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=t.id,n=t.adId,r=t.sequence,i=t.apiFramework;return{id:e,adId:n,sequence:r,apiFramework:i,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(e);r.duration=C.parseDuration(C.parseNodeText(C.childByName(t,"Duration")));var i=t.getAttribute("skipoffset");if(null==i)r.skipDelay=null;else if("%"===i.charAt(i.length-1)&&-1!==r.duration){var o=parseInt(i,10);r.skipDelay=r.duration*(o/100)}else r.skipDelay=C.parseDuration(i);var a=C.childByName(t,"VideoClicks");if(a){var s=C.childByName(a,"ClickThrough");r.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:C.parseNodeText(s)}:null,C.childrenByName(a,"ClickTracking").forEach((function(t){r.videoClickTrackingURLTemplates.push({id:t.getAttribute("id")||null,url:C.parseNodeText(t)})})),C.childrenByName(a,"CustomClick").forEach((function(t){r.videoCustomClickURLTemplates.push({id:t.getAttribute("id")||null,url:C.parseNodeText(t)})}))}var c=C.childByName(t,"AdParameters");c&&(r.adParameters=C.parseNodeText(c)),C.childrenByName(t,"TrackingEvents").forEach((function(t){C.childrenByName(t,"Tracking").forEach((function(t){var e=t.getAttribute("event"),i=C.parseNodeText(t);if(e&&i){if("progress"===e){if(!(n=t.getAttribute("offset")))return;e="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(C.parseDuration(n)))}Array.isArray(r.trackingEvents[e])||(r.trackingEvents[e]=[]),r.trackingEvents[e].push(i)}}))})),C.childrenByName(t,"MediaFiles").forEach((function(t){C.childrenByName(t,"MediaFile").forEach((function(t){r.mediaFiles.push(function(t){var e={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};e.id=t.getAttribute("id"),e.fileURL=C.parseNodeText(t),e.deliveryType=t.getAttribute("delivery"),e.codec=t.getAttribute("codec"),e.mimeType=t.getAttribute("type"),e.mediaType=t.getAttribute("mediaType")||"2D",e.apiFramework=t.getAttribute("apiFramework"),e.fileSize=parseInt(t.getAttribute("fileSize")||0),e.bitrate=parseInt(t.getAttribute("bitrate")||0),e.minBitrate=parseInt(t.getAttribute("minBitrate")||0),e.maxBitrate=parseInt(t.getAttribute("maxBitrate")||0),e.width=parseInt(t.getAttribute("width")||0),e.height=parseInt(t.getAttribute("height")||0);var n=t.getAttribute("scalable");n&&"string"==typeof n&&(e.scalable=C.parseBoolean(n));var r=t.getAttribute("maintainAspectRatio");return r&&"string"==typeof r&&(e.maintainAspectRatio=C.parseBoolean(r)),e}(t))}));var e=C.childByName(t,"InteractiveCreativeFile");e&&(r.interactiveCreativeFile=function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:t.type||null,apiFramework:t.apiFramework||null,variableDuration:C.parseBoolean(t.variableDuration),fileURL:null}}(C.parseAttributes(t));return e.fileURL=C.parseNodeText(t),e}(e));var n=C.childByName(t,"ClosedCaptionFiles");n&&C.childrenByName(n,"ClosedCaptionFile").forEach((function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:t.type||null,language:t.language||null,fileURL:null}}(C.parseAttributes(t));e.fileURL=C.parseNodeText(t),r.closedCaptionFiles.push(e)}));var i,o,a,s=C.childByName(t,"Mezzanine"),c=(i=s,o={},a=!1,["delivery","type","width","height"].forEach((function(t){i&&i.getAttribute(t)?o[t]=i.getAttribute(t):a=!0})),a?null:o);if(c){var u={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};u.id=s.getAttribute("id"),u.fileURL=C.parseNodeText(s),u.delivery=c.delivery,u.codec=s.getAttribute("codec"),u.type=c.type,u.width=parseInt(c.width,10),u.height=parseInt(c.height,10),u.fileSize=parseInt(s.getAttribute("fileSize"),10),u.mediaType=s.getAttribute("mediaType")||"2D",r.mezzanine=u}}));var u=C.childByName(t,"Icons");return u&&C.childrenByName(u,"Icon").forEach((function(t){r.icons.push(function(t){var e={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};e.program=t.getAttribute("program"),e.height=parseInt(t.getAttribute("height")||0),e.width=parseInt(t.getAttribute("width")||0),e.xPosition=function(t){return-1!==["left","right"].indexOf(t)?t:parseInt(t||0)}(t.getAttribute("xPosition")),e.yPosition=function(t){return-1!==["top","bottom"].indexOf(t)?t:parseInt(t||0)}(t.getAttribute("yPosition")),e.apiFramework=t.getAttribute("apiFramework"),e.pxratio=t.getAttribute("pxratio")||"1",e.offset=C.parseDuration(t.getAttribute("offset")),e.duration=C.parseDuration(t.getAttribute("duration")),C.childrenByName(t,"HTMLResource").forEach((function(t){e.type=t.getAttribute("creativeType")||"text/html",e.htmlResource=C.parseNodeText(t)})),C.childrenByName(t,"IFrameResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.iframeResource=C.parseNodeText(t)})),C.childrenByName(t,"StaticResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.staticResource=C.parseNodeText(t)}));var n=C.childByName(t,"IconClicks");return n&&(e.iconClickThroughURLTemplate=C.parseNodeText(C.childByName(n,"IconClickThrough")),C.childrenByName(n,"IconClickTracking").forEach((function(t){e.iconClickTrackingURLTemplates.push({id:t.getAttribute("id")||null,url:C.parseNodeText(t)})}))),e.iconViewTrackingURLTemplate=C.parseNodeText(C.childByName(t,"IconViewTracking")),e}(t))})),r}function D(t,e){var n=function(){var t=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=t.id,n=t.adId,r=t.sequence,i=t.apiFramework;return{id:e,adId:n,sequence:r,apiFramework:i,type:"nonlinear",variations:[],trackingEvents:{}}}(e);return C.childrenByName(t,"TrackingEvents").forEach((function(t){var e,r;C.childrenByName(t,"Tracking").forEach((function(t){e=t.getAttribute("event"),r=C.parseNodeText(t),e&&r&&(Array.isArray(n.trackingEvents[e])||(n.trackingEvents[e]=[]),n.trackingEvents[e].push(r))}))})),C.childrenByName(t,"NonLinear").forEach((function(t){var e={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};e.id=t.getAttribute("id")||null,e.width=t.getAttribute("width"),e.height=t.getAttribute("height"),e.expandedWidth=t.getAttribute("expandedWidth"),e.expandedHeight=t.getAttribute("expandedHeight"),e.scalable=C.parseBoolean(t.getAttribute("scalable")),e.maintainAspectRatio=C.parseBoolean(t.getAttribute("maintainAspectRatio")),e.minSuggestedDuration=C.parseDuration(t.getAttribute("minSuggestedDuration")),e.apiFramework=t.getAttribute("apiFramework"),C.childrenByName(t,"HTMLResource").forEach((function(t){e.type=t.getAttribute("creativeType")||"text/html",e.htmlResource=C.parseNodeText(t)})),C.childrenByName(t,"IFrameResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.iframeResource=C.parseNodeText(t)})),C.childrenByName(t,"StaticResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.staticResource=C.parseNodeText(t)}));var r=C.childByName(t,"AdParameters");r&&(e.adParameters=C.parseNodeText(r)),e.nonlinearClickThroughURLTemplate=C.parseNodeText(C.childByName(t,"NonLinearClickThrough")),C.childrenByName(t,"NonLinearClickTracking").forEach((function(t){e.nonlinearClickTrackingURLTemplates.push({id:t.getAttribute("id")||null,url:C.parseNodeText(t)})})),n.variations.push(e)})),n}function L(t){var e=[];return t.forEach((function(t){var n=function t(e){if("#comment"===e.nodeName)return null;var n,r={name:null,value:null,attributes:{},children:[]},i=e.attributes,o=e.childNodes;if(r.name=e.nodeName,e.attributes)for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s.nodeName&&s.nodeValue&&(r.attributes[s.nodeName]=s.nodeValue)}for(var c in o)if(o.hasOwnProperty(c)){var u=t(o[c]);u&&r.children.push(u)}if(0===r.children.length||1===r.children.length&&["#cdata-section","#text"].indexOf(r.children[0].name)>=0){var d=C.parseNodeText(e);""!==d&&(r.value=d),r.children=[]}return null===(n=r).value&&0===Object.keys(n.attributes).length&&0===n.children.length?null:r}(t);n&&e.push(n)})),e}function N(t){var e=[];return t.forEach((function(t){var n,r={id:t.getAttribute("id")||null,adId:k(t),sequence:t.getAttribute("sequence")||null,apiFramework:t.getAttribute("apiFramework")||null},i=[];C.childrenByName(t,"UniversalAdId").forEach((function(t){var e={idRegistry:t.getAttribute("idRegistry")||"unknown",value:C.parseNodeText(t)};i.push(e)}));var o=C.childByName(t,"CreativeExtensions");for(var a in o&&(n=L(C.childrenByName(o,"CreativeExtension"))),t.childNodes){var s=t.childNodes[a],c=void 0;switch(s.nodeName){case"Linear":c=R(s,r);break;case"NonLinearAds":c=D(s,r);break;case"CompanionAds":c=P(s,r)}c&&(i&&(c.universalAdIds=i),n&&(c.creativeExtensions=n),e.push(c))}})),e}function k(t){return t.getAttribute("AdID")||t.getAttribute("adID")||t.getAttribute("adId")||null}var j={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function x(t,e){if(j[t.nodeName]&&j[t.nodeName].attributes){var n=j[t.nodeName].attributes.filter((function(e){return!t.getAttribute(e)}));n.length>0&&V({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:n},e)}}function U(t,e,n){var r=j[t.nodeName],i=!n&&"Wrapper"!==t.nodeName;if(r&&!i){if(r.subElements){var o=r.subElements.filter((function(e){return!C.childByName(t,e)}));o.length>0&&V({name:t.nodeName,parentName:t.parentNode.nodeName,subElements:o},e)}n&&r.oneOfinLineResources&&(r.oneOfinLineResources.some((function(e){return C.childByName(t,e)}))||V({name:t.nodeName,parentName:t.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},e))}}function M(t){return t.children&&0!==t.children.length}function V(t,e){var n=t.name,r=t.parentName,i=t.attributes,o=t.subElements,a=t.oneOfResources,s="Element '".concat(n,"'");e("VAST-warning",{message:s+=i?" missing required attribute(s) '".concat(i.join(", "),"' "):o?" missing required sub element(s) '".concat(o.join(", "),"' "):a?" must provide one of the following '".concat(a.join(", "),"' "):" is empty",parentElement:r,specVersion:4.1})}var F=function t(e,n,r){if(e&&e.nodeName)if("InLine"===e.nodeName&&(r=!0),x(e,n),M(e)){U(e,n,r);for(var i=0;i<e.children.length;i++)t(e.children[i],n,r)}else 0===C.parseNodeText(e).length&&V({name:e.nodeName,parentName:e.parentNode.nodeName},n)};function B(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds,i=n.followAdditionalWrappers,o=t.childNodes;for(var a in o){var s=o[a];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==i)){if(C.copyNodeAttribute("id",t,s),C.copyNodeAttribute("sequence",t,s),C.copyNodeAttribute("adType",t,s),"Wrapper"===s.nodeName)return{ad:H(s,e),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:q(s,e,{allowMultipleAds:r}),type:"INLINE"}}}}function q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds;return!1===r&&t.getAttribute("sequence")?null:G(t,e)}function G(t,e){var n=[];e&&F(t,e);var r=t.childNodes,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:t.id||null,sequence:t.sequence||null,adType:t.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(C.parseAttributes(t));for(var o in r){var a=r[o];switch(a.nodeName){case"Error":i.errorURLTemplates.push(C.parseNodeText(a));break;case"Impression":i.impressionURLTemplates.push({id:a.getAttribute("id")||null,url:C.parseNodeText(a)});break;case"Creatives":i.creatives=N(C.childrenByName(a,"Creative"));break;case"Extensions":var s=C.childrenByName(a,"Extension");i.extensions=L(s),i.adVerifications.length||(n=Y(s));break;case"AdVerifications":i.adVerifications=W(C.childrenByName(a,"Verification"));break;case"AdSystem":i.system={value:C.parseNodeText(a),version:a.getAttribute("version")||null};break;case"AdTitle":i.title=C.parseNodeText(a);break;case"AdServingId":i.adServingId=C.parseNodeText(a);break;case"Category":i.categories.push({authority:a.getAttribute("authority")||null,value:C.parseNodeText(a)});break;case"Expires":i.expires=parseInt(C.parseNodeText(a),10);break;case"ViewableImpression":i.viewableImpression.push(J(a));break;case"Description":i.description=C.parseNodeText(a);break;case"Advertiser":i.advertiser={id:a.getAttribute("id")||null,value:C.parseNodeText(a)};break;case"Pricing":i.pricing={value:C.parseNodeText(a),model:a.getAttribute("model")||null,currency:a.getAttribute("currency")||null};break;case"Survey":i.survey=C.parseNodeText(a);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:a.getAttribute("authority")||null,value:C.parseNodeText(a)})}}return n.length&&(i.adVerifications=i.adVerifications.concat(n)),i}function H(t,e){var n=G(t,e),r=t.getAttribute("followAdditionalWrappers"),i=t.getAttribute("allowMultipleAds"),o=t.getAttribute("fallbackOnNoAd");n.followAdditionalWrappers=!r||C.parseBoolean(r),n.allowMultipleAds=!!i&&C.parseBoolean(i),n.fallbackOnNoAd=o?C.parseBoolean(o):null;var a=C.childByName(t,"VASTAdTagURI");if(a?n.nextWrapperURL=C.parseNodeText(a):(a=C.childByName(t,"VASTAdTagURL"))&&(n.nextWrapperURL=C.parseNodeText(C.childByName(a,"URL"))),n.creatives.forEach((function(t){if(-1!==["linear","nonlinear"].indexOf(t.type)){if(t.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[t.type]||(n.trackingEvents[t.type]={});var e=function(e){var r=t.trackingEvents[e];Array.isArray(n.trackingEvents[t.type][e])||(n.trackingEvents[t.type][e]=[]),r.forEach((function(r){n.trackingEvents[t.type][e].push(r)}))};for(var r in t.trackingEvents)e(r)}t.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),t.videoClickTrackingURLTemplates.forEach((function(t){n.videoClickTrackingURLTemplates.push(t)}))),t.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate),t.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),t.videoCustomClickURLTemplates.forEach((function(t){n.videoCustomClickURLTemplates.push(t)})))}})),n.nextWrapperURL)return n}function W(t){var e=[];return t.forEach((function(t){var n={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},r=t.childNodes;for(var i in C.assignAttributes(t.attributes,n),r){var o=r[i];switch(o.nodeName){case"JavaScriptResource":case"ExecutableResource":n.resource=C.parseNodeText(o),C.assignAttributes(o.attributes,n);break;case"VerificationParameters":n.parameters=C.parseNodeText(o)}}var a=C.childByName(t,"TrackingEvents");a&&C.childrenByName(a,"Tracking").forEach((function(t){var e=t.getAttribute("event"),r=C.parseNodeText(t);e&&r&&(Array.isArray(n.trackingEvents[e])||(n.trackingEvents[e]=[]),n.trackingEvents[e].push(r))})),e.push(n)})),e}function Y(t){var e=null,n=[];return t.some((function(t){return e=C.childByName(t,"AdVerifications")})),e&&(n=W(C.childrenByName(e,"Verification"))),n}function J(t){var e={};e.id=t.getAttribute("id")||null;var n=t.childNodes;for(var r in n){var i=n[r],o=i.nodeName,a=C.parseNodeText(i);if(("Viewable"===o||"NotViewable"===o||"ViewUndetermined"===o)&&a){var s=o.toLowerCase();Array.isArray(e[s])||(e[s]=[]),e[s].push(a)}}return e}var z=function(){function t(){i(this,t),this._handlers=[]}return a(t,[{key:"on",value:function(t,e){if("function"!=typeof e)throw new TypeError("The handler argument must be of type Function. Received type ".concat(r(e)));if(!t)throw new TypeError("The event argument must be of type String. Received type ".concat(r(t)));return this._handlers.push({event:t,handler:e}),this}},{key:"once",value:function(t,e){return this.on(t,function(t,e,n){var r={fired:!1,wrapFn:void 0};function i(){r.fired||(t.off(e,r.wrapFn),r.fired=!0,n.bind(t).apply(void 0,arguments))}return r.wrapFn=i,i}(this,t,e))}},{key:"off",value:function(t,e){return this._handlers=this._handlers.filter((function(n){return n.event!==t||n.handler!==e})),this}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=!1;return this._handlers.forEach((function(e){"*"===e.event&&(i=!0,e.handler.apply(e,[t].concat(n))),e.event===t&&(i=!0,e.handler.apply(e,n))})),i}},{key:"removeAllListeners",value:function(t){return t?(this._handlers=this._handlers.filter((function(e){return e.event!==t})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(t){return this._handlers.filter((function(e){return e.event===t})).length}},{key:"listeners",value:function(t){return this._handlers.reduce((function(e,n){return n.event===t&&e.push(n.handler),e}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(t){return t.event}))}}]),t}(),K=function(t,e,n){n(new Error("Please bundle the library for node to use the node urlHandler"))},X=12e4;function Q(){try{var t=new window.XMLHttpRequest;return"withCredentials"in t?t:null}catch(t){return null}}function Z(t,e,n){var r=n?408:t.status,i=n?"XHRURLHandler: Request timed out after ".concat(t.timeout," ms (").concat(r,")"):"XHRURLHandler: ".concat(t.statusText," (").concat(r,")");e(new Error(i),null,{statusCode:r})}var $=function(t,e,n){if("https:"===window.location.protocol&&0===t.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=Q();r.open("GET",t),r.timeout=e.timeout||X,r.withCredentials=e.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=function(){return function(t,e){200===t.status?e(null,t.responseXML,{byteLength:t.response.length,statusCode:t.status}):Z(t,e,!1)}(r,n)},r.onerror=function(){return Z(r,n,!1)},r.onabort=function(){return Z(r,n,!1)},r.ontimeout=function(){return Z(r,n,!0)},r.send()}catch(t){n(new Error("XHRURLHandler: Unexpected error"))}},tt=function(){return!!Q()},et={get:function(t,e,n){return n||("function"==typeof e&&(n=e),e={}),"undefined"==typeof window||null===window?K(t,e,n):tt()?$(t,e,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},nt=0,rt=0,it=function(t,e){!t||!e||t<=0||e<=0||(rt=(rt*nt+8*t/e)/++nt)},ot={ERRORCODE:900,extensions:[]},at=function(t){c(n,t);var e=p(n);function n(){var t;return i(this,n),(t=e.call(this)).remainingAds=[],t.parentURLs=[],t.errorURLTemplates=[],t.rootErrorURLTemplates=[],t.maxWrapperDepth=null,t.URLTemplateFilters=[],t.fetchingOptions={},t.parsingOptions={},t}return a(n,[{key:"addURLTemplateFilter",value:function(t){"function"==typeof t&&this.URLTemplateFilters.push(t)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.emit("VAST-error",Object.assign.apply(Object,[{},ot,e].concat(r))),O.track(t,e)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return rt}},{key:"fetchVAST",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(o,a){e.URLTemplateFilters.forEach((function(e){t=e(t)})),e.parentURLs.push(t);var s=Date.now();e.emit("VAST-resolving",{url:t,previousUrl:r,wrapperDepth:n,maxWrapperDepth:e.maxWrapperDepth,timeout:e.fetchingOptions.timeout,wrapperAd:i}),e.urlHandler.get(t,e.fetchingOptions,(function(i,c){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=Math.round(Date.now()-s),l=Object.assign({url:t,previousUrl:r,wrapperDepth:n,error:i,duration:d},u);e.emit("VAST-resolved",l),it(u.byteLength,d),i?a(i):o(c)}))}))}},{key:"initParsingStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:t.timeout||X,withCredentials:t.withCredentials},this.maxWrapperDepth=t.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:t.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=t.urlHandler||t.urlhandler||et,this.vastVersion=null,it(t.byteLength,t.requestDuration)}},{key:"getRemainingAds",value:function(t){var e=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var n=t?O.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(n,{wrapperDepth:0,url:this.rootURL}).then((function(t){return e.buildVASTResponse(t)}))}},{key:"getAndParseVAST",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.URLTemplateFilters.forEach((function(e){t=e(t)})),this.rootURL=t,this.fetchVAST(t).then((function(r){return n.previousUrl=t,n.isRootVAST=!0,n.url=t,e.parse(r,n).then((function(t){return e.buildVASTResponse(t)}))}))}},{key:"parseVAST",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),n.isRootVAST=!0,this.parse(t,n).then((function(t){return e.buildVASTResponse(t)}))}},{key:"buildVASTResponse",value:function(t){var e,n={ads:(e={ads:t,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:e.errorURLTemplates||[],version:e.version||null};return this.completeWrapperResolving(n),n}},{key:"parseVastXml",value:function(t,e){var n=e.isRootVAST,r=void 0!==n&&n,i=e.url,o=void 0===i?null:i,a=e.wrapperDepth,s=void 0===a?0:a,c=e.allowMultipleAds,u=e.followAdditionalWrappers;if(!t||!t.documentElement||"VAST"!==t.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:o,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var d=[],l=t.documentElement.childNodes,p=t.documentElement.getAttribute("version");for(var h in r&&p&&(this.vastVersion=p),l){var f=l[h];if("Error"===f.nodeName){var v=C.parseNodeText(f);r?this.rootErrorURLTemplates.push(v):this.errorURLTemplates.push(v)}else if("Ad"===f.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)c=!0;else if(!1===c&&d.length>1)break;var m=B(f,this.emit.bind(this),{allowMultipleAds:c,followAdditionalWrappers:u});m.ad?(d.push(m.ad),this.emit("VAST-ad-parsed",{type:m.type,url:o,wrapperDepth:s,adIndex:d.length-1,vastVersion:p})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return d}},{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.url,r=void 0===n?null:n,i=e.resolveAll,o=void 0===i||i,a=e.wrapperSequence,s=void 0===a?null:a,c=e.previousUrl,u=void 0===c?null:c,d=e.wrapperDepth,l=void 0===d?0:d,p=e.isRootVAST,h=void 0!==p&&p,f=e.followAdditionalWrappers,v=e.allowMultipleAds,m=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&h&&(v=!0);try{m=this.parseVastXml(t,{isRootVAST:h,url:r,wrapperDepth:l,allowMultipleAds:v,followAdditionalWrappers:f})}catch(t){return Promise.reject(t)}return 1===m.length&&null!=s&&(m[0].sequence=s),!1===o&&(this.remainingAds=C.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:l,previousUrl:u,url:r})}},{key:"resolveAds",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=n.wrapperDepth,i=n.previousUrl,o=n.url,a=[];return i=o,e.forEach((function(e){var n=t.resolveWrappers(e,r,i);a.push(n)})),Promise.all(a).then((function(e){var n=O.flatten(e);if(!n&&t.remainingAds.length>0){var a=t.remainingAds.shift();return t.resolveAds(a,{wrapperDepth:r,previousUrl:i,url:o})}return n}))}},{key:"resolveWrappers",value:function(t,e,n){var r=this;return new Promise((function(i){var o;if(e++,!t.nextWrapperURL)return delete t.nextWrapperURL,i(t);if(e>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(t.nextWrapperURL))return t.errorCode=302,delete t.nextWrapperURL,i(t);t.nextWrapperURL=C.resolveVastAdTagURI(t.nextWrapperURL,n),r.URLTemplateFilters.forEach((function(e){t.nextWrapperURL=e(t.nextWrapperURL)}));var a=null!==(o=r.parsingOptions.allowMultipleAds)&&void 0!==o?o:t.allowMultipleAds,s=t.sequence;r.fetchVAST(t.nextWrapperURL,e,n,t).then((function(o){return r.parse(o,{url:t.nextWrapperURL,previousUrl:n,wrapperSequence:s,wrapperDepth:e,followAdditionalWrappers:t.followAdditionalWrappers,allowMultipleAds:a}).then((function(e){if(delete t.nextWrapperURL,0===e.length)return t.creatives=[],i(t);e.forEach((function(e){e&&C.mergeWrapperAdData(e,t)})),i(e)}))})).catch((function(e){t.errorCode=301,t.errorMessage=e.message,i(t)}))}))}},{key:"completeWrapperResolving",value:function(t){if(0===t.ads.length)this.trackVastError(t.errorURLTemplates,{ERRORCODE:303});else for(var e=t.ads.length-1;e>=0;e--){var n=t.ads[e];(n.errorCode||0===n.creatives.length)&&(this.trackVastError(n.errorURLTemplates.concat(t.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),t.ads.splice(e,1))}}}]),n}(z),st=null,ct={data:{},length:0,getItem:function(t){return this.data[t]},setItem:function(t,e){this.data[t]=e,this.length=Object.keys(this.data).length},removeItem:function(t){delete this.data[t],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ut=function(){function t(){i(this,t),this.storage=this.initStorage()}return a(t,[{key:"initStorage",value:function(){if(st)return st;try{st="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(t){st=null}return st&&!this.isStorageDisabled(st)||(st=ct).clear(),st}},{key:"isStorageDisabled",value:function(t){var e="__VASTStorage__";try{if(t.setItem(e,e),t.getItem(e)!==e)return t.removeItem(e),!0}catch(t){return!0}return t.removeItem(e),!1}},{key:"getItem",value:function(t){return this.storage.getItem(t)}},{key:"setItem",value:function(t,e){return this.storage.setItem(t,e)}},{key:"removeItem",value:function(t){return this.storage.removeItem(t)}},{key:"clear",value:function(){return this.storage.clear()}}]),t}(),dt=function(){function t(e,n,r){i(this,t),this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=n||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new at,this.storage=r||new ut,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return a(t,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(t){this.storage.setItem("vast-client-last-successful-ad",t)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(t){this.storage.setItem("vast-client-total-calls",t)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(t){this.storage.setItem("vast-client-total-calls-timeout",t)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(t){return this.vastParser.getRemainingAds(t)}},{key:"get",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();return(n=Object.assign({},this.defaultOptions,n)).hasOwnProperty("resolveAll")||(n.resolveAll=!1),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,new Promise((function(i,o){if(e.cappingFreeLunch>=e.totalCalls)return o(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(e.totalCalls,"/").concat(e.cappingFreeLunch)));var a=r-e.lastSuccessfulAd;if(a<0)e.lastSuccessfulAd=0;else if(a<e.cappingMinimumTimeInterval)return o(new Error("VAST call canceled – (".concat(e.cappingMinimumTimeInterval,")ms minimum interval reached")));e.vastParser.getAndParseVAST(t,n).then((function(t){return i(t)})).catch((function(t){return o(t)}))}))}}]),t}(),lt=function(t){c(o,t);var e=p(o);function o(t,n,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var c in i(this,o),(a=e.call(this)).ad=n,a.creative=r,a.variation=s,a.muted=!1,a.impressed=!1,a.skippable=!1,a.trackingEvents={},a.lastPercentage=0,a._alreadyTriggeredQuartiles={},a.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],a.creative.trackingEvents){var u=a.creative.trackingEvents[c];a.trackingEvents[c]=u.slice(0)}return w(a.creative)?a._initLinearTracking():a._initVariationTracking(),t&&a.on("start",(function(){t.lastSuccessfulAd=Date.now()})),a}return a(o,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var t in this.variation.trackingEvents){var e=this.variation.trackingEvents[t];this.trackingEvents[t]?this.trackingEvents[t]=this.trackingEvents[t].concat(e.slice(0)):this.trackingEvents[t]=e.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(t){return"companionAd"===t.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(t){O.isValidTimeValue(t)&&(this.assetDuration=t,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(O.isValidTimeValue(t)&&"object"===r(n)){var i=this.skipDelay||-1;if(-1===i||this.skippable||(i>t?this.emit("skip-countdown",i-t):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var o=Math.round(t/this.assetDuration*100),a=[];if(t>0){a.push("start");for(var s=this.lastPercentage;s<o;s++)a.push("progress-".concat(s+1,"%"));for(var c in a.push("progress-".concat(Math.round(t))),this.quartiles)this.isQuartileReached(c,this.quartiles[c],t)&&(a.push(c),this._alreadyTriggeredQuartiles[c]=!0);this.lastPercentage=o}a.forEach((function(t){e.track(t,{macros:n,once:!0})})),t<this.progress&&this.track("rewind",{macros:n})}this.progress=t}}},{key:"isQuartileReached",value:function(t,e,n){var r=!1;return e<=n&&!this._alreadyTriggeredQuartiles[t]&&(r=!0),r}},{key:"setMuted",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof t&&"object"===r(e)&&(this.muted!==t&&this.track(t?"mute":"unmute",{macros:e}),this.muted=t)}},{key:"setPaused",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof t&&"object"===r(e)&&(this.paused!==t&&this.track(t?"pause":"resume",{macros:e}),this.paused=t)}},{key:"setFullscreen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof t&&"object"===r(e)&&(this.fullscreen!==t&&this.track(t?"fullscreen":"exitFullscreen",{macros:e}),this.fullscreen=t)}},{key:"setExpand",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof t&&"object"===r(e)&&(this.expanded!==t&&(this.track(t?"expand":"collapse",{macros:e}),this.track(t?"playerExpand":"playerCollapse",{macros:e})),this.expanded=t)}},{key:"setSkipDelay",value:function(t){O.isValidTimeValue(t)&&(this.skipDelay=t)}},{key:"trackImpression",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&(this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,t),this.track("creativeView",{macros:t})))}},{key:"error",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"===r(t)&&"boolean"==typeof e&&this.trackURLs(this.ad.errorURLTemplates,t,{isCustomCode:e})}},{key:"errorWithCode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof t&&"boolean"==typeof e&&(this.error({ERRORCODE:t},e),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead"))}},{key:"complete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("complete",{macros:t})}},{key:"notUsed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&(this.track("notUsed",{macros:t}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("otherAdInteraction",{macros:t})}},{key:"acceptInvitation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("acceptInvitation",{macros:t})}},{key:"adExpand",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("adExpand",{macros:t})}},{key:"adCollapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("adCollapse",{macros:t})}},{key:"minimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("minimize",{macros:t})}},{key:"verificationNotExecuted",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&"object"===r(e)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!t)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var n=this.ad.adVerifications.find((function(e){return e.vendor===t}));if(!n)throw new Error("No associated verification element found for vendor: ".concat(t));var i=n.trackingEvents;if(i&&i.verificationNotExecuted){var o=i.verificationNotExecuted;this.trackURLs(o,e),this.emit("verificationNotExecuted",{trackingURLTemplates:o})}}}},{key:"overlayViewDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&"object"===r(e)&&(e.ADPLAYHEAD=t,this.track("overlayViewDuration",{macros:e}))}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track(this.linear?"closeLinear":"close",{macros:t})}},{key:"skip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("skip",{macros:t})}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(t)&&this.track("loaded",{macros:t})}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null===t||"string"==typeof t)&&"object"===r(e)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,e);var i=this.clickThroughURLTemplate||t,o=n({},e);if(i){this.progress&&(o.ADPLAYHEAD=this.progressFormatted());var a=O.resolveURLTemplates([i],o)[0];this.emit("clickthrough",a)}}}},{key:"track",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.macros,i=void 0===n?{}:n,o=e.once,a=void 0!==o&&o;if("object"===r(i)){"closeLinear"===t&&!this.trackingEvents[t]&&this.trackingEvents.close&&(t="close");var s=this.trackingEvents[t],c=this.emitAlwaysEvents.indexOf(t)>-1;s?(this.emit(t,{trackingURLTemplates:s}),this.trackURLs(s,i)):c&&this.emit(t,null),a&&(delete this.trackingEvents[t],c&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(t),1))}}},{key:"trackURLs",value:function(t){var e,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(a.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(a.ADPLAYHEAD=this.progressFormatted())),null!==(e=this.creative)&&void 0!==e&&null!==(r=e.universalAdIds)&&void 0!==r&&r.length&&(a.UNIVERSALADID=this.creative.universalAdIds.map((function(t){return t.idRegistry.concat(" ",t.value)})).join(",")),this.ad&&(this.ad.sequence&&(a.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(a.ADTYPE=this.ad.adType),this.ad.adServingId&&(a.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(a.ADCATEGORIES=this.ad.categories.map((function(t){return t.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(a.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),O.track(t,a,o)}},{key:"convertToTimecode",value:function(t){if(!O.isValidTimeValue(t))return"";var e=1e3*t,n=Math.floor(e/36e5),r=Math.floor(e/6e4%60),i=Math.floor(e/1e3%60),o=Math.floor(e%1e3);return"".concat(O.addLeadingZeros(n,2),":").concat(O.addLeadingZeros(r,2),":").concat(O.addLeadingZeros(i,2),".").concat(O.addLeadingZeros(o,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),o}(z);t.VASTClient=dt,t.VASTParser=at,t.VASTTracker=lt,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){e.getDeviceInfo=function(){var t,e,n={os:"",osv:"0",make:"",model:"",mobile:!1};try{(t=navigator.userAgent)||(t=window.navigator.userAgent)}catch(e){t=window.navigator.userAgent}if(/iPod/i.test(t))n.os="iOS",n.osv=(t.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPod",n.mobile=!0;else if(/iPhone/i.test(t))n.os="iOS",n.osv=(t.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPhone",n.mobile=!0;else if(/iPad/i.test(t))n.os="iOS",n.osv=(t.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPad",n.mobile=!0;else if(/Android/i.test(t)){if(n.os="Android",n.mobile=!0,e=/\Android.([\d\.]+).*;\s(\w*;\s)?(.*)\sBuild.*\)/i.exec(t)){n.osv=e[1]||"0";var r=e[3]||"";/HTC/i.test(r)?(n.make="HTC",e=/HTC\s(.*)/i.exec(r),n.model=e?e[1]:""):/ASUS/i.test(r)?(n.make="ASUS",e=/ASUS\s(.*)/i.exec(r),n.model=e?e[1]:""):/ALCATEL/i.test(r)?(n.make="ALCATEL",e=/ALCATEL\s(.*)/i.exec(r),n.model=e?e[1]:""):/BLU/i.test(r)?(n.make="BLU",e=/BLU\s(.*)/i.exec(r),n.model=e?e[1]:""):/ME17\d/i.test(r)?(n.make="ASUS",n.model=r):/Nexus/i.test(r)?(n.make="Google",n.model=r):/Lenovo/i.test(r)?(n.make="Lenovo",/Lenovo\s(.*)/i):/IdeaTab/i.test(r)?(n.make="Lenovo",n.model=r):/Huawei/i.test(t)?(n.make="Huawei",n.model=r):/SGP\d/i.test(r)||/LT[1-9]\d/i.test(r)?(n.make="Sony",n.model=r):/HP/i.test(r)?(n.make="HP",e=/HP\s(.*)/i.exec(r),n.model=e?e[1]:""):/A1-/i.test(r)||/B11-/i.test(r)?(n.make="Acer",n.model=r):/GT-/i.test(r)?(n.make="Samsung",e=/(GT-.*)/i.exec(r),n.model=e?e[1]:""):/SM-/i.test(r)?(n.make="Samsung",e=/(SM-.*)/i.exec(r),n.model=e?e[1]:""):/SPH-/i.test(r)?(n.make="Samsung",e=/(SPH-.*)/i.exec(r),n.model=e?e[1]:""):/SCH-/i.test(r)?(n.make="Samsung",e=/(SCH-.*)/i.exec(r),n.model=e?e[1]:""):/SGH-/i.test(r)?(n.make="Samsung",e=/(SGH-.*)/i.exec(r),n.model=e?e[1]:""):/DROID/i.test(r)?(n.make="Motorola",e=/(DROID.*)/i.exec(r),n.model=e?e[1]:""):/XT/i.test(r)?(n.make="Motorola",e=/(XT.*)/i.exec(r),n.model=e?e[1]:""):/LG-/i.test(r)?(n.make="LG",e=/(LG-.*)/i.exec(r),n.model=e?e[1]:""):/VS/i.test(r)?(n.make="LG",e=/(VS.*)/i.exec(r),n.model=e?e[1]:""):/Z[1-9]/i.test(r)?(n.make="ZTE",e=/(Z[1-9].*)/i.exec(r),n.model=e?e[1]:""):/NX[1-9]/i.test(r)?(n.make="NEXTBOOK",e=/(NX[1-9].*)/i.exec(r),n.model=e?e[1]:""):/C5[1-9]/i.test(r)?(n.make="Kyocera",e=/(C5[1-9].*)/i.exec(r),n.model=e?e[1]:""):n.model=r}}else/Windows.Phone/i.test(t)||/WPDesktop/i.test(t)?(n.os="WindowsPhone",n.osv=(t.match(/Windows.Phone\s([0-9]+\.[0-9])/)||[""])[1]||8,n.mobile=!0,/NOKIA/i.test(t)&&(n.make="Nokia",e=/NOKIA;\s(.*?)(;|\))/i.exec(t),n.model=e?e[1]:"")):/BlackBerry/i.test(t)||navigator.userAgent.match(/BB10/i)?(n.os="BlackBerry",t.indexOf("Version/")>=0?(e=/Version\/(.*?)\s/i.exec(t),n.osv=e?e[1]:""):(e=/BlackBerry.*\/(.*?)\s/i.exec(t),n.osv=e?e[1]:""),n.mobile=!0):/Windows/i.test(t)?(n.os="Windows",e=/Windows\sNT\s(.*?)(;|\)|\s)/i.exec(t),n.osv=e?e[1]:""):/Mac\sOS/i.test(t)&&(n.os="MacOS",e=/Mac\sOS\sX\s(.*?)(;|\)|\s)/i.exec(t),n.osv=e?e[1]:"");return n}},function(t,e,n){"use strict";n.r(e);n(100);var r,i=n(95),o=n(78),a=n(1),s={cvars:{IP:"",DNT:"0"},ap:!0,id:"c",vwf:1,as:!1,mvr:1.01,ho:!1,adServerError:!0,esrv2:"https://e.channelexco.com/event",schedule:{initialPreRollTimeout:10,minSecondsBetweenFetch:0,slots:{interval:15},content:{limit:60,mas:2,wait:10},time:{wait:10,limit:60,mas:1,start:15}},grh:{woiv:!1,wopt:3,wolud:"cce98297-b1c1-4314-aeed-42a06fa8f12f"},co:!1,impDetail:!0,moat:{ids:{level3:"[DMID]",level2:"",level4:"",level1:"",slicer1:""},partnerCode:"cedatojsvideo958042602703",rate:0}},c=[],u=n(36),d=new Set(["20","21","22","23","24","25","26"]),l=function(){return"s-".concat((t=Array.from(d))[Math.floor(Math.random()*t.length)]);var t},p=n(88),h=n(9),f=n(82),v=n(10),m=n(89),A=n(6),y=n(56),b=n(19),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},E=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},_=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},T=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function I(t,e){var n,i;return E(this,void 0,void 0,(function(){var o,s,c,d,l,b,E,T,I,w,R;return _(this,(function(_){switch(_.label){case 0:return _.trys.push([0,7,,8]),r?[2,r]:!1===t.overrides.monetize?[2,C(t.adServerURL)]:(t.isApp&&Object(p.a)(t),o=void 0,s=void 0,c=void 0,[4,Object(f.c)(t.overrides,{timeout:1e3})]);case 1:return(d=_.sent())&&d.demand_list&&d.supply_params?(o=d.demand_list,s=d.supply_params,c=d.config,O(t.playerId,o),l=Object(v.o)(t.adServerURL),[2,{gpv:o,params:g(g(g({},s),l),{isInStream:c.isInStream}),bidbirdExtraParams:d.extraParams}]):(t.isNetwork&&Object(m.a)(t),b={pub:t.isNetwork?0:1,pageLoadUid:t.pageLoadUid,playerSessionId:t.playerSessionId,opportunityDateHour:t.opportunityDateHour,ijsn:!0,b64e:1,sfid:t.publisher.sellerId,skipabillity:(null===(n=t.skipButton)||void 0===n?void 0:n.enabled)?1:0,contentType:P(t)},t.isMlSession&&(null===(i=t.experimental)||void 0===i?void 0:i.maxdemand)&&(b.mdr=t.experimental.maxdemand),t.adServerURL=Object(h.q)(t.adServerURL,b),t.adServerURL=Object(y.a)(t.adServerURL),[4,fetch(t.adServerURL,{credentials:"include"})]);case 2:return E=_.sent(),T=null,E.headers.get("Content-Type").includes("text/plain")?(I=S,[4,E.text()]):[3,4];case 3:return T=I.apply(void 0,[_.sent()]),[3,6];case 4:return[4,E.json()];case 5:T=_.sent(),_.label=6;case 6:if(!T)throw new Error("Not able to parse GPV resonse");return o=T.demand_list,s=T.supply_params,O(t.playerId,o),[2,r={gpv:o,params:s}];case 7:return w=_.sent(),a.a.error("Failed to get GPV response. Fallback to defaults",w,{category:{main:A.a.MONETIZATION,sub:A.b.GPV}}),R=C(t.adServerURL),e.send(u.b.MCD_SERVER_ERROR,{extraData:{defaults:R}}),[2,R];case 8:return[2]}}))}))}function O(t,e){window.__EXCO.AP=window.__EXCO.AP||{},window.__EXCO.AP[t]=window.__EXCO.AP[t]||{},window.__EXCO.AP[t].gpv=e}function S(t){try{var e=atob(t);return JSON.parse(e)}catch(t){a.a.error("Failed to decode b64 GPV response",t,{category:{main:A.a.MONETIZATION,sub:A.b.GPV}})}return null}function C(t){var e={},n=new URL(t).searchParams;return n.set("mid",l()),n.set("sd","channelexco.com"),n.forEach((function(t,n){return e[n]=t})),{gpv:T([s],c,!0),params:e}}function P(t){var e=Object(b.c)({isOutstream:t.isOutstream,userInteraction:!1}).plcmt;return 4===e?"out_stream":1===e?"in-stream":"accompanied_content"}var w=n(20),R=n(2),D=n(53),L=n(8),N=n(70),k=n(11),j=n(46),x=n(94),U=n(28),M=n(22),V=n(44),F=n(23),B=n(16),q=n(40),G=n(34),H=n(45),W=n(0),Y=n(66),J=n(61),z=n(72),K=(n(29),"https://rumcdn.geoedge.be/papi.js"),X=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Q=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Z=!1;function $(t){return X(this,void 0,void 0,(function(){var e=this;return Q(this,(function(n){return Z?[2]:[2,new Promise((function(n,r){return X(e,void 0,void 0,(function(){var e;return Q(this,(function(i){var o,a;return a=t,(o={}).geoedge=o.geoedge||{q:[],key:a},(e=o.geoedge).q.push((function(){Z=!0,n(e)})),Object(v.k)({src:K,className:t,windowRefs:{geoedge:e}}).then((function(t){!function(t){if(t&&t.document){var e=t.document;if(!function(t){return Array.from(t.getElementsByTagName("link")).some((function(t){return t.href===K}))}(e)){var n=e.createElement("link");n.rel="dns-prefetch",n.href=K,e.head.appendChild(n);var r=e.createElement("link");r.rel="preconnect",r.href=K,e.head.appendChild(r)}}}(t)})).catch((function(t){return r(t)})),[2]}))}))}))]}))}))}var tt=n(5),et=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function nt(t){return t.filter((function(t){return k.a.url(t)}))}function rt(t){return Object(tt.p)(t)?function(t){var e=[];try{var n=t.ad;if(n&&n.data){var r=n.data;e.push(r.mediaFile),e.push(r.mediaUrl),e.push(r.clickThroughUrl),e.push(r.clickThroughURL)}}catch(t){a.a.error("Error extracting urls from GAM ad: ",t||new Error,{category:{main:A.a.MONETIZATION}})}return nt(e)}(t):function(t){var e=[];if(!t)return e;try{e.push.apply(e,function(t){return it(t.impressionURLTemplates)}(t)),e.push.apply(e,function(t){return it(t.errorURLTemplates)}(t)),e.push.apply(e,function(t){var e=[],n=t;n.adVerifications&&Array.isArray(n.adVerifications)&&n.adVerifications.forEach((function(t){"string"==typeof t&&k.a.url(t)?e.push(t):t.resource&&(k.a.url(t.resource)?e.push(t.resource):k.a.url(t.resource.url)&&e.push(t.resource.url)),t.trackingEvents&&Object.values(t.trackingEvents).forEach((function(t){Array.isArray(t)&&e.push.apply(e,t)}))}));return e}(t)),t.creatives&&t.creatives.forEach((function(t){return e.push.apply(e,function(t){var e=[];return e.push.apply(e,et(et(et(et([],function(t){var e=[];t.trackingEvents&&Object.values(t.trackingEvents).forEach((function(t){Array.isArray(t)&&e.push.apply(e,t)}));return e}(t),!1),function(t){var e,n=[],r=t;r.icons&&n.push.apply(n,r.icons);r.mediaFiles&&n.push.apply(n,r.mediaFiles.map((function(t){return t.fileURL})));r.videoClickTrackingURLTemplates&&n.push.apply(n,r.videoClickTrackingURLTemplates);"string"==typeof r.videoClickThroughURLTemplate?n.push(r.videoClickThroughURLTemplate):(null===(e=r.videoClickThroughURLTemplate)||void 0===e?void 0:e.url)&&n.push(r.videoClickThroughURLTemplate.url);r.videoCustomClickURLTempaltes&&n.push.apply(n,r.videoCustomClickURLTempaltes);return n}(t),!1),function(t){var e=[],n=t;n.variations&&n.variations.forEach((function(t){e.push.apply(e,it(t.nonLinearClickTrackingURLTemplates)),e.push.apply(e,it(t.nonLinearClickTrackingURLTemplates)),t.iframeResource&&e.push(t.iframeResource),t.htmlResource&&e.push(t.htmlResource)}));return e}(t),!1),function(t){var e=[],n=t;n.variations&&n.variations.forEach((function(t){e.push.apply(e,it(t.companionClickThroughURLTemplate)),e.push.apply(e,it(t.companionClickTrackingURLTemplate)),e.push.apply(e,it(t.companionClickTrackingURLTemplates)),e.push(t.htmlResource),e.push(t.iframeResource),e.push(t.staticResource),t.trackingEvents&&Array.isArray(t.trackingEvents.creativeView)&&e.push.apply(e,it(t.trackingEvents.creativeView))}));return e}(t),!1)),e}(t))})),t.extensions&&t.extensions.forEach((function(t){return e.push.apply(e,function t(e){var n=[];e&&e.children&&e.children.forEach((function(e){k.a.url(e.value)&&n.push(e.value),e.children&&e.children.forEach((function(e){return n.push.apply(n,t(e))}))}));return n}(t))}))}catch(t){a.a.error("Error extracting urls from DM VAST response: ",t||new Error,{category:{main:A.a.MONETIZATION}})}return nt(e)}(t.ad)}function it(t){return Array.isArray(t)?t.map((function(t){return ot(t)})):[ot(t)]}function ot(t){return t?"string"==typeof t?t:t.url?t.url:"":""}var at=n(47);function st(t){var e,n;return(null===(n=null===(e=t.ad)||void 0===e?void 0:e.system)||void 0===n?void 0:n.value)||"N/A"}var ct=null,ut=function(t,e){void 0===e&&(e=new Error(t)),a.a.error("GeoEdge: ".concat(t),e,{category:{main:A.a.MONETIZATION,sub:A.b.GEO_EDGE}})};var dt=function(){function t(t){this.geoedge=null,this.started=!1,this.loaded=!1,this.pendingIMAAds=new Map,this.config=t,this.players=Object(R.a)()}return t.prototype.startMonitoring=function(){!this.started&&this.isEnabled()&&(this.started=!0,this.loadAPI(),a.a.info("GeoEdge: loading with config",this.config),this.listen())},t.prototype.listen=function(){W.b.on(W.a.INTERNAL.AD.FETCHED,this.onAdFetched.bind(this)),W.b.on(W.a.INTERNAL.AD.IMA_AD_LOADED,this.onIMAAdLoaded.bind(this))},t.prototype.isEnabled=function(){return(this.config.exco||this.config.pub)&&!!this.config.blockListId},t.prototype.loadAPI=function(){var t=this;return this.loadedPromise=new Promise((function(e){$(t.config.blockListId).then((function(n){t.loaded=!0,t.geoedge=n,e()})).catch((function(t){ut("Failed to load GeoEdge SDK",t)}))})),this.loadedPromise},t.prototype.onAdFetched=function(t){var e=this;this.shouldMonitor(t.ad)&&(this.loaded?this.monitorAd(t):this.loadedPromise.then((function(){return e.monitorAd(t)})))},t.prototype.onIMAAdLoaded=function(t){this.pendingIMAAds.has(t.uniqId)&&(this.pendingIMAAds.delete(t.uniqId),this.monitorAd({ad:t}))},t.prototype.shouldMonitor=function(t){var e=Object(tt.y)(t)?this.config.pub:this.config.exco;return!Object(tt.m)(t)&&e},t.prototype.monitorAd=function(t){var e=this;try{var n=t.ad;if(Object(tt.p)(n)&&!n.ad)return void this.pendingIMAAds.set(n.uniqId,n);if(!n.adContainer)return void n.adContainersReady.then((function(){return e.applyMonitoring(n)}));this.applyMonitoring(n)}catch(t){ut("Failed to monitor ad",t)}},t.prototype.applyMonitoring=function(t){var e=this,n=!1,r=function(t,e){var n,r,i,o;try{var s={slot_element_id:null===(n=t.adContainer)||void 0===n?void 0:n.getAttribute("id"),width:e.width,height:e.height,advertiser_name:t.bidder,demand_name:t.vastId.toString(),creative_id:(null===(r=t.creative)||void 0===r?void 0:r.id)||(null===(i=t.ad)||void 0===i?void 0:i.id),cpm:Object(at.c)(t),currency:"USD",adomains:t.advertiserDomains,custom_1:"publisher:".concat(null===(o=e.publisher)||void 0===o?void 0:o.name),custom_2:"supply_demand:".concat(e.playerId.toString(),"_").concat(t.vastId.toString()),custom_3:"ad-system:".concat(st(t))};return t.vastURL&&(s.vast_url=t.vastURL),t.vastXml&&(s.vast_xmls=[t.vastXml]),Object(tt.p)(t)&&Object.assign(s,function(t){var e=t.ad.data;if(e){return{slot_element_id:e.adId,creative_id:e.creativeId,vast_creative_id:e.creativeId,vast_creative_ad_id:e.creativeAdId,universal_ad_ids:e.universalAdIds,custom_3:"ad-system:".concat(e.adSystem||"N/A")}}}(t)),s}catch(t){throw a.a.error("GeoEdge: Failed to get impression metadata",t,{category:{main:A.a.MONETIZATION,sub:A.b.GEO_EDGE}}),t}}(t,this.players);a.a.info("GeoEdge: Monitoring ad",{id:t.vastId,type:t.type,metadata:r});var i=this.geoedge.impression(r),o=rt(t);if(i.shouldBlock(o))n=!0,a.a.info("GeoEdge: immediate ad block",{urls:o,id:t.vastId,type:t.type,metadata:r}),this.emitBlockedEvent({ad:t,creativeId:r.creative_id});else{var s=function(o){n||(a.a.info("GeoEdge: Ad blocked by event",{id:t.vastId,data:o,metadata:r}),e.emitBlockedEvent({ad:t,creativeId:r.creative_id}),i.offEvent(e.geoedge.EVENTS.BLOCK,s))};i.onEvent(this.geoedge.EVENTS.BLOCK,s,{once:!0}),this.monitorIframe(t,i)}},t.prototype.emitBlockedEvent=function(t){var e=t.ad,n=t.creativeId;W.b.emit(W.a.INTERNAL.AD.BLOCKED,{ad:e,creativeId:n})},t.prototype.monitorIframe=function(t,e){if(t.adContainer)try{for(var n=t.adContainer.querySelectorAll("iframe"),r=0;r<n.length;r++)e.monitorIframe(n[r])}catch(t){ut("Failed to monitor iframe",t)}else ut("Failed to monitor iframe for ".concat(t.vastId,", ad container not found"))},t}(),lt=function(){return(lt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},pt=function(){function t(t){void 0===t&&(t={}),this.skip=0;var e=t.params,n=void 0===e?{}:e;this.bidFloor=n.bidfloor||[],this.maxDuration=n.maxduration||[],this.placements=n.placements||[],this.users=n.users||[],this.startIndexPrice=Math.floor(Math.random()*this.bidFloor.length),this.startIndexDuration=Math.floor(Math.random()*this.maxDuration.length),this.placementsIndex=Math.floor(Math.random()*this.placements.length),this.usersIndex=Math.floor(Math.random()*this.users.length)}return t.prototype.getDemandFloorForAuction=function(){var t=this.bidFloor[this.startIndexPrice];return this.startIndexPrice++,this.startIndexPrice>=this.bidFloor.length&&(this.startIndexPrice=0),t},t.prototype.getDemandMaxDurationForAuction=function(){return this.startIndexDuration>=this.maxDuration.length&&(this.startIndexDuration=0),this.maxDuration[this.startIndexDuration]},t.prototype.getDemandSkipForAuction=function(){return this.skip},t.prototype.flipSkip=function(){0===this.skip?this.skip=1:this.skip=0},t.prototype.getPlacementForAuction=function(){var t=Object(b.c)({forceInstream:R.b.isInStream,isOutstream:R.b.isOutstream,userInteraction:R.b.userInteraction});return"outstream"===t.context||1===t.plcmt?null:(this.placementsIndex>=this.placements.length&&(this.placementsIndex=0),this.placements[this.placementsIndex])},t.prototype.getRandomParams=function(){var t={video:lt({maxduration:this.getDemandMaxDurationForAuction(),skip:this.getDemandSkipForAuction()},this.getPlacementForAuction()),disableUserId:this.getUsersForAuction()};return this.flipSkip(),this.placementsIndex++,this.startIndexDuration++,this.usersIndex++,t},t.prototype.getUsersForAuction=function(){return this.usersIndex>=this.users.length&&(this.usersIndex=0),!this.users[this.usersIndex]},t}(),ht=n(21),ft=n(25),vt=n(35),mt=n(64),At=function(){function t(){}return t.shouldSyncUser=function(t){return Object(vt.e)(t)},t}(),yt=function(){function t(){}return t.shouldSyncUser=function(t){return Object(vt.h)(t.geoLocation)},t}(),bt=function(){function t(){}return t.shouldSyncUser=function(t){return Object(vt.h)(t.geoLocation)||!Object(vt.d)(t.geoLocation)},t}(),gt=function(){function t(t){var e;this.config=t,this.wasCookieSyncTriggered=!1,this.cookieSyncHandlers=((e={})[ft.b.TCF]=At,e[ft.b.GPP]=yt,e[ft.b.NO_CONSENT]=bt,e)}return t.prototype.handleConsentResponse=function(t){if(!this.wasCookieSyncTriggered){var e=this.cookieSyncHandlers[t.consentType];e?e.shouldSyncUser(t)&&(Object(mt.d)(t,this.config),this.wasCookieSyncTriggered=!0):a.a.warn("Consent: Skipping cookie sync because was not able to locate cookie sync handler for consent type",t.consentType)}},t}(),Et=n(73),_t=n(32),Tt=n(7),It=n(87),Ot=n(85),St=n(54),Ct=function(t,e,n,r){void 0===r&&(r=6e4);var i=!1,o=setTimeout((function(){i=!0}),r);t(e,(function(t){clearTimeout(o),i||n(t)}))},Pt=function(t,e){Object(Ot.c)(t),Object(Ot.b)(t,(function(t){return e(t)}))},wt=function(t,e){Object(It.b)(t,(function(t){e(t)}))},Rt=function(t){return{consentType:Object(St.b)(t),consentData:t||{}}},Dt=function(t,e,n){(function(t){var e,n;return!!(null===(n=null===(e=t.rawConfig)||void 0===e?void 0:e.reporting)||void 0===n?void 0:n.sendConsentAvailableEvent)})(e)&&(t.addExtraData({consentAvailabilityEvents:!0}),e.isAmp?function(t,e){Ct(wt,W.b,(function(n){t.sendConsentAvailabilityEvent(u.b.MCD_AMP_VIDEO_API_AVAILABLE,e,Rt(n))})),Ct(Pt,window,(function(n){t.sendConsentAvailabilityEvent(u.b.MCD_AMP_API_AVAILABLE,e,Rt(n))}))}(t,n):function(t,e){Object(vt.i)(window,e,"__tcfapi",(function(){t.sendConsentAvailabilityEvent(u.b.MCD_TCF_API_AVAILABLE,e)})),Object(vt.i)(window,e,"__gpp",(function(){t.sendConsentAvailabilityEvent(u.b.MCD_GPP_API_AVAILABLE,e)}))}(t,n))},Lt=n(17),Nt=function(){function t(t){this.players=t,this.VIEWABLE_THRESHOLD_MS=1e3,this.initializeEventListeners()}return t.prototype.initializeEventListeners=function(){W.b.on(W.a.AD.IMPRESSION,this.onAdImpression.bind(this)),W.b.on(W.a.INTERNAL.AD.TIME_UPDATE,this.onTimeUpdate.bind(this)),W.b.on(W.a.AD.COMPLETED,this.stopTrack.bind(this)),W.b.on(W.a.AD.ERROR,this.stopTrack.bind(this)),W.b.on(W.a.AD.SKIPPED,this.stopTrack.bind(this)),this.players.on(Lt.a.PLAYER_IN_VIEW,this.onPlayerInView.bind(this)),this.players.on(Lt.a.PLAYER_OUT_OF_VIEW,this.onPlayerOutOfView.bind(this))},t.prototype.onAdImpression=function(t){var e=t.demand;this.startTracking(e)},t.prototype.onPlayerOutOfView=function(){this.tracker&&(this.tracker.inView=!1)},t.prototype.onPlayerInView=function(){this.tracker&&(this.tracker.inView=!0)},t.prototype.stopTrack=function(t){var e,n,r=t.demand;this.tracker&&(null===(n=null===(e=this.tracker)||void 0===e?void 0:e.playerData)||void 0===n?void 0:n.uniqAuctionId())===(null==r?void 0:r.uniqAuctionId())&&this.stopTracking()},t.prototype.onTimeUpdate=function(t){var e=t.demand;if(this.tracker&&this.tracker.playerData.uniqAuctionId()===e.uniqAuctionId()&&this.tracker&&this.tracker.inView&&!this.tracker.hasFiredViewableEvent){var n=Date.now(),r=n-(this.tracker.lastTS||0);this.tracker.totalViewTime+=r,this.tracker.lastTS=n,this.tracker.totalViewTime>=this.VIEWABLE_THRESHOLD_MS&&!this.tracker.hasFiredViewableEvent&&this.fireViewableEvent()}},t.prototype.startTracking=function(t){this.tracker={playerData:t,lastTS:0,totalViewTime:0,hasFiredViewableEvent:!1,inView:this.players.isInView}},t.prototype.fireViewableEvent=function(){this.tracker.hasFiredViewableEvent=!0,this.tracker.timerId&&(clearTimeout(this.tracker.timerId),this.tracker.timerId=void 0),this.players.eventDispatcher.sendViewableAdImpressionEvent(this.tracker.playerData,this.players),this.stopTracking()},t.prototype.stopTracking=function(){this.tracker&&(this.tracker=null)},t}(),kt=function(){return(kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},jt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},xt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ut=n(114),Mt=n(115);var Vt=function(t){return jt(void 0,void 0,void 0,(function(){var e,n,r,s,c,d,l,p,h,f,v,m,A,y,b,g,E;return xt(this,(function(_){switch(_.label){case 0:return _.trys.push([0,13,,14]),Object(W.c)(t.NgEvents),Object(a.b)(t),(e=function(t){var e,n,r,i;(!Number.isFinite(null===(e=null==t?void 0:t.reporting)||void 0===e?void 0:e.eventSamplingRate)||(null===(n=null==t?void 0:t.reporting)||void 0===n?void 0:n.eventSamplingRate)<0||(null===(r=null==t?void 0:t.reporting)||void 0===r?void 0:r.eventSamplingRate)>100)&&(t.reporting.eventSamplingRate=10);t.experimental&&(null===(i=t.experimental)||void 0===i?void 0:i.enable)&&(t.isMlSession=Object(G.a)(t.experimental.distribution));t.reqSampled=Object(G.a)(t.reporting.eventSamplingRate),t.opportunityDateHour=(new Date).toISOString().replace(/T/," ").replace(/\..+/,"");var o=new u.a(t);return o.addBaseAttribute("reqSampled",t.reqSampled),o.addBaseAttribute("opportunityDateHour",t.opportunityDateHour),o}(t)).send(u.b.MCD_OPPORTUNITY),n={country:t.country,region:t.rawConfig.region},Dt(e,t,n),r=Object(ht.e)(window,t,n),s=new gt(t),r.onConsent((function(t){s.handleConsentResponse(t)})).listen(),t.isHumanSession=Object(Et.c)(t),[4,I(t,e)];case 1:return c=_.sent(),H.default.isEnabled(t,H.PLUGINS.TABOOLA)?[4,H.default.load(H.PLUGINS.TABOOLA,{callbacks:t.callbacks})]:[3,4];case 2:return d=_.sent(),l=c,[4,d.apply(c.gpv)];case 3:l.gpv=_.sent(),_.label=4;case 4:return p=function(t,e,n,r){var s,c,u,d,l,p,h,f=t.adServerURL,v=t.overrides,m=e.gpv,A=e.params,y=e.bidbirdExtraParams,b=Object(o.b)(A),g=m.find((function(t){return"c"===t.id}));b.consentListener=r,b.rawConfig=t.rawConfig,b.inStream=g.inStream||null,y&&(v.customMacros=v.customMacros||{},v.customMacros.gpid=y.gpid,v.customMacros.ortb2=y.ortb2);Object(R.c)(b),b.cdnPrefix=t.cdnPrefix,b.version=A.sid4,b.bidbird=Boolean(A.bb),b.renderingContext=t.renderingContext||document,b.displayFallback=t.displayFallback,b.displayFallback&&b.displayFallback.enabled&&(b.displayFallback.demand=e.gpv.find((function(t){return t.demand_display_fallback})));b.userIdentities=t.userIdentities,b.publisher=t.publisher,b.excoPlayerId=t.excoPlayerId,b.networkId=+(null===(s=t.publisher.seat)||void 0===s?void 0:s.id)||+t.networkId,b.pageLoadUid=t.pageLoadUid,b.country=t.country,b.region=t.rawConfig.region,b.browser=t.browser,b.os=t.os,b.rootDivElem=Object(D.a)(b),b.info=Mt.getDeviceInfo(),b.isAmp=t.isAmp,b.src=f,b.autoplay=![q.a.CLICK_TO_PLAY].includes(t.playbackMode),b.mainAutoplay="ads",b.hlsConfig=v.hlsConfig,b.hlsConfig.cdnPrefix=t.cdnPrefix,b.allowSound="must"===v.allowSound,b.customParams=v.customParams,b.customMacros=v.customMacros,b.adViewabilityDelay=v.adViewabilityDelay,b.eventDispatcher=n,b.iiqPercentage=v.iiqPercentage,b.iiqEnabled=t.iiqEnabled,b.liveintentConfig=t.liveintentConfig,b.liveintentConfig.enabled&&(b.liveintentConfig.active=Object(z.c)(b.liveintentConfig),b.liveintentConfig.isExcoId=Object(z.b)(b.liveintentConfig));b.iiqPassPPIDToGoogle=t.iiqPassPPIDToGoogle,b.externalViewabilityFunction=v.viewability,b.sendRemoteLogs=t.sendRemoteLogs,b.adServerURL=f,!1===v.monetize&&(b.monetize=!1),b.isNetwork=t.isNetwork,b.networkParams=t.networkParams,b.gpvData=Object(i.b)(b,m,t.supplyExtraParams),b.prebidConfig=function(t,e){var n=Object(F.e)(t);return n.pbsSrc=function(t){var e=t.adsConfig,n=(void 0===e?{}:e).pb,r=void 0===n?{}:n;if(r&&r.pbsSrc)return r.pbsSrc;return"https://ps.ex.co/openrtb2/auction"}(e.rawConfig),n.src=e.prebidBundleURL||"https://cdn.ex.co/player/pb/4.9.0/expb.js",n}(b,t),b.priceConfig=t.priceConfig,b.playbackMode=t.playbackMode||q.a.AUTO_PLAY,b.isOutstream=t.isOutstream,b.plugins=t.plugins,b.callbacks=t.callbacks,b.extraParams=function(t){var e,n;try{return(null===(e=t.supplyExtraParams)||void 0===e?void 0:e.extraParams)?JSON.parse(null===(n=t.supplyExtraParams)||void 0===n?void 0:n.extraParams):null}catch(t){return a.a.warn("Failed to parse extra params",t),null}}(t),b.applyGoogleMacrosAndNoFactor=Object(G.a)(100),b.reporting=t.reporting,b.externalVastUrl=t.externalVastUrl,b.skipConfig=t.skipButton||{enabled:!1,offset:null},b.playerSessionId=t.playerSessionId,b.experimental=t.experimental,b.videoTeasers=t.videoTeasers,b.isHumanSession=t.isHumanSession,b.isMlSession=t.isMlSession,b.isMlSession&&(b.randomParams=new pt(b.experimental));(function(t){var e,n;k.a.object(null===(e=t.extraParams)||void 0===e?void 0:e.ortbParams)&&(t.ortbExtraParams=t.extraParams.ortbParams,k.a.object(null===(n=t.ortbExtraParams)||void 0===n?void 0:n.video)&&(t.ortbVideoObject=t.ortbExtraParams.video))})(b),b.globalPricing=t.globalPricing,b.sessionImpressionCap=t.sessionImpressionCap,b.isApp=t.isApp,b.isNativeSdk=t.isNativeSdk,t.isNativeSdk&&(b.nativeSdkConfig=t.nativeSdk);b.isApp&&(b.appParams=t.appParams,!b.domain&&(null===(c=b.appParams)||void 0===c?void 0:c.name)&&(b.domain="app://".concat(encodeURIComponent(b.appParams.name))),(null===(u=b.appParams)||void 0===u?void 0:u.domain)&&(b.domainDetected=b.appParams.domain));b.resellersJSONDomain=t.publisher.resellersJSONDomain||t.resellersJSONDomain,b.isPrebidPDSession=Object(G.a)(50),b.sessionConfig.pt=b.pt||{},b.sessionConfig.pt.exco=(null===(d=b.pt)||void 0===d?void 0:d.exco)||[],b.sessionConfig.pt.publisher=(null===(l=b.pt)||void 0===l?void 0:l.publisher)||[],b.sessionConfig.pt.publisher.length>0&&a.a.info("Has publisher price table with ".concat(b.sessionConfig.pt.publisher.length," entries"));return a.a.log("Session Config",b.sessionConfig),b.auctionRetry=t.auctionRetry,b.excoUserIdentityConfig=t.excoUserIdentityConfig,b.pubUserIdentityConfig=t.pubUserIdentityConfig,b.dropBidsUnderOriginalCPM=null===(h=null===(p=t.rawConfig)||void 0===p?void 0:p.adsConfig)||void 0===h?void 0:h.dropBidsUnderOriginalCPM,new Nt(b),b}(t,c,e,r),(null===(y=null===(A=window.__EXCO)||void 0===A?void 0:A.PREBID)||void 0===y?void 0:y.expbjs)?(qt(p,window.__EXCO.PREBID.expbjs),[3,8]):[3,5];case 5:return k.a.promise(null===(g=null===(b=window.__EXCO)||void 0===b?void 0:b.PREBID)||void 0===g?void 0:g.fetchScriptPromise)?[4,window.__EXCO.PREBID.fetchScriptPromise.catch((function(){return{initialized:!1}}))]:[3,7];case 6:return(h=_.sent()).initialized&&qt(p,h),[3,8];case 7:Bt(p,!1),_.label=8;case 8:return Object(tt.v)(Tt.b)&&Bt(p,!0),H.default.isEnabled(t,H.PLUGINS.DISPLAY_FALLBACK)?[4,H.default.load(H.PLUGINS.DISPLAY_FALLBACK)]:[3,11];case 9:return[4,(f=_.sent()).apply({rootId:t.excoPlayerId,pageUrl:p.domain,config:t.displayFallback,demand:null===(E=t.displayFallback)||void 0===E?void 0:E.demand,players:p})];case 10:_.sent(),_.label=11;case 11:return W.b.once(Y.a.AD.SLOT_START,(function(){p.firstSlotStart=!0})),function(t,e){var n,r,i,o,a,s,c,u,d,l,p,h;t.addBaseAttribute("flamingo",e.isPriceFromMLModel),e.isPriceFromMLModel&&t.addBaseAttribute("mv",null===(n=null==e?void 0:e.flModel)||void 0===n?void 0:n.name),t.addBaseAttribute("arsAbTest",null===(i=null===(r=null==e?void 0:e.flModel)||void 0===r?void 0:r.ab)||void 0===i?void 0:i.name),t.addBaseAttribute("state",null===(o=e.location)||void 0===o?void 0:o.state),t.addBaseAttribute("dma",null===(a=e.location)||void 0===a?void 0:a.dma),t.addBaseAttribute("city",null===(s=e.location)||void 0===s?void 0:s.city),t.addBaseAttribute("app",e.isApp),t.addBaseAttribute("gdpm",e.isPriceFromMLModel?"".concat(null===(c=null==e?void 0:e.flModel)||void 0===c?void 0:c.name," + ").concat(null===(d=null===(u=null==e?void 0:e.flModel)||void 0===u?void 0:u.ab)||void 0===d?void 0:d.name):"".concat(null===(l=null==e?void 0:e.sessionConfig)||void 0===l?void 0:l.mv," + ").concat(null===(h=null===(p=null==e?void 0:e.flModel)||void 0===p?void 0:p.ab)||void 0===h?void 0:h.name)),e.isApp&&t.addBaseAttribute("appParams",e.appParams)}(e,p),p.isIvt&&Object(V.d)(p),W.b.on(Y.a.PAGE.URL_CHANGED,(function(t){var e=t.pageUrl;e&&!p.isApp&&(p.domain=e,f&&f.update({pageUrl:e}))})),function(t){void 0===t&&(t=null),t&&Object(G.a)(t.sampleRate)&&!ct&&(ct=new dt(t)).startMonitoring()}(t.geoedge),Object(U.k)(p,null,t.contents),[4,Object(L.k)(p,window.CEDATO_API,c.gpv)];case 12:return v=_.sent(),Object(J.e)(),Gt(p),[2,Ft(v)];case 13:return m=_.sent(),Object(M.b)(null,"Player init error")(m),[3,14];case 14:return[2]}}))}))},Ft=function(t){return new Promise((function(e){t.on("player.ready",(function(){return e(t)}))}))};function Bt(t,e){Object(_t.c)(t,e).then((function(n){var r=e?"prebidPBJS":"prebidJS";t[r]=n,t[r].initialized=!0,n.setConfig&&Object(_t.e)(n,t,!1),W.b.on(Y.a.PAGE.URL_CHANGED,(function(e){var r=e.pageUrl;return Object(_t.f)(n,t,{pageUrl:r})}))}))}function qt(t,e){t.prebidJS=e,t.prebidJS.initialized=!0,t.prebidJS.setConfig&&Object(_t.e)(t.prebidJS,t,!1),W.b.on(Y.a.PAGE.URL_CHANGED,(function(e){var n=e.pageUrl;return Object(_t.f)(t.prebidJS,t,{pageUrl:n})}))}var Gt=function(t){return jt(void 0,void 0,void 0,(function(){return xt(this,(function(e){switch(e.label){case 0:return t.DMVAST=kt(kt({},Ut),{client:new Ut.VASTClient,parser:new Ut.VASTParser}),function(t){t.sendPixel=function(t){(new Image).src=t},t.injectScript=function(t){Object(v.l)(t)},t.playerEvents=new j.EventEmitter2({wildcard:!0,maxListeners:20}),t.serverEvents=new x.a(t,(function(t,e){var n;null===(n=navigator.sendBeacon)||void 0===n||n.call(navigator,t,e)}))}(t),t.jsCallingVpaid&&(t.beingVpaid=!0,t.vpaidContent||(t.maxAdStarts=1),Object(B.c)(t)),t.detect=function(t){var e="h";t.beingVpaid&&(e="j");var n="d";t.info&&t.info.mobile&&(n="m");t.isApp&&(n="a");return"s"+e+n}(t),t.info.mobile&&(t.freqRetry=!0),Object(w.e)(t,w.a.E_START,{},{}),Object(B.b)(t),[4,Object(N.d)(t)];case 1:return e.sent(),Object(D.c)(t),[2]}}))}))};var Ht,Wt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Yt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Jt=document.currentScript,zt=null===(Ht=null==Jt?void 0:Jt.dataset)||void 0===Ht?void 0:Ht.id;window.__EXCO=window.__EXCO||{},zt&&(window.__EXCO[zt]=window.__EXCO[zt]||{}),(window.__EXCO[zt]||window.__EXCO).AP_INIT=function(t){return Wt(void 0,void 0,void 0,(function(){return Yt(this,(function(e){switch(e.label){case 0:return[4,Vt(t)];case 1:return[2,e.sent()]}}))}))}}]);