(function(){const s=document.createElement("link").relList;if(!(s&&s.supports&&s.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0})}function r(t){if(t.ep)return;t.ep=!0;const e=function(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}(t);fetch(t.href,e)}})();const I=5e3,m="exco-uid",v="uids",L="exco-user-sync",_="user-sync-done",C="user-ids-updated",y=s=>{if(!s)return s;let r=s;try{r=JSON.parse(s)}catch{}return r},N=(s,r)=>{try{const t=(e=>{try{return JSON.stringify(e)}catch{return null}})(r);t&&window.localStorage.setItem(s,t)}catch{}},k=new Map,d=s=>k.get(s)||(r=>{try{const t=window.localStorage.getItem(r);return y(t)}catch{}return null})(s)||(r=>{try{const t=document.cookie.split(";").map(e=>e.trim()).map(e=>e.split("="));if(t&&t.length){const e=Object.fromEntries(t);if(e[r])return y(e[r])}}catch{}})(s),O=(s,r,t={})=>{k.set(s,r),N(s,r),((e,a,n=7)=>{const c=new Date(Date.now()+864e5*n);document.cookie=`${e}=${a}; domain=.ex.co; path=/; expires=${c}; SameSite=None; Secure;`})(s,r,t.days)},p={excoCookie:null,syncCookie:null},l={timeout:null,interval:null},S=s=>{let r=s;if(r&&typeof s=="string"&&(r=(e=>{try{return atob(e)}catch{return null}})(s),r&&(r=y(r))),!r)return null;const t=r.tempUIDs||{};return Object.keys(t).map(e=>({name:e,uid:t[e].uid}))},P=s=>{const r=d(m),t=d(v);(p.excoCookie!==r||(e=>{if(!e)return!1;Object.keys(e).some(a=>p.syncCookie&&!p.syncCookie[a])})(t))&&(p.excoCookie=r,p.syncCookie=t?S(t):null,s(p))},b=(s,r={})=>{(t=>{window.parent.postMessage(t,"*");for(let e=0;e<window.parent.frames.length;e++)window.parent.frames[e].postMessage(t,"*")})({type:L,eventName:s,metadata:r})},E={image:async({url:s})=>new Promise(async r=>{const t=(()=>{const e=new Image;return e.style.display="none",e.style.height="1px",e.style.width="1px",e})();t.addEventListener("load",()=>r()),t.addEventListener("error",()=>r()),t.src=s,document.body.appendChild(t)}),iframe:async({url:s})=>new Promise(async r=>{let t=!1;const e=(()=>{const n=document.createElement("iframe");return n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.setAttribute("marginheight",0),n.setAttribute("marginwidth",0),n.setAttribute("TOPMARGIN",0),n.setAttribute("LEFTMARGIN",0),n.setAttribute("allowtransparency","true"),n.setAttribute("width",0),n.setAttribute("height",0),n})(),a=()=>!t&&(t=!0,r());e.id=`sync_${Date.now()}_${Math.random()}`,e.src=s,e.onload=()=>a(),setTimeout(()=>a(),1e3),document.body.appendChild(e)})},x=async({type:s,url:r})=>{const t=E[s];if(!t||!r)return!1;await t({url:r})},M=async s=>{try{const r=window.SYNCS||await(async({network:n,gdpr:c,gdpr_consent:o,gpp:u,gpp_sid:A,ref:h,pver:g,excouid:f,pbv:w})=>{try{const i=new URL("https://sync.ex.co/v1/cookie_sync");return i.searchParams.set("network",n||""),i.searchParams.set("gdpr",c||""),i.searchParams.set("gdpr_consent",o||""),i.searchParams.set("gpp",u||""),i.searchParams.set("gpp_sid",A||""),h&&i.searchParams.set("ref",h),g&&i.searchParams.set("pver",g),f&&i.searchParams.set("excouid",f),w&&i.searchParams.set("pbv",w),(await fetch(i,{credentials:"include"})).json()}catch{}return[]})(s),{syncList:t,id:e}=(n=>{const c={syncList:[],id:null};return n&&Array.isArray(n)&&n.forEach(o=>{o.url&&o.type?c.syncList.push(o):o.id&&(c.id=o.id)}),c})(r);if(e&&O(m,e),s&&s.redirect){const n=e||d(m);x({type:"image",url:s.redirect.replace("[UID]",n||"")})}(n=>{if(n&&Array.isArray(n)){const c=n.find(o=>o.url.includes("rubiconproject.com"));c&&n.push({...c,url:"https://pixel.rubiconproject.com/exchange/sync.php?p=17136_2",type:"image"})}})(t);const a=(n=>{const c={};return n.forEach(o=>{const u=o.p||"no-priority";c[u]||(c[u]=[]),c[u].push(o)}),Object.keys(c).sort((o,u)=>o==="no-priority"?1:u==="no-priority"?-1:parseInt(o)-parseInt(u)).map(o=>c[o])})(t);await j(a)}catch{}},j=async s=>{for(let r of s)Promise.all(r.map(t=>x(t)))};(async()=>{const s=d(v),r=(()=>{try{const e=new URL(window.location);return{isMain:e.pathname.includes("e15e216-l"),network:e.searchParams.get("network"),gdpr:e.searchParams.get("gdpr"),gdpr_consent:e.searchParams.get("gdpr_consent"),gpp:e.searchParams.get("gpp"),gpp_sid:e.searchParams.get("gpp_sid"),ref:e.searchParams.get("ref"),pver:e.searchParams.get("pver"),pbv:e.searchParams.get("pbv"),redirect:e.searchParams.get("redirect"),excouid:e.searchParams.get("excouid")||d(m)}}catch{}return{}})();var t;await Promise.race([M(r),new Promise(e=>setTimeout(()=>e(),s?2e3:5e3))]),t=e=>{b(C,e)},l.timeout&&(clearTimeout(l.timeout),l.timeout=null),l.interval&&(clearInterval(l.interval),l.interval=null),l.timeout=setTimeout(()=>P(t),1e3),l.interval=setInterval(()=>P(t),I),b(_)})();
